angular.module("WsClient",["ngWebSocket","ngCookies"]).provider("wsClient",function(){var a=this,b="wss://api.scriptrapps.io/",c=null,d=null,e=null,f=null,g=null,h={},i=0,j={};this.setBaseUrl=function(a){b=a},this.setPublishChannel=function(a){c=a},this.setSubscribeChannel=function(a){d=a},this.getSubscribeChannel=function(a){return d},this.setToken=function(a){e=a};var k=function(){f=b+"/"+e},l=function(a){return i+=1,i>1e4&&(i=0),i},m=function(a,b){return g+"-"+(b?b+"_"+a:a)},n=function(a,b){return b?b+"_"+a:a},o=function(a,b){return g+"-"+(b?b+"_"+a:a)};this.$get=["$websocket","$cookies","$q","$rootScope",function(b,e,i,p){e.get("token")&&this.setToken(e.get("token")),k();var q=b(f),r={},s=i.defer(),t=i.defer(),u=i.defer();q.onOpen(function(){d&&q.send(JSON.stringify({method:"Subscribe",params:{channel:d}}))}),q.onMessage(function(a){try{var b=JSON.parse(a.data);console.log("Received message data from websocket: ",b),"connected."==b.result&&(g=b.id,s&&s.resolve()),r.data=b,v(b),w(b)}catch(b){console.log("Error when parsing message received over socket",a,b)}}),q.onClose(function(a){console.log("Socket Closed",a),u.resolve(),console.log("Trying to reconnect closed socket."),q.reconnect()}),q.onError(function(a){console.log("Socket Error",a),t.resolve()});var v=function(a){var b=a.id;b&&h.hasOwnProperty(b)?(console.log("Execute registered call back for received socket message.",h[b]),p.$apply(h[b].cb.resolve(a.result)),delete h[b]):console.log("No callbacks registerd for received socket message.")},w=function(a){var b=a.id;if(b&&j.hasOwnProperty("subscribeToAll")){console.log("Execute registered call back for received socket message.",j.subscribeToAll);for(var c=j.subscribeToAll,d=0;d<c.length;d++)c[d].cb(a.result)}else if(b&&j.hasOwnProperty(b)){console.log("Execute registered call back for received socket message.",j[b]);for(var c=j[b],d=0;d<c.length;d++)c[d].cb(a.result)}else console.log("No subscribers registerd for received socket message.")};return{getMessage:function(){return r},getStatus:function(){return q.readyState},subscribe:function(a,b){if(d){var b={time:new Date,cb:b};j[a]?j[a].push(b):j[a]=[b]}},publish:function(a,b,d){var e=c;if(d&&(e=d),e){var f=i.defer(),g=l(),j=m(g,b);return h[j]={time:new Date,cb:f},a.id=j,console.log("Sending publish message",a),q.send({method:"Publish",params:{channel:e,message:JSON.stringify(a)}}),f.promise}console.log("No channel is defined, message won't be sent.",a)},call:function(a,b,c){var d=i.defer(),e={method:a,params:{body:JSON.stringify(b)}},f=l(),g=o(f,c);return h[g]={time:new Date,cb:d},e.id=n(f,c),console.log("Sending call api request over socket.",e),q.send(e),d.promise},updateSubscriptionChannel:function(b){q.send(JSON.stringify({method:"Unsubscribe",params:{channel:a.getSubscribeChannel()}})),a.setSubscribeChannel(b),q.send(JSON.stringify({method:"Subscribe",params:{channel:d}}))},updatePublishingChannel:function(b){a.setPublishChannel(b)},closeSocket:function(a){a?q.close(a):q.close(!1)},onReady:s.promise,onError:t.promise,onClose:u.promise}}]}),angular.module("HttpClient",["ngCookies"]).provider("httpClient",function(){var a="https://example.scriptrapps.io",b=null,c="";this.setBaseUrl=function(b){a=b,console.log(a)},this.setToken=function(a){b=a,console.log(b)};var d=function(b){c=a+"/"+b,console.log(c)};this.$get=["$cookies","$q","$http",function(a,e,f){a.get("token")&&(b=a.get("token"));var g=function(a,b,c){return a&&a[b]||(a||(a={}),a[b]=c),a},h=function(a,h){var i=e.defer();return d(a),h.url=c,h.headers=g(h.headers,"Authorization","Bearer "+b),f(h).then(function(a){if(a.data&&a.data.response){var b=a.data.response;"200"==b.metadata.statusCode&&"success"==b.metadata.status?b.result&&b.result.metadata?"200"==b.result.statusCode&&"success"==b.result.status?i.resolve(b.result.result,a):i.reject(b.result.metadata,a):i.resolve(b.result,a):i.reject(b.metadata,a)}},function(a){i.reject(a)}),i.promise};return{get:function(a,b){var c={method:"GET"};return c.params=b,h(a,c)},post:function(a,b,c){var d={method:"POST"};return d.data=b,c&&(d.headers=c),d.headers=g(d.headers,"Content-Type","application/json"),h(a,d)}}}]});var cachedTemplates=["$templateCache",function(a){"use strict";a.put("/UIComponents/dashboard/frontend/components/chart/chart.html",'<div class="text-center loading" ng-hide=$ctrl.data><i class="fa fa-spinner fa-spin fa-3x"></i></div><div class=padder10><div ng-show=$ctrl.noResults class="alert alert-danger">No data to display</div></div><div ng-if=$ctrl.data><div ng-if="$ctrl.type == \'line\'" style="height: 85%; width: 100%" line-data=$ctrl.data line-xkey={{$ctrl.xkey}} line-ykeys=$ctrl.ykeys line-labels=$ctrl.labels line-colors=$ctrl.colors line-line-width=$ctrl.lineWidth line-point-size=$ctrl.pointSize line-point-fill-colors=$ctrl.pointFillColors line-point-stroke-colors=$ctrl.pointStrokeColors line-ymax=$ctrl.ymax line-ymin=$ctrl.ymin line-smooth=$ctrl.smooth line-hide-hover=$ctrl.hideHover line-hover-callback="$ctrl.hoverCallback(index, options, content, row)" line-parse-time=$ctrl.parseTime line-units=$ctrl.units line-post-units=$ctrl.postUnits line-pre-units=$ctrl.preUnits line-line-date-format=$ctrl.dateFormat(x) line-x-labels=$ctrl.xlabels line-x-label-format=$ctrl.xlabelFormat(x) line-x-label-angle=$ctrl.xlabelAngle line-y-label-format=$ctrl.ylabelFormat(y) line-goals=$ctrl.goals line-goal-stroke-width=$ctrl.goalStrokeWidth line-goal-line-colors=$ctrl.goalLineColors line-events=$ctrl.events line-event-stroke-width=$ctrl.eventStrokeWidth line-event-line-colors=$ctrl.eventLineColors line-continuous-line=$ctrl.continuousLine line-axes=$ctrl.axes line-grid=$ctrl.grid line-grid-text-color=$ctrl.gridTextColor line-grid-text-size=$ctrl.gridTextSize , line-grid-text-family=$ctrl.gridTextFamily line-grid-text-weight=$ctrl.gridTextWeight line-fill-opacity=$ctrl.fillOpacity line-resize=$ctrl.resize line-chart></div><div ng-if="$ctrl.type == \'bar\'" style="height: 85%; width: 100%" bar-data=$ctrl.data bar-x={{$ctrl.xkey}} bar-y=$ctrl.ykeys bar-labels=$ctrl.labels bar-colors=$ctrl.colors bar-resize=$ctrl.resize bar-stacked=$ctrl.stacked bar-hide-hover=$ctrl.hideHover bar-hover-callback="$ctrl.hoverCallback(index, options, content, row)" bar-grid=$ctrl.grid bar-grid-text-color=$ctrl.gridTextColor bar-grid-text-size=$ctrl.gridTextSize , bar-grid-text-family=$ctrl.gridTextFamily bar-grid-text-weight=$ctrl.gridTextWeight bar-axes=$ctrl.axes bar-ymax=$ctrl.ymax bar-ymin=$ctrl.ymin bar-goals=$ctrl.goals bar-goal-stroke-width=$ctrl.goalStrokeWidth bar-goal-line-colors=$ctrl.goalLineColors bar-x-label-angle=$ctrl.xlabelAngle bar-y-label-format=$ctrl.ylabelFormat(y) bar-parse-time=$ctrl.parseTime bar-events=$ctrl.events bar-event-stroke-width=$ctrl.eventStrokeWidth bar-event-line-colors=$ctrl.eventLineColors bar-post-units=$ctrl.postUnits bar-pre-units=$ctrl.preUnits bar-chart></div><div ng-if="$ctrl.type == \'area\'" style="height: 85%; width: 100%" area-chart line-colors=$ctrl.colors area-data=$ctrl.data area-xkey={{$ctrl.xkey}} area-ykeys=$ctrl.ykeys area-labels=$ctrl.labels area-line-width=$ctrl.lineWidth area-point-size=$ctrl.pointSize area-point-fill-colors=$ctrl.pointFillColors area-point-stroke-colors=$ctrl.pointStrokeColors area-ymax=$ctrl.ymax area-ymin=$ctrl.ymin area-smooth=$ctrl.smooth area-hide-hover=$ctrl.hideHover area-hover-callback="$ctrl.hoverCallback(index, options, content, row)" area-parse-time=$ctrl.parseTime area-units=$ctrl.units area-post-units=$ctrl.postUnits area-pre-units=$ctrl.preUnits area-area-date-format=$ctrl.dateFormat(x) area-x-labels=$ctrl.xlabels area-x-label-format=$ctrl.xlabelFormat(x) area-x-label-angle=$ctrl.xlabelAngle area-y-label-format=$ctrl.ylabelFormat(y) area-goals=$ctrl.goals area-goal-stroke-width=$ctrl.goalStrokeWidth area-goal-line-colors=$ctrl.goalLineColors area-events=$ctrl.events area-event-stroke-width=$ctrl.eventStrokeWidth area-event-line-colors=$ctrl.eventLineColors area-continuous-line=$ctrl.continuousLine area-axes=$ctrl.axes area-grid=$ctrl.grid area-grid-text-color=$ctrl.gridTextColor area-grid-text-size=$ctrl.gridTextSize , area-grid-text-family=$ctrl.gridTextFamily area-grid-text-weight=$ctrl.gridTextWeight area-fill-opacity=$ctrl.fillOpacity area-resize=$ctrl.resize area-behave-like-line=$ctrl.behaveLikeLine></div><div ng-if="$ctrl.type == \'donut\'" style="height: 85%; width: 100%" donut-data=$ctrl.data donut-label-color=$ctrl.labelColor donut-background-color=$ctrl.backgroundColor donut-colors=$ctrl.colors donut-formatter=$ctrl.donutFormatter(y,data) donut-resize=$ctrl.resize donut-chart></div></div>'),a.put("/UIComponents/dashboard/frontend/components/gauge/gauge.html",'<div style="width: {{$ctrl.width}}%; height: {{$ctrl.height}}{{$ctrl.heightUnit}}" class=gauge><div value={{$ctrl.gaugeValue}} value-font-color={{$ctrl.valueFontColor}} min={{$ctrl.min}} max={{$ctrl.max}} hide-min-max={{$ctrl.hideMinMax}} hide-value={{$ctrl.hideValue}} hide-inner-shadow={{$ctrl.hideInnerShadow}} gauge-color={{$ctrl.gaugeColor}} shadow-opacity={{$ctrl.shadowOpacity}} shadow-size={{$ctrl.shadowSize}} custom-sectors={{$ctrl.customSectors}} label={{$ctrl.label}} label-font-color={{$ctrl.labelFontColor}} start-animation-type={{$ctrl.startAnimationType}} refresh-animation-type={{$ctrl.refreshAnimationType}} counter={{$ctrl.counter}} title={{$ctrl.title}} title-font-color={{$ctrl.titleFontColor}} title-font-family={{$ctrl.titleFontFamily}} title-position={{$ctrl.titlePosition}} value-font-family={{$ctrl.valueFontFamily}} relative-gauge-size={{$ctrl.relativeGaugeSize}} value-min-font-size={{$ctrl.valueMinFontSize}} title-min-font-size={{$ctrl.titleMinFontSize}} label-min-font-size={{$ctrl.labelMinFontSize}} min-label-min-font-size={{$ctrl.minLabelMinFontSize}} max-label-min-font-size={{$ctrl.maxLabelMinFontSize}} gauge-width-scale={{$ctrl.gaugeWidthScale}} shadow-vertical-offset={{$ctrl.shadowVerticalOffset}} level-colors={{$ctrl.levelColors}} no-gradient={{$ctrl.noGradient}} start-animation-time={{$ctrl.startAnimationTime}} refresh-animation-time={{$ctrl.refreshAnimationTime}} donut={{$ctrl.donut}} donut-start-angle={{$ctrl.donutStartAngle}} reverse={{$ctrl.reverse}} decimals={{$ctrl.decimals}} symbol={{$ctrl.symbol}} format-number={{$ctrl.formatNumber}} human-friendly={{$ctrl.humanFriendly}} human-friendly-decimal={{$ctrl.humanFriendlyDecimal}} on-animation-end={{$ctrl.onAnimationEnd}} pointer={{$ctrl.pointer}} justgage></div></div>'),a.put("/UIComponents/dashboard/frontend/components/odometer/odometer.html","<div ng-style=$ctrl.style><span odometer=$ctrl.odometerValue odometer-options=$ctrl.odometerOptions></span></div>"),a.put("/UIComponents/dashboard/frontend/components/searchBox/searchBox.html",'<div class=row><div class="col-xs-12 col-sm-9"><input class="form-control input-sm" ng-keyup="$event.keyCode == 13 ? $ctrl.onFilterChanged() : null" ng-model=$ctrl.searchValue placeholder={{$ctrl.searchText}}></div><div class="col-xs-12 col-sm-3 button-wrapper"><button ng-click=$ctrl.onFilterChanged() class="btn btn-warning btn-sm">Go</button></div><div ng-show=$ctrl.noResults class="col-xs-12 alert"><span class="alert col-xs-12 alert-danger">no results</span></div></div><div><div class="text-center loading" ng-show=$ctrl.searching><i class="fa fa-spinner fa-spin fa-2x"></i></div><abn-tree tree-data=$ctrl.treeData tree-control=$ctrl.treeControl icon-leaf={{$ctrl.iconLeaf}} icon-expand={{$ctrl.iconExpand}} icon-collapse={{$ctrl.iconCollapse}} on-select=$ctrl.onSelect(branch) expand-level=$ctrl.expandLevel initial-selection=$ctrl.initialSelection></abn-tree></div>'),a.put("/UIComponents/dashboard/frontend/components/speedometer/speedometer.html",'<meter-gauge gaugeconfig="{\n           gaugeRadius: $ctrl.gaugeRadius,\n           minVal: $ctrl.minValue,\n           maxVal: $ctrl.maxValue,\n           needleVal: $ctrl.needleVal,\n           tickSpaceMinVal: $ctrl.tickSpaceMinVal,\n           tickSpaceMajVal: $ctrl.tickSpaceMajVal,\n           gaugeUnits: $ctrl.gaugeUnits,\n           tickColMaj: $ctrl.tickColMaj,\n           tickColMin: $ctrl.tickColMin,\n           outerEdgeCol: $ctrl.outerEdgeCol,\n           pivotCol: $ctrl.pivotCol,\n           innerCol: $ctrl.innerCol,\n           unitsLabelCol: $ctrl.unitsLabelCol,\n           tickLabelCol: $ctrl.tickLabelCol,\n           needleCol: $ctrl.needleCol,\n           defaultFonts: $ctrl.defaultFonts\n         }"></meter-gauge>'),a.put("/UIComponents/dashboard/frontend/components/message/message.html","<ng-display-box ng-model=$ctrl.data type={{$ctrl.type}}></ng-display-box>"),a.put("/UIComponents/dashboard/frontend/components/ACL/ACL.html",'<div class=acl-wrapper ng-click="$ctrl.showAccessControlList = true"><span class=acl-btn ng-class="($ctrl.users.length == 1 && $ctrl.users[0].code == \'anonymous\') ? \'unlocked\' : \'locked\'"><a ng-click=$ctrl.openModal() href=javascript:void(0); uib-tooltip={{$ctrl.accessType}} tooltip-placement=right><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAARCAYAAADZsVyDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkExOUI1NTNCNDc3MzExRTY4OEY2ODFFOTcxN0Q4QkIxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkExOUI1NTNDNDc3MzExRTY4OEY2ODFFOTcxN0Q4QkIxIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTE5QjU1Mzk0NzczMTFFNjg4RjY4MUU5NzE3RDhCQjEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTE5QjU1M0E0NzczMTFFNjg4RjY4MUU5NzE3RDhCQjEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6vZpebAAAB2UlEQVR42rSUv0sCYRjH37vu0BNNdG2Qk1ocEk53F1tapdnlqECac2hIbkloFOL8F8IlwqUmQZwOsUHBIZMWRSQHFVTyeh55kzc9Ray+8OX96eee93mfVy6TyRBQCOwh2+kDbCQSiR+TAlgHn5LfKQs+Yyf4P4ASKwZP/kkCbQ2aq23koXdkCU6Cn7cER8FPq8CoS7rpiG6MbgBN1uv1fbfbTVRVXQm+Z6JOriu/Vqt1gK3L5bIPBgMVTNLp9LmmaYN+v/+IaRUscmWsq2v4obfdbl9Mp1NpPB7P51Op1N1wOCROp/MN9sgsGGF+2vdbXQjKbreL4E+EdLvd+TyOUYFAwBeLxXaEhSInTCqWVC6X8RQnDofjcBZJKGTG43ETIuR1XTebzSbX6/VIPp+/EhaK3E+hN1YRy7LsbTQaynd0kUiEwEeIJEkkHA7PwHCZ6GsWbDD9V6u6Nk1zz2az7UJ+fZPJRAQQHn221ul0OGzxIzzPGwKTX4MCo7RdfgkejwF+qFartzAM5nI5DoAIJbVabQZWFOWlWCyGBeboGwnTMBqN5uNCocCx66VSScYYODjexk+MeQT4j0hEUXyHlGjYDwaDWqVSOaZFkN0WTJiy1Gn/iF34EmAAsBK5Pr0LIbQAAAAASUVORK5CYII=" alt=restrictions> <i class="fa fa-lock acl-icon-locked red"></i> <i class="fa fa-unlock-alt acl-icon acl-icon-unlocked light-green"></i></a></span></div>'),a.put("/UIComponents/dashboard/frontend/components/ACL/myModalContent.html",'<div class=acl-controls><div class=modal-header><h3 class=modal-title>Access Control List</h3></div><div class=modal-body><div ng-if=$ctrl.show uib-alert ng-class="\'alert-\' + ( $ctrl.message.type || \'warning\')  + \' m10\'" close=$ctrl.closeAlert() dismiss-on-timeout=5000>{{$ctrl.message.content}}</div><h5 class=text-info>List of groups and devices allowed to run the script <a href=javascript:void(0); class=text-primary uib-popover-html=$ctrl.popoverContent popover-placement=right><i class="fa fa-question-circle"></i></a></h5><div ng-show=$ctrl.showMsg class="col-xs-12 center-div alert fadeIn animated alert-info"><div class="col-xs-9 pdl0"><div class="mt8 ml10"><span>Access permission to the "anonymous" predefined group allows anyone to serve the file. Adding it to your access control list will automatically remove any other groups or devices. Are you sure you want to continue?</span></div></div><div class="col-xs-3 pdr0 text-right"><button ng-click=$ctrl.removeAnonymousAccess() type=button class="btn btn-default btn-sm mr5">No</button> <button ng-click=$ctrl.addAnonymousAccess() type=button class="btn btn-primary btn-sm">Yes</button></div></div><scriptr-autocomplete id=devicesList placeholder="Select a user/group" pause=400 hide-list=false search-fields=code default-set-object=$ctrl.defaultSetObject selected-object=$ctrl.onSelect title-field=code objects=$ctrl.users clear-selected=true description-field=description image-field=pic list-selected-object=true minlength=0 text-no-results="No results" text-searching=Searching... transport=https on-format-data=$ctrl.callback api=UIComponents/dashboard/frontend/examples/list/getDevices input-class="form-control form-control-small"></scriptr-autocomplete><div class=clearfix></div><div class="italic text-muted fnt12 mt10"><i class="fa fa-info-circle" aria-hidden=true></i><span id=permissionsNote> Note that removing scriptr device from the access control list will prevent you from serving the file from the IDE.</span></div></div><div class=modal-footer><button type=button class="btn btn-default" ng-click=$ctrl.onCancel()>Close</button> <button type=button class="btn btn-warning" ng-click=$ctrl.updateFileACL()>Save changes</button></div></div>'),a.put("/UIComponents/dashboard/frontend/components/grid/grid.html",'<div class=filter-bar><div class={{$ctrl.class}}><form><div ng-hide={{$ctrl.enableClientSideFilter}} class="form-group col-xs-12 col-sm-5"><div class=input-group><div class=input-group-addon>Client filter</div><input class=form-control ng-change=$ctrl.onFilterChanged() ng-model=$ctrl.quickFilterValue placeholder="Type text to filter..."></div></div><div ng-hide={{$ctrl.enableServerSideFilter}} class="form-group col-xs-12 col-sm-5"><div class=input-group><div class=input-group-addon>Server filter</div><input class=form-control ng-model=$ctrl.gridOptions.quickFilterText placeholder="Type text to filter..."></div></div><div class="col-xs-12 col-sm-2 text-right"><button ng-hide={{$ctrl.enableDeleteRow}} ng-click=$ctrl.openConfirmationPopUp() class="btn btn-danger mt4" tooltip-placement=top uib-tooltip="Delete selected row"><i class="fa fa-close" aria-hidden=true></i></button> <button ng-hide={{$ctrl.enableAddRow}} ng-click=$ctrl.onAddRow() class="btn btn-success mt4" tooltip-placement=top uib-tooltip="Insert row"><i class="fa fa-plus" aria-hidden=true></i></button></div></form></div></div><div class=col-xs-12 ng-show=$ctrl.showError><div class=alert ng-class="\'alert-\' + ( $ctrl.message.type || \'warning\')">{{$ctrl.message.content}}</div></div><div class=clearfix></div><div class=col-xs-12><div ag-grid=$ctrl.gridOptions class=ag-bootstrap ng-style=$ctrl.style></div></div>'),a.put("/UIComponents/dashboard/frontend/components/grid/popup.html",'<div class=modal-header><h3 class=modal-title>Delete</h3></div><div class=modal-body>Are you sure you want to delete the selected row?</div><div class=modal-footer><button class="btn btn-warning" type=button ng-click=close()>No</button> <button class="btn btn-warning" type=button ng-click=onRemoveRow()>Yes</button></div>'),a.put("/UIComponents/dashboard/frontend/components/list/autocomplete.html",'<div><span ng-show=$ctrl.showList ng-hide=$ctrl.hideObjects class=script-wrap ng-if=$ctrl.listSelectedObject ng-repeat="obj in $ctrl.objects track by $index"><span style="position: relative"><span class=script-text uib-tooltip={{obj[$ctrl.titleField]}} tooltip-placement=bottom><i class="mr5 text-primary {{obj.icon}}"></i> {{obj[$ctrl.titleField]}}</span> <a ng-if="obj[$ctrl.titleField] != \'nobody\'" href=javascript:void(0); ng-click=$ctrl.addObjectToList(obj) uib-tooltip=Remove tooltip-placement=right><i class="fa fa-close"></i></a></span></span><div class=clearfix></div><div class="text-center loading" ng-show=!$ctrl.showList><i class="fa fa-spinner fa-spin fa-3x"></i></div><angucomplete-alt ng-show=$ctrl.showList id={{$ctrl.id}} placeholder={{$ctrl.placeholder}} default-set-object=$ctrl.defaultSetObject pause={{$ctrl.pause}} hide-objects=$ctrl.hideObjects list-selected-object=$ctrl.listSelectedObject objects=$ctrl.objects selected-object=$ctrl.selectedObject local-data=$ctrl.localData image-field={{$ctrl.imageField}} search-fields={{$ctrl.searchFields}} title-field={{$ctrl.titleField}} description-field={{$ctrl.descriptionField}} image-field={{$ctrl.imageField}} minlength={{$ctrl.minlength}} input-class={{$ctrl.inputClass}} match-class={{$ctrl.matchClass}} maxlength={{$ctrl.maxlength}} selected-object-data=$ctrl.selectedObjectData input-name={{$ctrl.inputName}} clear-selected={{$ctrl.clearSelected}} override-suggestions={{$ctrl.overrideSuggestions}} field-required=$ctrl.fieldRequired field-required-class={{$ctrl.fieldRequiredClass}} initial-value=$ctrl.initialValue input-changed=$ctrl.inputChanged auto-match=$ctrl.autoMatch focus-in=$ctrl.focusIn focus-out=$ctrl.focusOut disable-input=$ctrl.disableInput focus-first=$ctrl.focusFirst field-tabindex={{$ctrl.fieldTabindex}} text-searching={{$ctrl.textSearching}} text-no-results={{$ctrl.textNoResults}}></div>'),a.put("/UIComponents/dashboard/frontend/components/map/map.html",'<div style="height: 90%;"> \n\t<section class="map-wrap" ng-if="$ctrl.clusteredView == true || $ctrl.showDetailedMap == false">\n\t\t<ng-map id="{{\'clustered-\'+$ctrl.$wdgid}}" on-zoom_changed="$ctrl.onClusteredZoomChanged();"\n\t\t\tsingle-info-window="true" zoom-to-inlude-markers="true"\n\t\t\tcenter="{{$ctrl.mapcenter || $ctrl.defaultCenter}}"\n\t\t\tzoom="{{$ctrl.clusterZoom}}"> </ng-map>\n\t</section>\n\t<section class="map-wrap" ng-if="$ctrl.clusteredView == false || $ctrl.showDetailedMap == true">\n\t\t<ng-map id="{{\'detailed-\'+$ctrl.$wdgid}}" on-zoom_changed="$ctrl.onDetailedZoomChanged();"\n\t\t\tsingle-info-window="true" zoom-to-inlude-markers="true"\n\t\t\tcenter="{{$ctrl.mapcenter || $ctrl.defaultcenter}}"\n\t\t\tzoom="{{$ctrl.detailedmapzoom}}">\n            <drawing-manager ng-if="$ctrl.geofenceManager == true"\n                on-overlaycomplete="$ctrl.onMapOverlayCompleted()"\n                drawing-control-options="{{$ctrl.drawingOptions}}"\n                drawingControl="{{$ctrl.drawingControl}}"\n                drawingMode="null"\n                rectangleOptions="{{$ctrl.overlaySettings}}"\n               >\n              </drawing-manager>\n\t\t<div>\n\t\t\t<div ng-repeat="(key, asset) in $ctrl.displayedAssets">\n\t\t\t\t<shape name="polyline" path="{{asset.path}}"\n\t\t\t\t\tstroke-color="{{asset.pathColor}}"\n\t\t\t\t\tstroke-opacity="{{asset.strokeOpacity}}"\n\t\t\t\t\tstroke-width="{{asset.strokeWeight}}" icons="{{asset.pathIcon}}">\n\t\t\t\t</shape>\n\t\t\t\t<div ng-repeat="marker in asset.markers track by $index">\n\t\t\t\t\t<div ng-if="$ctrl.trackedAsset == null">\n\t\t\t\t\t\t<marker position="{{marker.position}}" title="{{marker.display}}"\n\t\t\t\t\t\t\ticon="{{marker.icon}}"\n\t\t\t\t\t\t\ton-click="$ctrl.showAssetInfo(event, marker, \'{{marker.assetKey}}\', \'{{marker.tripKey}}\', \'{{marker.id}}\')">\n\t\t\t\t\t\t</marker>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div ng-if="$ctrl.trackedAsset !=null">\n\t\t\t\t\t\t<marker position="{{marker.position}}" title="{{marker.title}}"\n\t\t\t\t\t\t\ticon="{{marker.icon}}" clickable="false">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- end trip markers loop --\x3e\n\t\t\t</div>\n\t\t</div>\n        <div ng-if="$ctrl.selectedAsset != null && $ctrl.markerInfoWindow == true"  >\n\t\t\t<div ng-transclude></div>\n          \t<info-window id="{{\'infoWindowTemplate_default_\'+$ctrl.$wdgid}}">\n              \t<div ng-non-bindable="">\n                  \x3c!-- begin table --\x3e\n                  <table class="table table-bordered">\n                    <thead>\n                      <tr>\n                        <th ng-repeat="(key, value) in marker.details">{{key}}</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      <tr>\n                        <td ng-repeat="(key, value) in marker.details">{{value.value || "N/A"}}</td>\n                      </tr>\n                    </tbody>\n                  </table>\n               </div>\n          \t</info-window>\n\t\t</div>\n\t\t</ng-map>\n          \n        <div  class="messages" ng-show="$ctrl.drawingMessages != null">\n            <div class="alert alert-warning">\n              {{$ctrl.drawingMessages}}\n            </div>\n        </div>\n\n        <div ng-if="$ctrl.geofenceManager == true" class="drawingmanager-buttons">\n            <span>\n              <a ng-click="$ctrl.removeGeofence()" data-toggle="tooltip" title="Delete geofence" data-placement="bottom"><i class="fa fa-trash" aria-hidden="true"></i></a>\n              <a  ng-click="$ctrl.saveGeofence()" data-toggle="tooltip" title="Save geofence" data-placement="bottom"><i class="fa fa-floppy-o" aria-hidden="true"></i></a>\n              <a type="button" data-toggle="tooltip" title="Locate geofence" ng-click="$ctrl.focusGeofence()" data-placement="bottom"><i class="fa fa-location-arrow" aria-hidden="true"></i></a>\n              <a type="button" data-toggle="tooltip" title="Locate vehicle" ng-click="$ctrl.focusVehicle()" data-placement="bottom"><i class="fa fa-car aria-hidden="true"></i> </a>\n            </span>\n      </div>\n\t</section>\n</div>\n'),a.put("/UIComponents/dashboard/frontend/components/progressBar/progressBar.html",'<uib-progressbar ng-if=!$ctrl.stacked value=$ctrl.value title={{$ctrl.title}} max=$ctrl.max animate=$ctrl.animate type={{$ctrl.type}} class={{$ctrl.class}}></uib-progressbar><uib-progress ng-if=$ctrl.stacked class={{$ctrl.class}}><uib-bar ng-repeat="bar in $ctrl.stacked track by $index" value=bar.value title={{bar.title}} type={{bar.type}}>{{bar.value}}%</uib-bar></uib-progress>'),a.put("/UIComponents/dashboard/frontend/components/thermometer/tg_thermometer_vertical.html",'<div style="height: {{height}}px" class=tg-thermometer ng-class=size><div class=draw-a></div><div class=draw-b></div><div class=meter><div class=statistics><div class="percent percent-a">100%</div><div class="percent percent-b">75%</div><div class="percent percent-c">50%</div><div class="percent percent-d">25%</div><div class="percent percent-e">0%</div></div><div style="height: {{percent}}%" class=mercury><div class=percent-current>{{percent}}%</div><div class=mask><div class=bg-color style="height: calc({{height}}px - 57px)"></div></div></div></div></div>'),a.put("/UIComponents/dashboard/frontend/components/thermometer/thermometer.html","<tg-thermometer-vertical percent={{$ctrl.percent}} size={{$ctrl.size}} height={{$ctrl.height}}></tg-thermometer-vertical>"),
a.put("/UIComponents/dashboardBuilder/javascript/components/dashboard.html",'<div ng-if="$ctrl.custom">\n    <div ng-if="$ctrl.showDashboard && !$ctrl.switchStatus">\n        <div class="col-xs-12 dashboard-toolbar">\n            <ul>\n                <li ng-click="$ctrl.showDashboard = false"><a href="javasscript:void(0);" class="btn btn-info btn-sm"><i class="fa fa-arrow-circle-left"></i> Back to dashboard panel</a></li>\n                <li ng-click="$ctrl.switchStatus = true" class="pull-right"><a href="javasscript:void(0);" class="btn btn-warning btn-sm"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> Edit dashboard</a></li>\n            </ul>\n        </div>\n    </div>\n    <div ng-if="!$ctrl.showDashboard" class="container">\n      <div ng-click="$ctrl.addCustomDashboard()" class="col-xs-12 mb20">\n        <div class="box-shadow text-white add-dashboard">\n          <div class="col-xs-12 text-center"> \n            <h5 class="box-title text-uppercase">Add custom dashboard</h5>\n          </div>\n          Create and manage visually your dashboard.\n          <div><button type="button" class="btn btn-warning add-btn"><i class="fa fa-plus-circle" aria-hidden="true"></i> Add</button></div>\n        </div>\n      </div>\n        <div ng-if="$ctrl.showPanelMsg && !$ctrl.showDashboard" class="col-xs-12">\n            <div uib-alert ng-class="\'alert-\' + ( $ctrl.message.type || \'warning\')" close="$ctrl.closeMsg()" dismiss-on-timeout="5000">{{$ctrl.message.content}}</div>\n        </div>  \n      <span class="col-xs-12 col-sm-4 mb20" ng-show="$ctrl.noDashboards">No Dashboards created.</span>    \n      <div class="text-center loading" ng-show="$ctrl.loading"><i class="fa fa-spinner fa-spin fa-3x"></i></div> \n      <div ng-repeat="dashboard in $ctrl.customDashboards track by $index" class="col-xs-12 col-sm-4 mb20 custom-dashboard-box">\n        <div index="{{scriptName = dashboard.path}}" class="box-shadow bg-white">\n          <div class="col-xs-12 added-box-title text-left">\n            <div class="pull-left"><h4 onaftersave="$ctrl.renameDashboard(dashboard.name, dashboard.path)"  href="#" editable-text="dashboard.name" e-form="textBtnForm" uib-tooltip="{{dashboard.path}}" tooltip-placement="bottom">{{dashboard.name}}</h4></div>\n              <a title="Edit widget" ng-click="textBtnForm.$show()" ng-hide="textBtnForm.$visible"><i class="edit-name glyphicon glyphicon-pencil"></i></a>\n            <div class="pull-right remove-widget">    \n              <a title="Remove widget" ng-click="$ctrl.deleteDashboardPopUp(dashboard.path, dashboard.name)"><i class="glyphicon glyphicon-trash"></i></a>\n            </div>\n          </div>\n          <div class="clickable">\n            <div ng-click="$ctrl.showCustomDashboard(scriptName)" class="col-xs-12 center-div custom-widget-icon">\n              <i class="fa fa-pie-chart" aria-hidden="true"></i>\n            </div>\n          </div>\n          <div class="clearfix"></div>\n        </div>\n      </div>\n    </div>\n    <iframe ng-if="!$ctrl.switchStatus && $ctrl.showDashboard" class="dashboard-iframe" width="100%" height="800px" src="{{$ctrl.trustSrc($ctrl.dashboardScriptName)}}" frameborder="0" allowfullscreen></iframe>\n    <scriptr-publisher\n                       msg-tag = "homeCustomDashboard"\n                       on-format-data="$ctrl.homeCallback"> \n    </scriptr-publisher>\n</div>\n\n\n<div ng-if="($ctrl.switchStatus && $ctrl.showDashboard) || !$ctrl.custom">\n  \x3c!-- begin left side --\x3e\n  <div ng-if="!$ctrl.isInIde && $ctrl.showTree" class="left-dashboard">\n    <div class="grey-bg pdt5 col-xs-12 devices-models-tree">\n      <scriptr-searchbox \n                         transport="https"\n                         load-tree = "$ctrl.loadTree"\n                         icon-expand = "{{$ctrl.iconExpand || \'fa expand-collapse fa-caret-right\'}} "\n                         icon-collapse = "{{$ctrl.iconCollapse || \'fa expand-collapse fa-caret-right\'}}"\n                         tree-search-criteria = "{{$ctrl.treeSearchCriteria}}"\n                         api=\'{{$ctrl.devicesModel}}\'\n                         on-select="$ctrl.selectBranch"\n      </scriptr-searchbox>\n    </div>\n  </div>\n  \x3c!-- end left side --\x3e\n\n  \x3c!-- begin dashboard content --\x3e\n  <div class="dashboard-content">\n      \x3c!-- begin page header --\x3e\n      <div class="page-header col-xs-12">\n           <div ng-if="$ctrl.show" uib-alert ng-class="\'alert-\' + ( $ctrl.message.type || \'warning\')  + \' m10\'" close="$ctrl.closeAlert()" dismiss-on-timeout="5000">{{$ctrl.message.content}}</div>\n           <form name="scriptForm" ng-submit="$ctrl.saveDashboard(scriptForm)">\n            <div class="form-group col-xs-12 col-sm-6">\n              <div class="row">\n                <div ng-if="$ctrl.custom" ng-click="$ctrl.showDashboard = false" class="col-xs-12 col-sm-4 pdr0"><a class="back-to-panel btn-block btn btn-info" href="javasscript:void(0);"><i class="fa fa-arrow-circle-left"></i> Back to dashboard panel</a></div>   \n\n                <div class="col-xs-12 col-sm-5 pdl10 pdr0"><div ng-if="!$ctrl.isInIde" sf-options="$ctrl.frmGlobalOptions" sf-schema="$ctrl.schema" sf-form="$ctrl.form" sf-model="$ctrl.model" ></div>\n                  </div>\n                  <div class="col-xs-12 col-sm-2 pdl0 pdr0"><button class="btn-sm  btn btn-warning ml5 btn-block"  type="submit" ng-if="!$ctrl.isInIde"><i class="fa fa-floppy-o" aria-hidden="true"></i> Save</button>\n                  </div>\n                   <div ng-if="$ctrl.savedScript && !$ctrl.isInIde" class="col-xs-12 col-sm-1">\n                      <scriptr-acl \n                                   users="$ctrl.users"\n                                   default-set-object="[{code : \'nobody\',icon : \'fa fa-group\'}]"\n                                   on-save="$ctrl.onACLChange"       \n                                   >\n                      </scriptr-acl>\n                  </div>\n              </div>\n            </div>\n            <div class="col-xs-12 col-sm-6 pull-right">\n               <a class="pull-right btn btn-sm btn-warning ml5" ng-if="!$ctrl.isInIde && !$ctrl.custom" ng-click="$ctrl.logout()"><i class="fa fa-user-circle" aria-hidden="true"></i> Logout</a>\n               <a class="pull-right btn btn-sm btn-warning ml5"  ng-click="$ctrl.clear()"><i class="fa fa-trash" aria-hidden="true"></i> Clear</a>\n               <a class="pull-right btn  btn-sm btn-warning ml5"  ng-if="!$ctrl.custom" ng-click="$ctrl.setTransportSettings()"><i class="fa fa-cog" aria-hidden="true"></i> Settings</a>\n               <a class="pull-right  btn-sm  btn btn-warning ml5" ng-if="!$ctrl.isInIde" ng-if="$ctrl.isEdit" ng-click="$ctrl.viewDasboard()"><i class="fa fa-eye" aria-hidden="true"></i> View</a>\n            </div>\n          </form>\n      </div>\t\n      \x3c!-- end page header --\x3e\n      \x3c!-- begin slick wrap --\x3e\n    <div class="col-xs-12 pdl0 slick-wrap">\n          \x3c!-- begin carousel options --\x3e\n          <div   class="dark-grey-bg pdt5 pdb5 pdr10 chart-options-wrap">\n            <div class="slick-container">\n                <slick \n                       settings="$ctrl.slickConfig"\n                       infinite="true" \n                       slides-to-show="$ctrl.widgetsConfig.length"\n                       slides-to-scroll="0"\n                       ng-if="$ctrl.dataLoaded" \n                       init-onload="false"\n                       data="$ctrl.dataLoaded"\n                       >\n                  <div class="slick-item" ng-repeat="item in $ctrl.widgetsConfig" ng-if="item.show != false">\n                     <span >\n                         <a ng-click="$ctrl.addWidget(item)">\n                           <img ng-if="item.imgSrc" ng-src="{{ item.imgSrc }}" class="{{item.imgCls}}" alt="{{ item.label}}" />\n                           <i ng-if="item.iconSrc" class="{{ item.iconSrc }}" aria-hidden="true" alt="{{ item.label}}" /></i>\n                           <span class="slick-label">{{ item.label }}</span>\n                         </a>\n                      </span>\n                  </div>\n                </slick>\n             </div>\n          </div>\n          \x3c!-- end carousel options --\x3e\n\n        <div class="clearfix"></div>\n\n        \x3c!-- begin gridster --\x3e\n        <div gridster="$ctrl.gridsterOptions" class="builder">\n            <ul>\n                <li gridster-item="widget" ng-repeat="widget in $ctrl.dashboard.widgets">\n                  <box widget="widget"></box>\n                </li>\n            </ul>\n        </div>\n        \x3c!-- end gridster --\x3e\n    </div>\n    \x3c!-- end slick wrap --\x3e\n\n\n  </div>\n</div>\n\x3c!-- end dashboard content --\x3e\n'),a.put("/UIComponents/dashboardBuilder/javascript/components/box.html",'<div class=box-wrapper><div class=box><div class="box-header col-xs-12"><div class="box-label pull-left" uib-tooltip={{$ctrl.widget.options.boxLabel}}>{{$ctrl.widget.options.boxLabel}}</div><div class="box-header-btns pull-right"><a title=settings ng-if=$ctrl.widget.form ng-click=$ctrl.openSettings($ctrl.widget)><i class="glyphicon glyphicon-cog"></i></a> <a title="Remove widget" ng-click=$ctrl.remove($ctrl.widget)><i class="glyphicon glyphicon-trash"></i></a></div></div><div class=clearfix></div><div class=box-content></div></div></div>'),a.put("/UIComponents/dashboardBuilder/javascript/components/myModalContent.html",'<div class=modal-header><h3 class=modal-title id=modal-title>{{$ctrl.widget.label}}</h3></div><div class=modal-body id=modal-body><form name=myForm ng-submit=$ctrl.onSubmit(myForm)><div sf-options=$ctrl.frmGlobalOptions sf-schema=$ctrl.schema sf-form=$ctrl.form sf-model=$ctrl.model></div><button type=submit class="btn btn-info">Ok</button> <button type=reset class="btn btn-danger" ng-click=$ctrl.onCancel()>Cancel</button></form></div>'),a.put("/UIComponents/dashboardBuilder/view/dashboard.html","<dashboard load-tree=true tree-search-criteria=model.Car devices-model=modules/devicemodels/api/getSensors custom=true></dashboard>")}];angular.module("Odometer",["ui.odometer"]),angular.module("Odometer").component("scriptrOdometer",{bindings:{onLoad:"&onLoad",api:"@",theme:"@",duration:"@",animation:"@",transport:"@",odometerValue:"<?",msgTag:"@",apiParams:"<?",size:"<?",onFormatData:"&"},templateUrl:"/UIComponents/dashboard/frontend/components/odometer/odometer.html",controller:["httpClient","wsClient",function(a,b){var c=this;this.$onInit=function(){this.config={duration:this.duration?this.duration:1e3,animation:this.animation?this.animation:"count",theme:this.theme?this.theme:"car"},this.odometerOptions=this.config,this.odometerValue=this.odometerValue?this.odometerValue:0,this.size=this.size?this.size:1,this.style={},this.style["font-size"]=this.size+"em",this.transport=this.transport?this.transport:"wss",this.msgTag=this.msgTag?this.msgTag:null,d(this.transport)};var d=function(d){"wss"==d?b.onReady.then(function(){b.subscribe(c.msgTag,c.consumeData.bind(c)),c.api&&b.call(c.api,c.apiParams,c.msgTag).then(function(a,b){c.consumeData(a)},function(a){console.log("reject published promise",a),c.consumeData()})}):"https"==d&&c.api&&a.get(c.api,c.apiParams).then(function(a,b){c.consumeData(a)},function(a){console.log("reject published promise",a)})};this.consumeData=function(a,b){"function"==typeof c.onFormatData()&&(a=c.onFormatData()(a)),this.odometerValue=a}}]}),angular.module("Speedometer",["meterGauge"]),angular.module("Speedometer").component("scriptrSpeedometer",{bindings:{onLoad:"&onLoad",gaugeRadius:"<?",theme:"@",minValue:"<?",maxValue:"<?",needleVal:"<?",tickSpaceMinVal:"<?",tickSpaceMajVal:"<?",gaugeUnits:"@",tickColMaj:"@",tickColMin:"@",outerEdgeCol:"@",pivotCol:"@",innerCol:"@",unitsLabelCol:"@",tickLabelCol:"@",needleCol:"@",defaultFonts:"@",api:"@",transport:"@",msgTag:"@",apiParams:"<?",onFormatData:"&"},templateUrl:"/UIComponents/dashboard/frontend/components/speedometer/speedometer.html",controller:["httpClient","wsClient",function(a,b){var c=this;this.$onInit=function(){"speed"==this.theme||void 0===this.theme?(this.gaugeRadius=this.gaugeRadius?this.gaugeRadius:150,this.minValue=this.minValue?this.minValue:0,this.maxValue=this.maxValue?this.maxValue:220,this.needleVal=this.needleVal?Math.round(this.needleVal):0,this.tickSpaceMinVal=this.tickSpaceMinVal?this.tickSpaceMinVal:10,this.tickSpaceMajVal=this.tickSpaceMajVal?this.tickSpaceMajVal:20,this.gaugeUnits=this.gaugeUnits?this.gaugeUnits:"kmh",this.tickColMaj=this.tickColMaj?this.tickColMaj:"#C64DFF",this.tickColMin=this.tickColMin?this.tickColMin:"#999999",this.outerEdgeCol=this.outerEdgeCol?this.outerEdgeCol:"#f4f4f4",this.pivotCol=this.pivotCol?this.pivotCol:"#434a54",this.innerCol=this.innerCol?this.innerCol:"#ffffff",this.unitsLabelCol=this.unitsLabelCol?this.unitsLabelCol:"#C64DFF",this.tickLabelCol=this.tickLabelCol?this.tickLabelCol:"#656D78",this.needleCol=this.needleCol?this.needleCol:"#C64DFF",this.defaultFonts=this.defaultFonts?this.defaultFonts:""):"rpm"==this.theme&&(this.gaugeRadius=this.gaugeRadius?this.gaugeRadius:120,this.minValue=this.minValue?this.minValue:0,this.maxValue=this.maxValue?this.maxValue:1e3,this.needleVal=this.needleVal?Math.round(this.needleVal):0,this.tickSpaceMinVal=this.tickSpaceMinVal?this.tickSpaceMinVal:10,this.tickSpaceMajVal=this.tickSpaceMajVal?this.tickSpaceMajVal:100,this.gaugeUnits=this.gaugeUnits?this.gaugeUnits:"kmh",this.tickColMaj=this.tickColMaj?this.tickColMaj:"#0194D9",this.tickColMin=this.tickColMin?this.tickColMin:"#999999",this.outerEdgeCol=this.outerEdgeCol?this.outerEdgeCol:"#ffffff",this.pivotCol=this.pivotCol?this.pivotCol:"#434A54",this.innerCol=this.innerCol?this.innerCol:"#ffffff",this.unitsLabelCol=this.unitsLabelCol?this.unitsLabelCol:"#0194d9",this.tickLabelCol=this.tickLabelCol?this.tickLabelCol:"#656D78",this.needleCol=this.needleCol?this.needleCol:"#0194d9",this.defaultFonts=this.defaultFonts?this.defaultFonts:""),this.transport=this.transport?this.transport:"wss",this.msgTag=this.msgTag?this.msgTag:null,d(this.transport)};var d=function(d){"wss"==d?b.onReady.then(function(){b.subscribe(c.msgTag,c.consumeData.bind(c)),c.api&&b.call(c.api,c.apiParams,c.msgTag).then(function(a,b){c.consumeData(a)},function(a){console.log("reject published promise",a),c.consumeData()})}):"https"==d&&c.api&&a.get(c.api,c.apiParams).then(function(a,b){c.consumeData(a)},function(a){console.log("reject published promise",a)})};this.consumeData=function(a,b){"function"==typeof c.onFormatData()&&(a=c.onFormatData()(a)),a=parseInt(a),a="number"==typeof a&&"NaN"!=a.toString()?a:0,this.needleVal=Math.round(a)}}]}),angular.module("Chart",["angular.morris"]),angular.element(document).ready(function(){Morris.Donut.prototype.resizeHandler=function(){return this.timeoutId=null,this.el&&this.el.width()>0&&this.el.height()>0?(this.raphael.setSize(this.el.width(),this.el.height()),this.redraw()):null},Morris.Donut.prototype.setData=function(a){var b;return this.data=a,this.values=function(){var a,c,d,e;for(d=this.data,e=[],a=0,c=d.length;a<c;a++)b=d[a],e.push(parseFloat(b.value));return e}.call(this),this.el&&this.el.width()>0&&this.el.height()>0?this.redraw():null}}),angular.module("Chart").component("scriptrChart",{bindings:{onLoad:"&onLoad",resize:"<?",data:"<?",type:"@",xkey:"@",ykeys:"<?",stacked:"<?",labels:"<?",colors:"@",api:"@",transport:"@",msgTag:"@",apiParams:"<?",onFormatData:"&",lineWidth:"@",pointSize:"@",pointFillColors:"@",pointStrokeColors:"@",ymax:"@",ymin:"@",smooth:"@",hideHover:"@",parseTime:"@",units:"@",postUnits:"@",preUnits:"@",xlabels:"@",xlabelAngle:"<?",goals:"@",goalStrokeWidth:"@",goalLineColors:"@",events:"@",eventStrokeWidth:"@",eventLineColors:"@",continuousLine:"@",axes:"@",grid:"@",gridTextColor:"@",gridTextSize:"@",gridTextFamily:"@",gridTextWeight:"@",fillOpacity:"@",resize:"@",behaveLikeLine:"@",labelColor:"@",donutFormatter:"&",backgroundColor:"@",hoverCallback:"&?",dateFormat:"&?",xlabelFormat:"&?",ylabelFormat:"&?"},templateUrl:"/UIComponents/dashboard/frontend/components/chart/chart.html",controller:["httpClient","wsClient",function(a,b){var c=this;this.$onInit=function(){this.data=this.data?this.data:null,void 0===this.api&&void 0===this.msgTag&&(this.data&&0==this.data.length||null==this.data)&&(this.noResults=!0),this.colors=this.colors?this.colors:["#CC5464","#FCC717","#38B9D6","#1DBC68","#E90088"],this.stacked=!!this.stacked&&this.stacked,this.resize=!this.resize||this.resize,this.labelColor=this.labelColor?this.labelColor:"#FFF",this.backgroundColor=this.backgroundColor?this.backgroundColor:"#eee",this.transport=this.transport?this.transport:"wss",this.msgTag=this.msgTag?this.msgTag:null,console.log(this.type,this.xlabelAngle)},this.$postLink=function(){d(this.transport)};var d=function(d){"wss"==d?b.onReady.then(function(){b.subscribe(c.msgTag,c.consumeData.bind(c)),c.api&&b.call(c.api,c.apiParams,c.msgTag).then(function(a,b){c.consumeData(a)},function(a){console.log("reject published promise",a),c.consumeData()})}):"https"==d&&c.api&&a.get(c.api,c.apiParams).then(function(a,b){c.consumeData(a)},function(a){console.log("reject published promise",a),c.consumeData()})};this.consumeData=function(a,b){"function"==typeof c.onFormatData()&&(a=c.onFormatData()(a)),a&&a.length>0&&"object"==typeof a?(this.data=a,this.noResults=!1):(this.data=[],this.noResults=!0)}}]}),angular.module("Gauge",["frapontillo.gage"]),angular.module("Gauge").component("scriptrGauge",{bindings:{onLoad:"&onLoad",api:"@",transport:"@",msgTag:"@",apiParams:"<?",valueFontColor:"@",min:"@",max:"@",hideMinMax:"@",hideValue:"@",hideInnerShadow:"@",gaugeColor:"@",gaugeValue:"<?",customSectors:"<?",shadowSize:"@",shadowOpacity:"@",label:"@",labelFontColor:"@",startAnimationType:"@",refreshAnimationType:"@",title:"@",titleFontColor:"@",titleFontFamily:"@",titlePosition:"@",valueFontFamily:"@",relativeGaugeSize:"@",valueMinFontSize:"@",titleMinFontSize:"@",hideMinMax:"@",labelMinFontSize:"@",minLabelMinFontSize:"@",maxLabelMinFontSize:"@",gaugeWidthScale:"@",shadowVerticalOffset:"@",levelColors:"@",noGradient:"@",startAnimationTime:"@",refreshAnimationTime:"@",donut:"@",donutStartAngle:"@",reverse:"@",decimals:"@",symbol:"@",formatNumber:"@",humanFriendly:"@",humanFriendlyDecimal:"@",textRenderer:"&",onAnimationEnd:"&",pointer:"@",onFormatData:"&",heightUnit:"@",counter:"@",width:"@",height:"@"},templateUrl:"/UIComponents/dashboard/frontend/components/gauge/gauge.html",controller:["httpClient","wsClient",function(a,b){var c=this;this.$onInit=function(){this.gaugeValue=this.gaugeValue?this.gaugeValue:0,this.heightUnit=this.heightUnit?this.heightUnit:"px",this.customSectors=this.customSectors?this.customSectors:[{color:"#A3CD3B",lo:0,hi:25},{color:"#FF4A43",lo:25,hi:100}],this.valueFontColor=this.valueFontColor?this.valueFontColor:"#999",this.min=this.min?this.min:0,this.max=this.max?this.max:100,this.hideMinMax=!!this.hideMinMax&&this.hideMinMax,this.hideValue=!!this.hideValue&&this.hideValue,this.gaugeColor=this.gaugeColor?this.gaugeColor:"#e9e9e9",this.shadowSize=this.shadowSize?this.shadowSize:0,this.label=this.label?this.label:"% full",this.labelFontColor=this.labelFontColor?this.labelFontColor:"#666",this.startAnimationType=this.startAnimationType?this.startAnimationType:"linear",this.refreshAnimationType=this.refreshAnimationType?this.refreshAnimationType:"linear",this.counter=!this.counter||this.counter,this.transport=this.transport?this.transport:"wss",this.msgTag=this.msgTag?this.msgTag:null,this.width=this.width?this.width:50,this.height=this.height?this.height:300,d(this.transport)};var d=function(d){"wss"==d?b.onReady.then(function(){b.subscribe(c.msgTag,c.consumeData.bind(c)),c.api&&b.call(c.api,c.apiParams,c.msgTag).then(function(a,b){c.consumeData(a)},function(a){console.log("reject published promise",a),c.consumeData()})}):"https"==d&&c.api&&a.get(c.api,c.apiParams).then(function(a,b){c.consumeData(a)},function(a){console.log("reject published promise",a)})};this.consumeData=function(a,b){"function"==typeof this.onFormatData()&&(a=this.onFormatData()(a)),a=parseInt(a),a="number"==typeof a&&"NaN"!=a.toString()?a:0,this.gaugeValue=a}}]}),angular.module("SearchBox",["angularBootstrapNavTree"]).component("scriptrSearchbox",{bindings:{treeControl:"<?",treeData:"<?",searchText:"@",iconLeaf:"@",paramName:"@",iconExpand:"@",iconCollapse:"@",onSelect:"<?",expandLevel:"@",initialSelection:"@",apiParams:"<?",loadTree:"<?",treeSearchCriteria:"@",transport:"@",api:"@",onFormatData:"&"},templateUrl:"/UIComponents/dashboard/frontend/components/searchBox/searchBox.html",controller:["wsClient","httpClient",function(a,b){var c=this;this.iconExpand=this.iconExpand?this.iconExpand:null,this.$onInit=function(){this.iconLeaf=this.iconLeaf&&"$ctrl.iconLeaf"!=this.iconLeaf?this.iconLeaf:"icon-file  glyphicon glyphicon-file  fa fa-file",this.iconExpand=this.iconExpand&&"$ctrl.iconExpand"!=this.iconExpand?this.iconExpand:"icon-plus  glyphicon glyphicon-plus  fa fa-plus",this.iconCollapse=this.iconCollapse&&"$ctrl.iconCollapse"!=this.iconCollapse?this.iconCollapse:"icon-minus glyphicon glyphicon-minus fa fa-minus",this.paramName=this.paramName?this.paramName:"criteria",this.searchText=this.searchText?this.searchText:"Type to search",this.treeData=this.treeData?this.treeData:[],this.iconLeaf=this.iconLeaf?this.iconLeaf:null,this.transport=this.transport?this.transport:"wss",this.loadTree&&(this.searchValue=this.treeSearchCriteria,this.searching=!0,d(this.transport,this.searchValue))},this.onFilterChanged=function(){console.log("submit"),null!=this.searchValue&&""!=this.searchValue&&(this.searchValue=this.treeSearchCriteria,this.searching=!0,d(this.transport,this.searchValue))};var d=function(d,e){var f={};if(f[c.paramName]=e||c.treeSearchCriteria,c.apiParams)for(var g in c.apiParams)f[g]=c.apiParams[g];"wss"==d?a.onReady.then(function(){a.subscribe(c.msgTag,c.consumeData.bind(c)),c.api&&a.call(c.api,f,c.msgTag).then(function(a,b){c.consumeData(a)},function(a){console.log("reject published promise",a),c.consumeData()})}):"https"==d&&c.api&&b.get(c.api,f).then(function(a,b){c.consumeData(a)},function(a){c.consumeData(),console.log("reject published promise",a)})};this.consumeData=function(a,b){"function"==typeof c.onFormatData()&&(a=c.onFormatData()(a)),console.log("display tree"),"object"==typeof a&&a.length>0?(this.treeData=a,this.noResults=!1):(this.treeData=[],this.noResults=!0),this.searching=!1}}]}),function(a,b){"function"==typeof define&&define.amd?define([],b):"undefined"!=typeof module&&module.exports?module.exports=b():a.tv4=b()}(this,function(){function a(b,c){if(b===c)return!0;if("object"==typeof b&&"object"==typeof c){if(Array.isArray(b)!==Array.isArray(c))return!1;if(Array.isArray(b)){if(b.length!==c.length)return!1;for(var d=0;d<b.length;d++)if(!a(b[d],c[d]))return!1}else{var e;for(e in b)if(void 0===c[e]&&void 0!==b[e])return!1;for(e in c)if(void 0===b[e]&&void 0!==c[e])return!1;for(e in b)if(!a(b[e],c[e]))return!1}return!0}return!1}function b(a){var b=String(a).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return b?{href:b[0]||"",protocol:b[1]||"",authority:b[2]||"",host:b[3]||"",hostname:b[4]||"",port:b[5]||"",pathname:b[6]||"",search:b[7]||"",hash:b[8]||""}:null}function c(a,c){return c=b(c||""),a=b(a||""),c&&a?(c.protocol||a.protocol)+(c.protocol||c.authority?c.authority:a.authority)+function(a){var b=[];return a.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(a){"/.."===a?b.pop():b.push(a)}),b.join("").replace(/^\//,"/"===a.charAt(0)?"/":"")}(c.protocol||c.authority||"/"===c.pathname.charAt(0)?c.pathname:c.pathname?(a.authority&&!a.pathname?"/":"")+a.pathname.slice(0,a.pathname.lastIndexOf("/")+1)+c.pathname:a.pathname)+(c.protocol||c.authority||c.pathname?c.search:c.search||a.search)+c.hash:null}function d(a){return a.split("#")[0]}function e(a,b){if(a&&"object"==typeof a)if(void 0===b?b=a.id:"string"==typeof a.id&&(b=c(b,a.id),a.id=b),Array.isArray(a))for(var d=0;d<a.length;d++)e(a[d],b);else{"string"==typeof a.$ref&&(a.$ref=c(b,a.$ref));for(var f in a)"enum"!==f&&e(a[f],b)}}function f(a,b,c,d,e){if(Error.call(this),void 0===a)throw new Error("No code supplied for error: "+b);this.message=b,this.code=a,this.dataPath=c||"",this.schemaPath=d||"",this.subErrors=e||null;var f=new Error(this.message);if(this.stack=f.stack||f.stacktrace,!this.stack)try{throw f}catch(f){this.stack=f.stack||f.stacktrace}}function g(a,b){if(b.substring(0,a.length)===a){var c=b.substring(a.length);if(b.length>0&&"/"===b.charAt(a.length-1)||"#"===c.charAt(0)||"?"===c.charAt(0))return!0}return!1}function h(a){var b=new i,f=a||"en";return{addFormat:function(){b.addFormat.apply(b,arguments)},language:function(a){return a?(n[a]||(a=a.split("-")[0]),!!n[a]&&(f=a,a)):f},addLanguage:function(a,b){var c;for(c in j)b[c]&&!b[j[c]]&&(b[j[c]]=b[c]);var d=a.split("-")[0];if(n[d]){n[a]=Object.create(n[d]);for(c in b)void 0===n[d][c]&&(n[d][c]=b[c]),n[a][c]=b[c]}else n[a]=b,n[d]=b;return this},freshApi:function(a){var b=h();return a&&b.language(a),b},validate:function(a,c,d,e){var g=new i(b,!1,n[f],d,e);"string"==typeof c&&(c={$ref:c}),g.addSchema("",c);var h=g.validateAll(a,c,null,null,"");return!h&&e&&(h=g.banUnknownProperties()),this.error=h,this.missing=g.missing,this.valid=null===h,this.valid},validateResult:function(){var a={};return this.validate.apply(a,arguments),a},validateMultiple:function(a,c,d,e){var g=new i(b,!0,n[f],d,e);"string"==typeof c&&(c={$ref:c}),g.addSchema("",c),g.validateAll(a,c,null,null,""),e&&g.banUnknownProperties();var h={};return h.errors=g.errors,h.missing=g.missing,h.valid=0===h.errors.length,h},addSchema:function(){return b.addSchema.apply(b,arguments)},getSchema:function(){return b.getSchema.apply(b,arguments)},getSchemaMap:function(){return b.getSchemaMap.apply(b,arguments)},getSchemaUris:function(){return b.getSchemaUris.apply(b,arguments)},getMissingUris:function(){return b.getMissingUris.apply(b,arguments)},dropSchemas:function(){b.dropSchemas.apply(b,arguments)},defineKeyword:function(){b.defineKeyword.apply(b,arguments)},defineError:function(a,b,c){if("string"!=typeof a||!/^[A-Z]+(_[A-Z]+)*$/.test(a))throw new Error("Code name must be a string in UPPER_CASE_WITH_UNDERSCORES");if("number"!=typeof b||b%1!=0||b<1e4)throw new Error("Code number must be an integer > 10000");if(void 0!==j[a])throw new Error("Error already defined: "+a+" as "+j[a]);if(void 0!==k[b])throw new Error("Error code already used: "+k[b]+" as "+b);j[a]=b,k[b]=a,m[a]=m[b]=c;for(var d in n){var e=n[d];e[a]&&(e[b]=e[b]||e[a])}},reset:function(){b.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:e,resolveUrl:c,getDocumentUri:d,errorCodes:j}}Object.keys||(Object.keys=function(){var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.keys called on non-object");var f=[];for(var g in e)a.call(e,g)&&f.push(g);if(b)for(var h=0;h<d;h++)a.call(e,c[h])&&f.push(c[h]);return f}}()),Object.create||(Object.create=function(){function a(){}return function(b){if(1!==arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return a.prototype=b,new a}}()),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){if(null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>1&&(d=Number(arguments[1]),d!==d?d=0:0!==d&&d!==1/0&&d!==-1/0&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);e<c;e++)if(e in b&&b[e]===a)return e;return-1}),Object.isFrozen||(Object.isFrozen=function(a){for(var b="tv4_test_frozen_key";a.hasOwnProperty(b);)b+=Math.random();try{return a[b]=!0,delete a[b],!1}catch(a){return!0}});var i=function(a,b,c,d,e){if(this.missing=[],this.missingMap={},this.formatValidators=a?Object.create(a.formatValidators):{},this.schemas=a?Object.create(a.schemas):{},this.collectMultiple=b,this.errors=[],this.handleError=b?this.collectError:this.returnError,d&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey="tv4_validation_id",this.validationErrorsKey="tv4_validation_errors_id"),e&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorMessages=c,this.definedKeywords={},a)for(var f in a.definedKeywords)this.definedKeywords[f]=a.definedKeywords[f].slice(0)};i.prototype.defineKeyword=function(a,b){this.definedKeywords[a]=this.definedKeywords[a]||[],this.definedKeywords[a].push(b)},i.prototype.createError=function(a,b,c,d,e){var g=this.errorMessages[a]||m[a];return"string"!=typeof g?new f(a,"Unknown error code "+a+": "+JSON.stringify(b),c,d,e):new f(a,g.replace(/\{([^{}]*)\}/g,function(a,c){var d=b[c];return"string"==typeof d||"number"==typeof d?d:a}),c,d,e)},i.prototype.returnError=function(a){return a},i.prototype.collectError=function(a){return a&&this.errors.push(a),null},i.prototype.prefixErrors=function(a,b,c){for(var d=a;d<this.errors.length;d++)this.errors[d]=this.errors[d].prefixWith(b,c);return this},i.prototype.banUnknownProperties=function(){for(var a in this.unknownPropertyPaths){var b=this.createError(j.UNKNOWN_PROPERTY,{path:a},a,""),c=this.handleError(b);if(c)return c}return null},i.prototype.addFormat=function(a,b){if("object"==typeof a){for(var c in a)this.addFormat(c,a[c]);return this}this.formatValidators[a]=b},i.prototype.resolveRefs=function(a,b){if(void 0!==a.$ref){if(b=b||{},b[a.$ref])return this.createError(j.CIRCULAR_REFERENCE,{urls:Object.keys(b).join(", ")},"","");b[a.$ref]=!0,a=this.getSchema(a.$ref,b)}return a},i.prototype.getSchema=function(a,b){var c;if(void 0!==this.schemas[a])return c=this.schemas[a],this.resolveRefs(c,b);var d=a,e="";if(-1!==a.indexOf("#")&&(e=a.substring(a.indexOf("#")+1),d=a.substring(0,a.indexOf("#"))),"object"==typeof this.schemas[d]){c=this.schemas[d];var f=decodeURIComponent(e);if(""===f)return this.resolveRefs(c,b);if("/"!==f.charAt(0))return;for(var g=f.split("/").slice(1),h=0;h<g.length;h++){var i=g[h].replace(/~1/g,"/").replace(/~0/g,"~");if(void 0===c[i]){c=void 0;break}c=c[i]}if(void 0!==c)return this.resolveRefs(c,b)}void 0===this.missing[d]&&(this.missing.push(d),this.missing[d]=d,this.missingMap[d]=d)},i.prototype.searchSchemas=function(a,b){if(a&&"object"==typeof a){"string"==typeof a.id&&g(b,a.id)&&void 0===this.schemas[a.id]&&(this.schemas[a.id]=a);for(var c in a)if("enum"!==c)if("object"==typeof a[c])this.searchSchemas(a[c],b);else if("$ref"===c){var e=d(a[c]);e&&void 0===this.schemas[e]&&void 0===this.missingMap[e]&&(this.missingMap[e]=e)}}},i.prototype.addSchema=function(a,b){if("string"!=typeof a||void 0===b){if("object"!=typeof a||"string"!=typeof a.id)return;b=a,a=b.id}(a=d(a)+"#")&&(a=d(a)),this.schemas[a]=b,delete this.missingMap[a],e(b,a),this.searchSchemas(b,a)},i.prototype.getSchemaMap=function(){var a={};for(var b in this.schemas)a[b]=this.schemas[b];return a},i.prototype.getSchemaUris=function(a){var b=[];for(var c in this.schemas)a&&!a.test(c)||b.push(c);return b},i.prototype.getMissingUris=function(a){var b=[];for(var c in this.missingMap)a&&!a.test(c)||b.push(c);return b},i.prototype.dropSchemas=function(){this.schemas={},this.reset()},i.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},i.prototype.validateAll=function(a,b,c,d,e){
var g;if(!(b=this.resolveRefs(b)))return null;if(b instanceof f)return this.errors.push(b),b;var h,i=this.errors.length,j=null,k=null;if(this.checkRecursive&&a&&"object"==typeof a){if(g=!this.scanned.length,a[this.validatedSchemasKey]){var l=a[this.validatedSchemasKey].indexOf(b);if(-1!==l)return this.errors=this.errors.concat(a[this.validationErrorsKey][l]),null}if(Object.isFrozen(a)&&-1!==(h=this.scannedFrozen.indexOf(a))){var m=this.scannedFrozenSchemas[h].indexOf(b);if(-1!==m)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[h][m]),null}if(this.scanned.push(a),Object.isFrozen(a))-1===h&&(h=this.scannedFrozen.length,this.scannedFrozen.push(a),this.scannedFrozenSchemas.push([])),j=this.scannedFrozenSchemas[h].length,this.scannedFrozenSchemas[h][j]=b,this.scannedFrozenValidationErrors[h][j]=[];else{if(!a[this.validatedSchemasKey])try{Object.defineProperty(a,this.validatedSchemasKey,{value:[],configurable:!0}),Object.defineProperty(a,this.validationErrorsKey,{value:[],configurable:!0})}catch(b){a[this.validatedSchemasKey]=[],a[this.validationErrorsKey]=[]}k=a[this.validatedSchemasKey].length,a[this.validatedSchemasKey][k]=b,a[this.validationErrorsKey][k]=[]}}var n=this.errors.length,o=this.validateBasic(a,b,e)||this.validateNumeric(a,b,e)||this.validateString(a,b,e)||this.validateArray(a,b,e)||this.validateObject(a,b,e)||this.validateCombinations(a,b,e)||this.validateFormat(a,b,e)||this.validateDefinedKeywords(a,b,e)||null;if(g){for(;this.scanned.length;){delete this.scanned.pop()[this.validatedSchemasKey]}this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(o||n!==this.errors.length)for(;c&&c.length||d&&d.length;){var p=c&&c.length?""+c.pop():null,q=d&&d.length?""+d.pop():null;o&&(o=o.prefixWith(p,q)),this.prefixErrors(n,p,q)}return null!==j?this.scannedFrozenValidationErrors[h][j]=this.errors.slice(i):null!==k&&(a[this.validationErrorsKey][k]=this.errors.slice(i)),this.handleError(o)},i.prototype.validateFormat=function(a,b){if("string"!=typeof b.format||!this.formatValidators[b.format])return null;var c=this.formatValidators[b.format].call(null,a,b);return"string"==typeof c||"number"==typeof c?this.createError(j.FORMAT_CUSTOM,{message:c}).prefixWith(null,"format"):c&&"object"==typeof c?this.createError(j.FORMAT_CUSTOM,{message:c.message||"?"},c.dataPath||null,c.schemaPath||"/format"):null},i.prototype.validateDefinedKeywords=function(a,b){for(var c in this.definedKeywords)for(var d=this.definedKeywords[c],e=0;e<d.length;e++){var f=d[e],g=f(a,b[c],b);if("string"==typeof g||"number"==typeof g)return this.createError(j.KEYWORD_CUSTOM,{key:c,message:g}).prefixWith(null,"format");if(g&&"object"==typeof g){var h=g.code||j.KEYWORD_CUSTOM;if("string"==typeof h){if(!j[h])throw new Error("Undefined error code (use defineError): "+h);h=j[h]}var i="object"==typeof g.message?g.message:{key:c,message:g.message||"?"},k=g.schemaPath||"/"+c.replace(/~/g,"~0").replace(/\//g,"~1");return this.createError(h,i,g.dataPath||null,k)}}return null},i.prototype.validateBasic=function(a,b,c){var d;return(d=this.validateType(a,b,c))?d.prefixWith(null,"type"):(d=this.validateEnum(a,b,c))?d.prefixWith(null,"type"):null},i.prototype.validateType=function(a,b){if(void 0===b.type)return null;var c=typeof a;null===a?c="null":Array.isArray(a)&&(c="array");var d=b.type;"object"!=typeof d&&(d=[d]);for(var e=0;e<d.length;e++){var f=d[e];if(f===c||"integer"===f&&"number"===c&&a%1==0)return null}return this.createError(j.INVALID_TYPE,{type:c,expected:d.join("/")})},i.prototype.validateEnum=function(b,c){if(void 0===c.enum)return null;for(var d=0;d<c.enum.length;d++){if(a(b,c.enum[d]))return null}return this.createError(j.ENUM_MISMATCH,{value:"undefined"!=typeof JSON?JSON.stringify(b):b})},i.prototype.validateNumeric=function(a,b,c){return this.validateMultipleOf(a,b,c)||this.validateMinMax(a,b,c)||null},i.prototype.validateMultipleOf=function(a,b){var c=b.multipleOf||b.divisibleBy;return void 0===c?null:"number"==typeof a&&a%c!=0?this.createError(j.NUMBER_MULTIPLE_OF,{value:a,multipleOf:c}):null},i.prototype.validateMinMax=function(a,b){if("number"!=typeof a)return null;if(void 0!==b.minimum){if(a<b.minimum)return this.createError(j.NUMBER_MINIMUM,{value:a,minimum:b.minimum}).prefixWith(null,"minimum");if(b.exclusiveMinimum&&a===b.minimum)return this.createError(j.NUMBER_MINIMUM_EXCLUSIVE,{value:a,minimum:b.minimum}).prefixWith(null,"exclusiveMinimum")}if(void 0!==b.maximum){if(a>b.maximum)return this.createError(j.NUMBER_MAXIMUM,{value:a,maximum:b.maximum}).prefixWith(null,"maximum");if(b.exclusiveMaximum&&a===b.maximum)return this.createError(j.NUMBER_MAXIMUM_EXCLUSIVE,{value:a,maximum:b.maximum}).prefixWith(null,"exclusiveMaximum")}return null},i.prototype.validateString=function(a,b,c){return this.validateStringLength(a,b,c)||this.validateStringPattern(a,b,c)||null},i.prototype.validateStringLength=function(a,b){return"string"!=typeof a?null:void 0!==b.minLength&&a.length<b.minLength?this.createError(j.STRING_LENGTH_SHORT,{length:a.length,minimum:b.minLength}).prefixWith(null,"minLength"):void 0!==b.maxLength&&a.length>b.maxLength?this.createError(j.STRING_LENGTH_LONG,{length:a.length,maximum:b.maxLength}).prefixWith(null,"maxLength"):null},i.prototype.validateStringPattern=function(a,b){return"string"!=typeof a||void 0===b.pattern?null:new RegExp(b.pattern).test(a)?null:this.createError(j.STRING_PATTERN,{pattern:b.pattern}).prefixWith(null,"pattern")},i.prototype.validateArray=function(a,b,c){return Array.isArray(a)?this.validateArrayLength(a,b,c)||this.validateArrayUniqueItems(a,b,c)||this.validateArrayItems(a,b,c)||null:null},i.prototype.validateArrayLength=function(a,b){var c;return void 0!==b.minItems&&a.length<b.minItems&&(c=this.createError(j.ARRAY_LENGTH_SHORT,{length:a.length,minimum:b.minItems}).prefixWith(null,"minItems"),this.handleError(c))?c:void 0!==b.maxItems&&a.length>b.maxItems&&(c=this.createError(j.ARRAY_LENGTH_LONG,{length:a.length,maximum:b.maxItems}).prefixWith(null,"maxItems"),this.handleError(c))?c:null},i.prototype.validateArrayUniqueItems=function(b,c){if(c.uniqueItems)for(var d=0;d<b.length;d++)for(var e=d+1;e<b.length;e++)if(a(b[d],b[e])){var f=this.createError(j.ARRAY_UNIQUE,{match1:d,match2:e}).prefixWith(null,"uniqueItems");if(this.handleError(f))return f}return null},i.prototype.validateArrayItems=function(a,b,c){if(void 0===b.items)return null;var d,e;if(Array.isArray(b.items)){for(e=0;e<a.length;e++)if(e<b.items.length){if(d=this.validateAll(a[e],b.items[e],[e],["items",e],c+"/"+e))return d}else if(void 0!==b.additionalItems)if("boolean"==typeof b.additionalItems){if(!b.additionalItems&&(d=this.createError(j.ARRAY_ADDITIONAL_ITEMS,{}).prefixWith(""+e,"additionalItems"),this.handleError(d)))return d}else if(d=this.validateAll(a[e],b.additionalItems,[e],["additionalItems"],c+"/"+e))return d}else for(e=0;e<a.length;e++)if(d=this.validateAll(a[e],b.items,[e],["items"],c+"/"+e))return d;return null},i.prototype.validateObject=function(a,b,c){return"object"!=typeof a||null===a||Array.isArray(a)?null:this.validateObjectMinMaxProperties(a,b,c)||this.validateObjectRequiredProperties(a,b,c)||this.validateObjectProperties(a,b,c)||this.validateObjectDependencies(a,b,c)||null},i.prototype.validateObjectMinMaxProperties=function(a,b){var c,d=Object.keys(a);return void 0!==b.minProperties&&d.length<b.minProperties&&(c=this.createError(j.OBJECT_PROPERTIES_MINIMUM,{propertyCount:d.length,minimum:b.minProperties}).prefixWith(null,"minProperties"),this.handleError(c))?c:void 0!==b.maxProperties&&d.length>b.maxProperties&&(c=this.createError(j.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:d.length,maximum:b.maxProperties}).prefixWith(null,"maxProperties"),this.handleError(c))?c:null},i.prototype.validateObjectRequiredProperties=function(a,b){if(void 0!==b.required)for(var c=0;c<b.required.length;c++){var d=b.required[c];if(void 0===a[d]){var e=this.createError(j.OBJECT_REQUIRED,{key:d}).prefixWith(null,""+c).prefixWith(null,"required");if(this.handleError(e))return e}}return null},i.prototype.validateObjectProperties=function(a,b,c){var d;for(var e in a){var f=c+"/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),g=!1;if(void 0!==b.properties&&void 0!==b.properties[e]&&(g=!0,d=this.validateAll(a[e],b.properties[e],[e],["properties",e],f)))return d;if(void 0!==b.patternProperties)for(var h in b.patternProperties){var i=new RegExp(h);if(i.test(e)&&(g=!0,d=this.validateAll(a[e],b.patternProperties[h],[e],["patternProperties",h],f)))return d}if(g)this.trackUnknownProperties&&(this.knownPropertyPaths[f]=!0,delete this.unknownPropertyPaths[f]);else if(void 0!==b.additionalProperties){if(this.trackUnknownProperties&&(this.knownPropertyPaths[f]=!0,delete this.unknownPropertyPaths[f]),"boolean"==typeof b.additionalProperties){if(!b.additionalProperties&&(d=this.createError(j.OBJECT_ADDITIONAL_PROPERTIES,{}).prefixWith(e,"additionalProperties"),this.handleError(d)))return d}else if(d=this.validateAll(a[e],b.additionalProperties,[e],["additionalProperties"],f))return d}else this.trackUnknownProperties&&!this.knownPropertyPaths[f]&&(this.unknownPropertyPaths[f]=!0)}return null},i.prototype.validateObjectDependencies=function(a,b,c){var d;if(void 0!==b.dependencies)for(var e in b.dependencies)if(void 0!==a[e]){var f=b.dependencies[e];if("string"==typeof f){if(void 0===a[f]&&(d=this.createError(j.OBJECT_DEPENDENCY_KEY,{key:e,missing:f}).prefixWith(null,e).prefixWith(null,"dependencies"),this.handleError(d)))return d}else if(Array.isArray(f))for(var g=0;g<f.length;g++){var h=f[g];if(void 0===a[h]&&(d=this.createError(j.OBJECT_DEPENDENCY_KEY,{key:e,missing:h}).prefixWith(null,""+g).prefixWith(null,e).prefixWith(null,"dependencies"),this.handleError(d)))return d}else if(d=this.validateAll(a,f,[],["dependencies",e],c))return d}return null},i.prototype.validateCombinations=function(a,b,c){return this.validateAllOf(a,b,c)||this.validateAnyOf(a,b,c)||this.validateOneOf(a,b,c)||this.validateNot(a,b,c)||null},i.prototype.validateAllOf=function(a,b,c){if(void 0===b.allOf)return null;for(var d,e=0;e<b.allOf.length;e++){var f=b.allOf[e];if(d=this.validateAll(a,f,[],["allOf",e],c))return d}return null},i.prototype.validateAnyOf=function(a,b,c){if(void 0===b.anyOf)return null;var d,e,f=[],g=this.errors.length;this.trackUnknownProperties&&(d=this.unknownPropertyPaths,e=this.knownPropertyPaths);for(var h=!0,i=0;i<b.anyOf.length;i++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var k=b.anyOf[i],l=this.errors.length,m=this.validateAll(a,k,[],["anyOf",i],c);if(null===m&&l===this.errors.length){if(this.errors=this.errors.slice(0,g),this.trackUnknownProperties){for(var n in this.knownPropertyPaths)e[n]=!0,delete d[n];for(var o in this.unknownPropertyPaths)e[o]||(d[o]=!0);h=!1;continue}return null}m&&f.push(m.prefixWith(null,""+i).prefixWith(null,"anyOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=d,this.knownPropertyPaths=e),h?(f=f.concat(this.errors.slice(g)),this.errors=this.errors.slice(0,g),this.createError(j.ANY_OF_MISSING,{},"","/anyOf",f)):void 0},i.prototype.validateOneOf=function(a,b,c){if(void 0===b.oneOf)return null;var d,e,f=null,g=[],h=this.errors.length;this.trackUnknownProperties&&(d=this.unknownPropertyPaths,e=this.knownPropertyPaths);for(var i=0;i<b.oneOf.length;i++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var k=b.oneOf[i],l=this.errors.length,m=this.validateAll(a,k,[],["oneOf",i],c);if(null===m&&l===this.errors.length){if(null!==f)return this.errors=this.errors.slice(0,h),this.createError(j.ONE_OF_MULTIPLE,{index1:f,index2:i},"","/oneOf");if(f=i,this.trackUnknownProperties){for(var n in this.knownPropertyPaths)e[n]=!0,delete d[n];for(var o in this.unknownPropertyPaths)e[o]||(d[o]=!0)}}else m&&g.push(m.prefixWith(null,""+i).prefixWith(null,"oneOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=d,this.knownPropertyPaths=e),null===f?(g=g.concat(this.errors.slice(h)),this.errors=this.errors.slice(0,h),this.createError(j.ONE_OF_MISSING,{},"","/oneOf",g)):(this.errors=this.errors.slice(0,h),null)},i.prototype.validateNot=function(a,b,c){if(void 0===b.not)return null;var d,e,f=this.errors.length;this.trackUnknownProperties&&(d=this.unknownPropertyPaths,e=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var g=this.validateAll(a,b.not,null,null,c),h=this.errors.slice(f);return this.errors=this.errors.slice(0,f),this.trackUnknownProperties&&(this.unknownPropertyPaths=d,this.knownPropertyPaths=e),null===g&&0===h.length?this.createError(j.NOT_PASSED,{},"","/not"):null};var j={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3},k={};for(var l in j)k[j[l]]=l;var m={INVALID_TYPE:"invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"String does not match pattern: {pattern}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"Missing required property: {key}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",KEYWORD_CUSTOM:"Keyword failed: {key} ({message})",CIRCULAR_REFERENCE:"Circular $refs: {urls}",UNKNOWN_PROPERTY:"Unknown property (not in schema)"};f.prototype=Object.create(Error.prototype),f.prototype.constructor=f,f.prototype.name="ValidationError",f.prototype.prefixWith=function(a,b){if(null!==a&&(a=a.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+a+this.dataPath),null!==b&&(b=b.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+b+this.schemaPath),null!==this.subErrors)for(var c=0;c<this.subErrors.length;c++)this.subErrors[c].prefixWith(a,b);return this};var n={},o=h();return o.addLanguage("en-gb",m),o.tv4=o,o}),function(a){var b={parse:function(a){if("string"!=typeof a)throw new TypeError("ObjectPath.parse must be passed a string");for(var b,c,d,e,f=0,g=[];f<a.length;)if(b=a.indexOf(".",f),c=a.indexOf("[",f),-1===b&&-1===c)g.push(a.slice(f,a.length)),f=a.length;else if(-1===c||-1!==b&&b<c)g.push(a.slice(f,b)),f=b+1;else if(c>f&&(g.push(a.slice(f,c)),f=c),'"'!==(d=a.slice(c+1,c+2))&&"'"!==d)e=a.indexOf("]",c),-1===e&&(e=a.length),g.push(a.slice(f+1,e)),f="."===a.slice(e+1,e+2)?e+2:e+1;else{for(e=a.indexOf(d+"]",c),-1===e&&(e=a.length);"\\"===a.slice(e-1,e)&&c<a.length;)c++,e=a.indexOf(d+"]",c);g.push(a.slice(f+2,e).replace(new RegExp("\\"+d,"g"),d)),f="."===a.slice(e+2,e+3)?e+3:e+2}return g},stringify:function(a,b){return Array.isArray(a)||(a=[a.toString()]),b='"'===b?'"':"'",a.map(function(a){return"["+b+a.toString().replace(new RegExp(b,"g"),"\\"+b)+b+"]"}).join("")},normalize:function(a,c){return b.stringify(Array.isArray(a)?a:b.parse(a),c)},registerModule:function(a){a.module("ObjectPath",[]).provider("ObjectPath",function(){this.parse=b.parse,this.stringify=b.stringify,this.normalize=b.normalize,this.$get=function(){return b}})}};"function"==typeof define&&define.amd?define(function(){return b}):"object"==typeof exports?exports.ObjectPath=b:window.ObjectPath=b}(),function(a,b){"function"==typeof define&&define.amd?define(["angular","objectpath","tv4"],b):"object"==typeof exports?module.exports=b(require("angular"),require("objectpath"),require("tv4")):a.schemaForm=b(a.angular,a.objectpath,a.tv4)}(this,function(a,b,c){var d=[];try{a.module("ngSanitize"),d.push("ngSanitize")}catch(a){}try{a.module("ui.sortable"),d.push("ui.sortable")}catch(a){}try{a.module("angularSpectrumColorpicker"),d.push("angularSpectrumColorpicker")}catch(a){}var e=a.module("schemaForm",d);return a.module("schemaForm").provider("sfPath",[function(){var c=window.ObjectPath||b,d={parse:c.parse};1===a.version.major&&a.version.minor<3?d.stringify=function(a){return Array.isArray(a)?a.join("."):a.toString()}:d.stringify=c.stringify,d.normalize=function(a,b){return d.stringify(Array.isArray(a)?a:d.parse(a),b)},this.parse=d.parse,this.stringify=d.stringify,this.normalize=d.normalize,this.$get=function(){return d}}]),a.module("schemaForm").provider("sfBuilder",["sfPathProvider",function(b){var c=function(a,b){return b=b||"_",a.replace(/[A-Z]/g,function(a,c){return(c?b:"")+a.toLowerCase()})},d=0,e={sfField:function(a){a.fieldFrag.firstChild.setAttribute("sf-field",d),a.lookup["f"+d]=a.form,d++},ngModel:function(a){if(a.form.key){var c=a.form.key;a.state.keyRedaction&&(c=c.slice(a.state.keyRedaction));var d;if(a.state.modelValue)d=a.state.modelValue;else{var e=b.stringify(c).replace(/"/g,"&quot;");d=a.state.modelName||"model",e&&(d+=("["!==e[0]?".":"")+e)}for(var f=a.fieldFrag.querySelectorAll("[sf-field-model]"),g=0;g<f.length;g++){var h=f[g],i=h.getAttribute("sf-field-model");if(i&&""!==i)if("replaceAll"===i)for(var j=h.attributes,k=0;k<j.length;k++)j[k].value&&-1!==j[k].value.indexOf("$$value")&&(j[k].value=j[k].value.replace(/\$\$value\$\$/g,d));else{var l=h.getAttribute(i);l&&l.indexOf("$$value$$")?h.setAttribute(i,l.replace(/\$\$value\$\$/g,d)):h.setAttribute(i,d)}else h.setAttribute("ng-model",d)}}},simpleTransclusion:function(a){var b=a.build(a.form.items,a.path+".items",a.state);a.fieldFrag.firstChild.appendChild(b)},ngModelOptions:function(a){a.form.ngModelOptions&&Object.keys(a.form.ngModelOptions).length>0&&a.fieldFrag.firstChild.setAttribute("ng-model-options",JSON.stringify(a.form.ngModelOptions))},transclusion:function(a){var b=a.fieldFrag.querySelectorAll("[sf-field-transclude]");if(b.length)for(var c=0;c<b.length;c++){var d=b[c],e=d.getAttribute("sf-field-transclude")||"items",f=a.form[e];if(f){var g=a.build(f,a.path+"."+e,a.state);d.appendChild(g)}}},condition:function(a){if(a.form.condition){var c="evalExpr("+a.path+'.condition, { model: model, "arrayIndex": $index})';if(a.form.key){var d=b.stringify(a.form.key);c="evalExpr("+a.path+'.condition,{ model: model, "arrayIndex": $index, "modelValue": model'+("["===d[0]?"":".")+d+"})"}for(var e=a.fieldFrag.children||a.fieldFrag.childNodes,f=0;f<e.length;f++){var g=e[f],h=g.getAttribute("ng-if");g.setAttribute("ng-if",h?"("+h+") || ("+c+")":c)}}},array:function(c){var d=c.fieldFrag.querySelector("[schema-form-array-items]");if(d){if(state=a.copy(c.state),state.keyRedaction=state.keyRedaction||0,state.keyRedaction+=c.form.key.length+1,c.form.schema&&c.form.schema.items&&c.form.schema.items.type&&-1===c.form.schema.items.type.indexOf("object")&&-1===c.form.schema.items.type.indexOf("array")){b.stringify(c.form.key).replace(/"/g,"&quot;");state.modelValue="modelArray[$index]"}else state.modelName="item";state.arrayCompatFlag=!0;var e=c.build(c.form.items,c.path+".items",state);d.appendChild(e)}}};this.builders=e;var f=[e.sfField,e.ngModel,e.ngModelOptions,e.condition];this.stdBuilders=f,this.$get=["$templateCache","schemaFormDecorators","sfPath",function(a,b,d){var g=function(a,b){if(a.key){var c=b[d.stringify(a.key)];if(c){for(;c.firstChild;)c.removeChild(c.firstChild);return c}}},h=function(a,b,d,e,f,i,j){i=i||{},j=j||Object.create(null),f=f||"schemaForm.form";var k=document.createDocumentFragment();return a.reduce(function(a,k,l){if(!k.type)return a;var m=b[k.type]||b.default;if(m.replace){var n;i.arrayCompatFlag=!1;var o=document.createElement("div"),p=d(k,m)||d(k,b.default);for(o.innerHTML=p,n=document.createDocumentFragment();o.childNodes.length>0;)n.appendChild(o.childNodes[0]);var q={fieldFrag:n,form:k,lookup:j,state:i,path:f+"["+l+"]",build:function(a,c,f){return h(a,b,d,e,c,f,j)}},r=k.builder||m.builder;"function"==typeof r?r(q):r.forEach(function(a){a(q)}),(g(k,e)||a).appendChild(n)}else{var s=document.createElement(c(b.__name,"-"));i.arrayCompatFlag?s.setAttribute("form","copyWithIndex($index)"):s.setAttribute("form",f+"["+l+"]"),(g(k,e)||a).appendChild(s)}return a},k),k};return{build:function(b,c,d,e){return h(b,c,function(b,c){return"template"===b.type?b.template:a.get(c.template)},d,void 0,void 0,e)},builder:e,stdBuilders:f,internalBuild:h}}]}]),a.module("schemaForm").provider("schemaFormDecorators",["$compileProvider","sfPathProvider",function(b,c){var d="",e={},f=function(a,b){"sfDecorator"===a&&(a=d);var c=e[a];return c[b.type]?c[b.type].template:c.default.template},g=function(d){b.directive(d,["$parse","$compile","$http","$templateCache","$interpolate","$q","sfErrorMessage","sfPath","sfSelect",function(b,e,g,h,i,j,k,l,m){return{restrict:"AE",replace:!1,transclude:!1,scope:!0,require:"?^sfSchema",link:function(b,n,o,p){b.$on("schemaFormPropagateNgModelController",function(a,c){a.stopPropagation(),a.preventDefault(),b.ngModel=c}),b.showTitle=function(){return b.form&&!0!==b.form.notitle&&b.form.title},b.listToCheckboxValues=function(b){var c={};return a.forEach(b,function(a){c[a]=!0}),c},b.checkboxValuesToList=function(b){var c=[];return a.forEach(b,function(a,b){a&&c.push(b)}),c},b.buttonClick=function(c,d){a.isFunction(d.onClick)?d.onClick(c,d):a.isString(d.onClick)&&(p?p.evalInParentScope(d.onClick,{$event:c,form:d}):b.$eval(d.onClick,{$event:c,form:d}))},b.evalExpr=function(a,c){return p?p.evalInParentScope(a,c):b.$eval(a,c)},b.evalInScope=function(a,c){if(a)return b.$eval(a,c)},b.interp=function(a,b){return a&&i(a)(b)},b.hasSuccess=function(){return!!b.ngModel&&(b.ngModel.$valid&&(!b.ngModel.$pristine||!b.ngModel.$isEmpty(b.ngModel.$modelValue)))},b.hasError=function(){return!!b.ngModel&&(b.ngModel.$invalid&&!b.ngModel.$pristine)},b.errorMessage=function(a){return k.interpolate(a&&a.code+""||"default",b.ngModel&&b.ngModel.$modelValue||"",b.ngModel&&b.ngModel.$viewValue||"",b.form,b.options&&b.options.validationMessage)};var q=b.$watch(o.form,function(i){if(i){i.ngModelOptions=i.ngModelOptions||{},b.form=i;var k;if("template"===i.type&&i.template)k=j.when(i.template);else{var o="template"===i.type?i.templateUrl:f(d,i);k=g.get(o,{cache:h}).then(function(a){return a.data})}k.then(function(d){if(i.key){var f=i.key?c.stringify(i.key).replace(/"/g,"&quot;"):"";d=d.replace(/\$\$value\$\$/g,"model"+("["!==f[0]?".":"")+f)}if(n.html(d),i.condition){var g='evalExpr(form.condition,{ model: model, "arrayIndex": arrayIndex})';i.key&&(g='evalExpr(form.condition,{ model: model, "arrayIndex": arrayIndex, "modelValue": model'+l.stringify(i.key)+"})"),a.forEach(n.children(),function(a){var b=a.getAttribute("ng-if");a.setAttribute("ng-if",b?"("+b+") || ("+g+")":g)})}e(n.contents())(b)}),i.key&&(b.$on("schemaForm.error."+i.key.join("."),function(a,c,d,e){!0!==d&&!1!==d||(e=d,d=void 0),b.ngModel&&c&&(b.ngModel.$setDirty?b.ngModel.$setDirty():(b.ngModel.$dirty=!0,b.ngModel.$pristine=!1),d&&(i.validationMessage||(i.validationMessage={}),i.validationMessage[c]=d),b.ngModel.$setValidity(c,!0===e),!0===e&&(b.ngModel.$validate(),b.$broadcast("schemaFormValidate")))}),b.$on("$destroy",function(){if(!b.externalDestructionInProgress){var a=i.destroyStrategy||b.options&&b.options.destroyStrategy||"remove";if(i.key&&"retain"!==a){var c=b.model;if(i.key.length>1&&(c=m(i.key.slice(0,i.key.length-1),c)),void 0===c)return;var d=i.schema&&i.schema.type||"";"empty"===a&&-1!==d.indexOf("string")?c[i.key.slice(-1)]="":"empty"===a&&-1!==d.indexOf("object")?c[i.key.slice(-1)]={}:"empty"===a&&-1!==d.indexOf("array")?c[i.key.slice(-1)]=[]:"null"===a?c[i.key.slice(-1)]=null:delete c[i.key.slice(-1)]}}})),q()}})}}}])},h=function(c,d,e){e=!!a.isDefined(e)&&e,b.directive("sf"+a.uppercase(c[0])+c.substr(1),function(){return{restrict:"EAC",scope:!0,replace:!0,transclude:e,template:'<sf-decorator form="form"></sf-decorator>',link:function(b,d,e){var f={items:"c",titleMap:"c",schema:"c"},g={type:c},h=!0;a.forEach(e,function(c,d){if("$"!==d[0]&&0!==d.indexOf("ng")&&"sfField"!==d){var i=function(c){a.isDefined(c)&&c!==g[d]&&(g[d]=c,h&&g.type&&(g.key||a.isUndefined(e.key))&&(b.form=g,h=!1))};"model"===d?b.$watch(c,function(a){a&&b.model!==a&&(b.model=a)}):"c"===f[d]?b.$watchCollection(c,i):e.$observe(d,i)}})}}})};this.createDecorator=function(b,c){e[b]={__name:b},a.forEach(c,function(a,c){e[b][c]={template:a,replace:!1,builder:[]}}),e[d]||(d=b),g(b)},this.defineDecorator=function(b,c){e[b]={__name:b},a.forEach(c,function(c,d){c.builder=c.builder||[],c.replace=!a.isDefined(c.replace)||c.replace,e[b][d]=c}),e[d]||(d=b),g(b)},this.createDirective=h,this.createDirectives=function(b){a.forEach(b,function(a,b){h(b)})},this.decorator=function(a){return a=a||d,e[a]},this.addMapping=function(a,b,c,d,f){e[a]&&(e[a][b]={template:c,builder:d,replace:!!f})},this.defineAddOn=function(a,b,c,d){e[a]&&(e[a][b]={template:c,builder:d,replace:!0})},this.$get=function(){return{decorator:function(a){return e[a]||e[d]},defaultDecorator:d}},g("sfDecorator")}]),a.module("schemaForm").provider("sfErrorMessage",function(){var b={default:"Field does not validate",0:"Invalid type, expected {{schema.type}}",1:"No enum match for: {{viewValue}}",10:'Data does not match any schemas from "anyOf"',11:'Data does not match any schemas from "oneOf"',12:'Data is valid against more than one schema from "oneOf"',13:'Data matches schema from "not"',100:"Value is not a multiple of {{schema.multipleOf}}",101:"{{viewValue}} is less than the allowed minimum of {{schema.minimum}}",102:"{{viewValue}} is equal to the exclusive minimum {{schema.minimum}}",103:"{{viewValue}} is greater than the allowed maximum of {{schema.maximum}}",104:"{{viewValue}} is equal to the exclusive maximum {{schema.maximum}}",105:"Value is not a valid number",200:"String is too short ({{viewValue.length}} chars), minimum {{schema.minLength}}",201:"String is too long ({{viewValue.length}} chars), maximum {{schema.maxLength}}",202:"String does not match pattern: {{schema.pattern}}",300:"Too few properties defined, minimum {{schema.minProperties}}",301:"Too many properties defined, maximum {{schema.maxProperties}}",302:"Required",303:"Additional properties not allowed",304:"Dependency failed - key must exist",400:"Array is too short ({{value.length}}), minimum {{schema.minItems}}",401:"Array is too long ({{value.length}}), maximum {{schema.maxItems}}",402:"Array items are not unique",403:"Additional items not allowed",500:"Format validation failed",501:'Keyword failed: "{{title}}"',600:"Circular $refs",1e3:"Unknown property (not in schema)"};b.number=b[105],b.required=b[302],b.min=b[101],b.max=b[103],b.maxlength=b[201],b.minlength=b[200],b.pattern=b[202],this.setDefaultMessages=function(a){b=a},this.getDefaultMessages=function(){return b},this.setDefaultMessage=function(a,c){b[a]=c},this.$get=["$interpolate",function(c){var d={};return d.defaultMessages=b,d.interpolate=function(d,e,f,g,h){h=h||{};var i=g.validationMessage||{};0===d.indexOf("tv4-")&&(d=d.substring(4));var j=i.default||h.default||"";[i,h,b].some(function(b){return a.isString(b)||a.isFunction(b)?(j=b,!0):b&&b[d]?(j=b[d],!0):void 0});var k={error:d,value:e,viewValue:f,form:g,schema:g.schema,title:g.title||g.schema&&g.schema.title};return a.isFunction(j)?j(k):c(j)(k)},d}]}),a.module("schemaForm").provider("schemaForm",["sfPathProvider",function(b){var c=function(a){if(Array.isArray(a)&&2==a.length){if("null"===a[0])return a[1];if("null"===a[1])return a[0]}return a},d=function(a){var b=[];return a.forEach(function(a){b.push({name:a,value:a})}),b},e=function(b,c){if(!a.isArray(b)){var d=[];return c?a.forEach(c,function(a,c){d.push({name:b[a],value:a})}):a.forEach(b,function(a,b){d.push({name:a,value:b})}),d}return b},f=function(b,d,e){var f=p[c(d.type)];if(f)for(var g,h=0;h<f.length;h++)if(g=f[h](b,d,e))return g.schema["x-schema-form"]&&a.isObject(g.schema["x-schema-form"])&&(g=a.extend(g,g.schema["x-schema-form"])),g},g=function(b,c,d){d=d||{};var f=d.global&&d.global.formDefaults?a.copy(d.global.formDefaults):{};return d.global&&!0===d.global.supressPropertyTitles?f.title=c.title:f.title=c.title||b,c.description&&(f.description=c.description),!0!==d.required&&!0!==c.required||(f.required=!0),c.maxLength&&(f.maxlength=c.maxLength),c.minLength&&(f.minlength=c.minLength),(c.readOnly||c.readonly)&&(f.readonly=!0),c.minimum&&(f.minimum=c.minimum+(c.exclusiveMinimum?1:0)),c.maximum&&(f.maximum=c.maximum-(c.exclusiveMaximum?1:0)),c.validationMessage&&(f.validationMessage=c.validationMessage),c.enumNames&&(f.titleMap=e(c.enumNames,c.enum)),f.schema=c,f.ngModelOptions=f.ngModelOptions||{},f},h=function(a,d,e){if("string"===c(d.type)&&!d.enum){var f=g(a,d,e);return f.key=e.path,f.type="text",e.lookup[b.stringify(e.path)]=f,f}},i=function(a,d,e){if("number"===c(d.type)){var f=g(a,d,e);return f.key=e.path,f.type="number",e.lookup[b.stringify(e.path)]=f,f}},j=function(a,d,e){if("integer"===c(d.type)){var f=g(a,d,e);return f.key=e.path,f.type="number",e.lookup[b.stringify(e.path)]=f,f}},k=function(a,d,e){if("boolean"===c(d.type)){var f=g(a,d,e);return f.key=e.path,f.type="checkbox",e.lookup[b.stringify(e.path)]=f,f}},l=function(a,e,f){if("string"===c(e.type)&&e.enum){var h=g(a,e,f);return h.key=f.path,h.type="select",h.titleMap||(h.titleMap=d(e.enum)),f.lookup[b.stringify(f.path)]=h,h}},m=function(a,e,f){if("array"===c(e.type)&&e.items&&e.items.enum){var h=g(a,e,f);return h.key=f.path,h.type="checkboxes",h.titleMap||(h.titleMap=d(e.items.enum)),f.lookup[b.stringify(f.path)]=h,h}},n=function(d,e,h){if("object"===c(e.type)){var i=g(d,e,h);return i.type="fieldset",i.items=[],h.lookup[b.stringify(h.path)]=i,a.forEach(e.properties,function(a,c){var d=h.path.slice();if(d.push(c),!0!==h.ignore[b.stringify(d)]){var g=e.required&&-1!==e.required.indexOf(c),j=f(c,a,{path:d,required:g||!1,lookup:h.lookup,ignore:h.ignore,global:h.global});j&&i.items.push(j)}}),i}},o=function(a,d,e){if("array"===c(d.type)){var h=g(a,d,e);h.type="array",h.key=e.path,e.lookup[b.stringify(e.path)]=h;var i=d.required&&-1!==d.required.indexOf(e.path[e.path.length-1]),j=e.path.slice();return j.push(""),h.items=[f(a,d.items,{path:j,required:i||!1,lookup:e.lookup,ignore:e.ignore,global:e.global})],h}},p={string:[l,h],object:[n],number:[i],integer:[j],boolean:[k],array:[m,o]},q=function(a){return a};this.defaults=p,this.stdFormObj=g,this.defaultFormDefinition=f,this.postProcess=function(a){q=a},this.appendRule=function(a,b){p[a]||(p[a]=[]),p[a].push(b)},this.prependRule=function(a,b){p[a]||(p[a]=[]),p[a].unshift(b)},this.createStandardForm=g,this.$get=function(){var d={};return d.merge=function(c,f,g,h,i,j){f=f||["*"],h=h||{},i=i||c.readonly||c.readOnly;var k=d.defaults(c,g,h),l=f.indexOf("*")
;-1!==l&&(f=f.slice(0,l).concat(k.form).concat(f.slice(l+1)));var m=k.lookup;return q(f.map(function(f){if("string"==typeof f&&(f={key:f}),f.key&&"string"==typeof f.key&&(f.key=b.parse(f.key)),f.titleMap&&(f.titleMap=e(f.titleMap)),f.itemForm){f.items=[];var k=b.stringify(f.key),l=m[k];a.forEach(l.items,function(b){var c=a.copy(f.itemForm);c.key=b.key,f.items.push(c)})}if(f.key){var n=b.stringify(f.key);if(m[n]){var o=m[n];a.forEach(o,function(a,b){void 0===f[b]&&(f[b]=o[b])})}}return!0===i&&(f.readonly=!0),f.items&&(f.items=d.merge(c,f.items,g,h,f.readonly,j)),f.tabs&&a.forEach(f.tabs,function(a){a.items=d.merge(c,a.items,g,h,f.readonly,j)}),"checkbox"===f.type&&a.isUndefined(f.schema.default)&&(f.schema.default=!1),j&&"template"===f.type&&!f.template&&f.templateUrl&&j.push(f),f}))},d.defaults=function(b,d,e){var g=[],h={};if(d=d||{},e=e||{},"object"!==c(b.type))throw new Error('Not implemented. Only type "object" allowed at root level of schema.');return a.forEach(b.properties,function(a,c){if(!0!==d[c]){var i=b.required&&-1!==b.required.indexOf(c),j=f(c,a,{path:[c],lookup:h,ignore:d,required:i,global:e});j&&g.push(j)}}),{form:g,lookup:h}},d.traverseSchema=function(b,c,d,e){e=!a.isDefined(e)||e,d=d||[];var f=function(b,c,d){if(c(b,d),a.forEach(b.properties,function(a,b){var e=d.slice();e.push(b),f(a,c,e)}),!e&&b.items){var g=d.slice();g.push(""),f(b.items,c,g)}};f(b,c,d||[])},d.traverseForm=function(b,c){c(b),a.forEach(b.items,function(a){d.traverseForm(a,c)}),b.tabs&&a.forEach(b.tabs,function(b){a.forEach(b.items,function(a){d.traverseForm(a,c)})})},d}}]),a.module("schemaForm").factory("sfSelect",["sfPath",function(a){var b=/^\d+$/;return function(c,d,e){d||(d=this);var f="string"==typeof c?a.parse(c):c;if(void 0!==e&&1===f.length)return d[f[0]]=e,d;void 0!==e&&void 0===d[f[0]]&&(d[f[0]]=f.length>2&&b.test(f[1])?[]:{});for(var g=d[f[0]],h=1;h<f.length;h++){if(""===f[h])return;if(void 0!==e){if(h===f.length-1)return g[f[h]]=e,e;var i=g[f[h]];void 0!==i&&null!==i||(i=b.test(f[h+1])?[]:{},g[f[h]]=i),g=i}else g&&(g=g[f[h]])}return g}}]),a.module("schemaForm").factory("sfValidator",[function(){var b={};return b.validate=function(b,d){if(!b)return{valid:!0};var e=b.schema;if(!e)return{valid:!0};""===d&&(d=void 0),"number"===b.type&&null===d&&(d=void 0);var f={type:"object",properties:{}},g=b.key[b.key.length-1];f.properties[g]=e,b.required&&(f.required=[g]);var h={};return a.isDefined(d)&&(h[g]=d),c.validateResult(h,f)},b}]),a.module("schemaForm").directive("sfArray",["sfSelect","schemaForm","sfValidator","sfPath",function(b,c,d,e){var f=function(a){return function(b){b.key&&(b.key[b.key.indexOf("")]=a)}};return{restrict:"A",scope:!0,require:"?ngModel",link:function(g,h,i,j){var k={};g.validateArray=a.noop,j&&g.$emit("schemaFormPropagateNgModelController",j);var l=g.$watch(i.sfArray,function(h){if(h){var i=b(h.key,g.model),m=e.normalize(h.key);if(g.$watch("model"+("["!==m[0]?".":"")+m,function(a){i=g.modelArray=a}),a.isUndefined(i)&&(i=[],b(h.key,g.model,i)),g.modelArray=i,h.items){var n=h.items[0];h.items.length>1&&(n={type:"section",items:h.items.map(function(b){return b.ngModelOptions=h.ngModelOptions,a.isUndefined(b.readonly)&&(b.readonly=h.readonly),b})})}if(g.copyWithIndex=function(b){if(!k[b]&&n){var d=a.copy(n);d.arrayIndex=b,c.traverseForm(d,f(b)),k[b]=d}return k[b]},g.appendToArray=function(){var d=i.length,e=g.copyWithIndex(d);if(c.traverseForm(e,function(c){if(c.key){var d;a.isDefined(c.default)&&(d=c.default),a.isDefined(c.schema)&&a.isDefined(c.schema.default)&&(d=c.schema.default),a.isDefined(d)&&b(c.key,g.model,d)}}),d===i.length){var f,j=b("schema.items.type",h);"object"===j?f={}:"array"===j&&(f=[]),i.push(f)}return g.validateArray(),i},g.deleteFromArray=function(a){return i.splice(a,1),g.validateArray(),j&&j.$setDirty&&j.$setDirty(),i},h.titleMap||!0===h.startEmpty||0!==i.length||g.appendToArray(),h.titleMap&&h.titleMap.length>0){g.titleMapValues=[];var o=function(a){g.titleMapValues=[],a=a||[],h.titleMap.forEach(function(b){g.titleMapValues.push(-1!==a.indexOf(b.value))})};o(g.modelArray),g.$watchCollection("modelArray",o),g.$watchCollection("titleMapValues",function(a,b){if(a&&a!==b){for(var c=g.modelArray;c.length>0;)c.pop();h.titleMap.forEach(function(b,d){a[d]&&c.push(b.value)}),g.validateArray()}})}if(j){var p;g.validateArray=function(){var a=d.validate(h,g.modelArray.length>0?g.modelArray:void 0);Object.keys(j.$error).filter(function(a){return 0===a.indexOf("tv4-")}).forEach(function(a){j.$setValidity(a,!0)}),!1!==a.valid||!a.error||""!==a.error.dataPath&&a.error.dataPath!=="/"+h.key[h.key.length-1]||(j.$setViewValue(g.modelArray),p=a.error,j.$setValidity("tv4-"+a.error.code,!1))},g.$on("schemaFormValidate",g.validateArray),g.hasSuccess=function(){return g.options&&g.options.pristine&&!1===g.options.pristine.success?j.$valid&&!j.$pristine&&!j.$isEmpty(j.$modelValue):j.$valid&&(!j.$pristine||!j.$isEmpty(j.$modelValue))},g.hasError=function(){return g.options&&g.options.pristine&&!1===g.options.pristine.errors?j.$invalid&&!j.$pristine:j.$invalid},g.schemaError=function(){return p}}l()}})}}}]),a.module("schemaForm").directive("sfChanged",function(){return{require:"ngModel",restrict:"AC",scope:!1,link:function(b,c,d,e){var f=b.$eval(d.sfChanged);f&&f.onChange&&e.$viewChangeListeners.push(function(){a.isFunction(f.onChange)?f.onChange(e.$modelValue,f):b.evalExpr(f.onChange,{modelValue:e.$modelValue,form:f})})}}}),a.module("schemaForm").directive("sfField",["$parse","$compile","$http","$templateCache","$interpolate","$q","sfErrorMessage","sfPath","sfSelect",function(b,c,d,e,f,g,h,i,j){return{restrict:"AE",replace:!1,transclude:!1,scope:!0,require:"^sfSchema",link:{pre:function(a,b,c,d){a.$on("schemaFormPropagateNgModelController",function(b,c){b.stopPropagation(),b.preventDefault(),a.ngModel=c}),a.form=d.lookup["f"+c.sfField]},post:function(b,c,d,e){b.showTitle=function(){return b.form&&!0!==b.form.notitle&&b.form.title},b.listToCheckboxValues=function(b){var c={};return a.forEach(b,function(a){c[a]=!0}),c},b.checkboxValuesToList=function(b){var c=[];return a.forEach(b,function(a,b){a&&c.push(b)}),c},b.buttonClick=function(c,d){a.isFunction(d.onClick)?d.onClick(c,d):a.isString(d.onClick)&&(e?e.evalInParentScope(d.onClick,{$event:c,form:d}):b.$eval(d.onClick,{$event:c,form:d}))},b.evalExpr=function(a,c){return e?e.evalInParentScope(a,c):b.$eval(a,c)},b.evalInScope=function(a,c){if(a)return b.$eval(a,c)},b.interp=function(a,b){return a&&f(a)(b)},b.hasSuccess=function(){return!!b.ngModel&&(b.options&&b.options.pristine&&!1===b.options.pristine.success?b.ngModel.$valid&&!b.ngModel.$pristine&&!b.ngModel.$isEmpty(b.ngModel.$modelValue):b.ngModel.$valid&&(!b.ngModel.$pristine||!b.ngModel.$isEmpty(b.ngModel.$modelValue)))},b.hasError=function(){return!!b.ngModel&&(b.options&&b.options.pristine&&!1===b.options.pristine.errors?b.ngModel.$invalid&&!b.ngModel.$pristine:b.ngModel.$invalid)},b.errorMessage=function(a){return h.interpolate(a&&a.code+""||"default",b.ngModel&&b.ngModel.$modelValue||"",b.ngModel&&b.ngModel.$viewValue||"",b.form,b.options&&b.options.validationMessage)};var g=b.form;g.key&&(b.$on("schemaForm.error."+g.key.join("."),function(a,c,d,e){!0!==d&&!1!==d||(e=d,d=void 0),b.ngModel&&c&&(b.ngModel.$setDirty?b.ngModel.$setDirty():(b.ngModel.$dirty=!0,b.ngModel.$pristine=!1),d&&(g.validationMessage||(g.validationMessage={}),g.validationMessage[c]=d),b.ngModel.$setValidity(c,!0===e),!0===e&&(b.ngModel.$validate(),b.$broadcast("schemaFormValidate")))}),b.$on("$destroy",function(){if(!b.externalDestructionInProgress){var a=g.destroyStrategy||b.options&&b.options.destroyStrategy||"remove";if(g.key&&"retain"!==a){var c=b.model;if(g.key.length>1&&(c=j(g.key.slice(0,g.key.length-1),c)),void 0===c)return;var d=g.schema&&g.schema.type||"";"empty"===a&&-1!==d.indexOf("string")?c[g.key.slice(-1)]="":"empty"===a&&-1!==d.indexOf("object")?c[g.key.slice(-1)]={}:"empty"===a&&-1!==d.indexOf("array")?c[g.key.slice(-1)]=[]:"null"===a?c[g.key.slice(-1)]=null:delete c[g.key.slice(-1)]}}}))}}}}]),a.module("schemaForm").directive("sfMessage",["$injector","sfErrorMessage",function(b,c){var d=b.has("$sanitize")?b.get("$sanitize"):function(a){return a};return{scope:!1,restrict:"EA",link:function(b,e,f){var g="";f.sfMessage&&b.$watch(f.sfMessage,function(a){a&&(g=d(a),j(!!b.ngModel))});var h,i=function(a){a!==h&&(e.html(a),h=a)},j=function(d){if(d)if(b.hasError()){var e=[];a.forEach(b.ngModel&&b.ngModel.$error,function(a,b){a&&e.push(b)}),e=e.filter(function(a){return"schemaForm"!==a});var f=e[0];i(f?c.interpolate(f,b.ngModel.$modelValue,b.ngModel.$viewValue,b.form,b.options&&b.options.validationMessage):g)}else i(g);else i(g)};j();var k=b.$watch("ngModel",function(a){a&&(a.$parsers.push(function(a){return j(!0),a}),a.$formatters.push(function(a){return j(!0),a}),k())});b.$watchCollection("ngModel.$error",function(){j(!!b.ngModel)})}}}]),a.module("schemaForm").directive("sfNewArray",["sfSelect","sfPath","schemaForm",function(b,c,d){return{scope:!1,link:function(e,f,g){e.min=0,e.modelArray=e.$eval(g.sfNewArray);var h=function(){e.modelArray=e.$eval(g.sfNewArray),e.ngModel&&e.ngModel.$pristine&&e.firstDigest&&(!e.options||!0!==e.options.validateOnRender)||e.validateField&&e.validateField()},i=function(){e.form&&e.form.onChange&&(a.isFunction(e.form.onChange)?e.form.onChange(e.modelArray,e.form):e.evalExpr(e.form.onChange,{modelValue:e.modelArray,form:e.form}))},j=function(){var a=e.modelArray;if(!a){var d=c.parse(g.sfNewArray);a=[],b(d,e,a),e.modelArray=a}return a},k=e.$watch("form",function(a){if(a){if(a.titleMap||!0===a.startEmpty||e.modelArray&&0!==e.modelArray.length||e.appendToArray(),e.form&&e.form.schema&&!0===e.form.schema.uniqueItems?(e.$watch(g.sfNewArray,h,!0),e.$watch([g.sfNewArray,g.sfNewArray+".length"],i)):e.$watchGroup?e.$watchGroup([g.sfNewArray,g.sfNewArray+".length"],function(){h(),i()}):(e.$watch(g.sfNewArray,function(){h(),i()}),e.$watch(g.sfNewArray+".length",function(){h(),i()})),a.titleMap&&a.titleMap.length>0){e.titleMapValues=[];var b=function(b){e.titleMapValues=[],b=b||[],a.titleMap.forEach(function(a){e.titleMapValues.push(-1!==b.indexOf(a.value))})};b(e.modelArray),e.$watchCollection("modelArray",b),e.$watchCollection("titleMapValues",function(b,c){if(b&&b!==c){for(var d=j();d.length>0;)d.pop();a.titleMap.forEach(function(a,c){b[c]&&d.push(a.value)}),e.validateField&&e.validateField()}})}k()}});e.appendToArray=function(){var c,f=j();if(e.form&&e.form.schema&&e.form.schema.items){var g=e.form.schema.items;g.type&&-1!==g.type.indexOf("object")?(c={},e.options&&!1===e.options.setSchemaDefaults||(c=a.isDefined(g.default)?g.default:c)&&d.traverseSchema(g,function(d,e){a.isDefined(d.default)&&b(e,c,d.default)})):g.type&&-1!==g.type.indexOf("array")?(c=[],e.options&&!1===e.options.setSchemaDefaults||(c=g.default||c)):e.options&&!1===e.options.setSchemaDefaults||(c=g.default||c)}return f.push(c),f},e.deleteFromArray=function(a){var b=e.modelArray;return b&&b.splice(a,1),b};var l=function(a){return function(b){b.key&&(b.key[b.key.indexOf("")]=a)}},m={};e.copyWithIndex=function(b){var c=e.form;if(!m[b]){var f=c.items[0];if(c.items.length>1&&(f={type:"section",items:c.items.map(function(b){return b.ngModelOptions=c.ngModelOptions,a.isUndefined(b.readonly)&&(b.readonly=c.readonly),b})}),f){var g=a.copy(f);g.arrayIndex=b,d.traverseForm(g,l(b)),m[b]=g}}return m[b]}}}}]),a.module("schemaForm").directive("sfSchema",["$compile","$http","$templateCache","$q","schemaForm","schemaFormDecorators","sfSelect","sfPath","sfBuilder",function(b,c,d,e,f,g,h,i,j){return{scope:{schema:"=sfSchema",initialForm:"=sfForm",model:"=sfModel",options:"=sfOptions"},controller:["$scope",function(a){this.evalInParentScope=function(b,c){return a.$parent.$eval(b,c)};var b=this;a.lookup=function(a){return a&&(b.lookup=a),b.lookup}}],replace:!1,restrict:"A",transclude:!0,require:"?form",link:function(i,k,l,m,n){i.formCtrl=m;var o={};n(i,function(a){if(a.addClass("schema-form-ignore"),k.prepend(a),k[0].querySelectorAll){var b=k[0].querySelectorAll("[ng-model]");if(b)for(var c=0;c<b.length;c++){var d=b[c].getAttribute("ng-model");o[d.substring(d.indexOf(".")+1)]=!0}}});var p,q={},r=function(a,b){var g=[],h=f.merge(a,b,o,i.options,void 0,g);g.length>0?e.all(g.map(function(a){return c.get(a.templateUrl,{cache:d}).then(function(b){a.template=b.data})})).then(function(){s(a,b,h)}):s(a,b,h)},s=function(c,d,e){p&&(i.externalDestructionInProgress=!0,p.$destroy(),i.externalDestructionInProgress=!1),p=i.$new(),p.schemaForm={form:e,schema:c},k.children(":not(.schema-form-ignore)").remove();for(var m={},n=k[0].querySelectorAll("*[sf-insert-field]"),o=0;o<n.length;o++)m[n[o].getAttribute("sf-insert-field")]=n[o];var q=g.decorator(l.sfUseDecorator),r=Object.create(null);i.lookup(r),k[0].appendChild(j.build(e,q,m,r)),p.firstDigest=!0,setTimeout(function(){p.firstDigest=!1},0),b(k.children())(p),i.options&&!1===i.options.setSchemaDefaults||f.traverseSchema(c,function(b,c){if(a.isDefined(b.default)){var d=h(c,i.model);a.isUndefined(d)&&h(c,i.model,b.default)}}),i.$emit("sf-render-finished",k)},t=["*"];i.$watch(function(){var a=i.schema,b=i.initialForm||t;b&&a&&a.type&&(q.form!==b||q.schema!==a)&&Object.keys(a.properties).length>0&&(q.schema=a,q.form=b,r(a,b))}),i.$on("schemaFormRedraw",function(){var b=i.schema,c=i.initialForm?a.copy(i.initialForm):["*"];b&&r(b,c)}),i.$on("$destroy",function(){i.externalDestructionInProgress=!0}),i.evalExpr=function(a,b){return i.$parent.$eval(a,b)}}}}]),a.module("schemaForm").directive("schemaValidate",["sfValidator","$parse","sfSelect",function(b,c,d){return{restrict:"A",scope:!1,priority:500,require:"ngModel",link:function(c,e,f,g){c.$emit("schemaFormPropagateNgModelController",g);var h=null,i=c.$eval(f.schemaValidate);i.copyValueTo&&g.$viewChangeListeners.push(function(){var b=i.copyValueTo;a.forEach(b,function(a){d(a,c.model,g.$modelValue)})});var j=function(a){if(!i)return a;if(c.options&&!1===c.options.tv4Validation)return a;var d=b.validate(i,a);Object.keys(g.$error).filter(function(a){return 0===a.indexOf("tv4-")}).forEach(function(a){g.$setValidity(a,!0)});{if(d.valid)return a;if(g.$setValidity("tv4-"+d.error.code,!1),h=d.error,g.$validators)return a}};"function"==typeof i.ngModel&&i.ngModel(g),["$parsers","$viewChangeListeners","$formatters"].forEach(function(a){i[a]&&g[a]&&i[a].forEach(function(b){g[a].push(b)})}),["$validators","$asyncValidators"].forEach(function(b){i[b]&&g[b]&&a.forEach(i[b],function(a,c){g[b][c]=a})}),g.$parsers.push(j),g.$validators&&(g.$validators.schemaForm=function(){return!Object.keys(g.$error).some(function(a){return"schemaForm"!==a})});var k=i.schema;c.validateField=function(a){void 0!=a&&g.$$parentForm.$name!==a||(k&&-1!==k.type.indexOf("array")&&j(g.$modelValue),g.$setDirty?(g.$setDirty(),g.$setViewValue(g.$viewValue),g.$commitViewValue(),i.required&&g.$isEmpty(g.$modelValue)&&g.$setValidity("tv4-302",!1)):g.$setViewValue(g.$viewValue))},g.$formatters.push(function(a){return!g.$pristine||!c.firstDigest||c.options&&!0===c.options.validateOnRender?(j(g.$modelValue),a):a}),c.$on("schemaFormValidate",function(a,b){c.validateField(b)}),c.schemaError=function(){return h}}}}]),e}),function(a,b){"function"==typeof define&&define.amd?define(["schemaForm"],b):"object"==typeof exports?module.exports=b(require("schemaForm")):a.bootstrapDecorator=b(a.schemaForm)}(this,function(a){return angular.module("schemaForm").run(["$templateCache",function(a){a.put("directives/decorators/bootstrap/actions-trcl.html",'<div class="btn-group schema-form-actions {{form.htmlClass}}" ng-transclude=""></div>'),a.put("directives/decorators/bootstrap/actions.html",'<div class="btn-group schema-form-actions {{form.htmlClass}}"><input ng-repeat-start="item in form.items" type="submit" class="btn {{ item.style || \'btn-default\' }} {{form.fieldHtmlClass}}" value="{{item.title}}" ng-if="item.type === \'submit\'"> <button ng-repeat-end="" class="btn {{ item.style || \'btn-default\' }} {{form.fieldHtmlClass}}" type="button" ng-disabled="form.readonly" ng-if="item.type !== \'submit\'" ng-click="buttonClick($event,item)"><span ng-if="item.icon" class="{{item.icon}}"></span>{{item.title}}</button></div>'),a.put("directives/decorators/bootstrap/array.html",'<div sf-array="form" class="schema-form-array {{form.htmlClass}}" ng-model="$$value$$" ng-model-options="form.ngModelOptions"><label class="control-label" ng-show="showTitle()">{{ form.title }}</label><ol class="list-group" ng-model="modelArray" ui-sortable=""><li class="list-group-item {{form.fieldHtmlClass}}" ng-repeat="item in modelArray track by $index"><button ng-hide="form.readonly || form.remove === null" ng-click="deleteFromArray($index)" style="position: relative; z-index: 20;" type="button" class="close pull-right"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button><sf-decorator ng-init="arrayIndex = $index" form="copyWithIndex($index)"></sf-decorator></li></ol><div class="clearfix" style="padding: 15px;"><button ng-hide="form.readonly || form.add === null" ng-click="appendToArray()" type="button" class="btn {{ form.style.add || \'btn-default\' }} pull-right"><i class="glyphicon glyphicon-plus"></i> {{ form.add || \'Add\'}}</button></div><div class="help-block" ng-show="(hasError() && errorMessage(schemaError())) || form.description" ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div></div>'),a.put("directives/decorators/bootstrap/checkbox.html",'<div class="checkbox schema-form-checkbox {{form.htmlClass}}" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess()}"><label class="{{form.labelHtmlClass}}"><input type="checkbox" sf-changed="form" ng-disabled="form.readonly" ng-model="$$value$$" ng-model-options="form.ngModelOptions" schema-validate="form" class="{{form.fieldHtmlClass}}" name="{{form.key.slice(-1)[0]}}"> <span ng-bind-html="form.title"></span></label><div class="help-block" sf-message="form.description"></div></div>'),a.put("directives/decorators/bootstrap/checkboxes.html",'<div sf-array="form" ng-model="$$value$$" class="form-group schema-form-checkboxes {{form.htmlClass}}" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess()}"><label class="control-label {{form.labelHtmlClass}}" ng-show="showTitle()">{{form.title}}</label><div class="checkbox" ng-repeat="val in titleMapValues track by $index"><label><input type="checkbox" ng-disabled="form.readonly" sf-changed="form" class="{{form.fieldHtmlClass}}" ng-model="titleMapValues[$index]" name="{{form.key.slice(-1)[0]}}"> <span ng-bind-html="form.titleMap[$index].name"></span></label></div><div class="help-block" sf-message="form.description"></div></div>'),a.put("directives/decorators/bootstrap/default.html",'<div class="form-group schema-form-{{form.type}} {{form.htmlClass}}" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess(), \'has-feedback\': form.feedback !== false }"><label class="control-label {{form.labelHtmlClass}}" ng-class="{\'sr-only\': !showTitle()}" for="{{form.key.slice(-1)[0]}}">{{form.title}}</label> <input ng-if="!form.fieldAddonLeft && !form.fieldAddonRight" ng-show="form.key" type="{{form.type}}" step="any" sf-changed="form" placeholder="{{form.placeholder}}" class="form-control {{form.fieldHtmlClass}}" id="{{form.key.slice(-1)[0]}}" ng-model-options="form.ngModelOptions" ng-model="$$value$$" ng-disabled="form.readonly" schema-validate="form" name="{{form.key.slice(-1)[0]}}" aria-describedby="{{form.key.slice(-1)[0] + \'Status\'}}"><div ng-if="form.fieldAddonLeft || form.fieldAddonRight" ng-class="{\'input-group\': (form.fieldAddonLeft || form.fieldAddonRight)}"><span ng-if="form.fieldAddonLeft" class="input-group-addon" ng-bind-html="form.fieldAddonLeft"></span> <input ng-show="form.key" type="{{form.type}}" step="any" sf-changed="form" placeholder="{{form.placeholder}}" class="form-control {{form.fieldHtmlClass}}" id="{{form.key.slice(-1)[0]}}" ng-model-options="form.ngModelOptions" ng-model="$$value$$" ng-disabled="form.readonly" schema-validate="form" name="{{form.key.slice(-1)[0]}}" aria-describedby="{{form.key.slice(-1)[0] + \'Status\'}}"> <span ng-if="form.fieldAddonRight" class="input-group-addon" ng-bind-html="form.fieldAddonRight"></span></div><span ng-if="form.feedback !== false" class="form-control-feedback" ng-class="evalInScope(form.feedback) || {\'glyphicon\': true, \'glyphicon-ok\': hasSuccess(), \'glyphicon-remove\': hasError() }" aria-hidden="true"></span> <span ng-if="hasError() || hasSuccess()" id="{{form.key.slice(-1)[0] + \'Status\'}}" class="sr-only">{{ hasSuccess() ? \'(success)\' : \'(error)\' }}</span><div class="help-block" sf-message="form.description"></div></div>'),a.put("directives/decorators/bootstrap/fieldset-trcl.html",'<fieldset ng-disabled="form.readonly" class="schema-form-fieldset {{form.htmlClass}}"><legend ng-class="{\'sr-only\': !showTitle() }">{{ form.title }}</legend><div class="help-block" ng-show="form.description" ng-bind-html="form.description"></div><div ng-transclude=""></div></fieldset>'),a.put("directives/decorators/bootstrap/fieldset.html",'<fieldset ng-disabled="form.readonly" class="schema-form-fieldset {{form.htmlClass}}"><legend ng-class="{\'sr-only\': !showTitle() }">{{ form.title }}</legend><div class="help-block" ng-show="form.description" ng-bind-html="form.description"></div><sf-decorator ng-repeat="item in form.items" form="item"></sf-decorator></fieldset>'),a.put("directives/decorators/bootstrap/help.html",'<div class="helpvalue schema-form-helpvalue {{form.htmlClass}}" ng-bind-html="form.helpvalue"></div>'),a.put("directives/decorators/bootstrap/radio-buttons.html",'<div class="form-group schema-form-radiobuttons {{form.htmlClass}}" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess()}"><div><label class="control-label {{form.labelHtmlClass}}" ng-show="showTitle()">{{form.title}}</label></div><div class="btn-group"><label class="btn {{ (item.value === $$value$$) ? form.style.selected || \'btn-default\' : form.style.unselected || \'btn-default\'; }}" ng-class="{ active: item.value === $$value$$ }" ng-repeat="item in form.titleMap"><input type="radio" class="{{form.fieldHtmlClass}}" sf-changed="form" style="display: none;" ng-disabled="form.readonly" ng-model="$$value$$" ng-model-options="form.ngModelOptions" schema-validate="form" ng-value="item.value" name="{{form.key.join(\'.\')}}"> <span ng-bind-html="item.name"></span></label></div><div class="help-block" sf-message="form.description"></div></div>'),a.put("directives/decorators/bootstrap/radios-inline.html",'<div class="form-group schema-form-radios-inline {{form.htmlClass}}" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess()}"><label ng-model="$$value$$" ng-model-options="form.ngModelOptions" schema-validate="form" class="control-label {{form.labelHtmlClass}}" ng-show="showTitle()">{{form.title}}</label><div><label class="radio-inline" ng-repeat="item in form.titleMap"><input type="radio" class="{{form.fieldHtmlClass}}" sf-changed="form" ng-disabled="form.readonly" ng-model="$$value$$" ng-value="item.value" name="{{form.key.join(\'.\')}}"> <span ng-bind-html="item.name"></span></label></div><div class="help-block" sf-message="form.description"></div></div>'),a.put("directives/decorators/bootstrap/radios.html",'<div class="form-group schema-form-radios {{form.htmlClass}}" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess()}"><label ng-model="$$value$$" ng-model-options="form.ngModelOptions" schema-validate="form" class="control-label {{form.labelHtmlClass}}" ng-show="showTitle()">{{form.title}}</label><div class="radio" ng-repeat="item in form.titleMap"><label><input type="radio" class="{{form.fieldHtmlClass}}" sf-changed="form" ng-disabled="form.readonly" ng-model="$$value$$" ng-value="item.value" name="{{form.key.join(\'.\')}}"> <span ng-bind-html="item.name"></span></label></div><div class="help-block" sf-message="form.description"></div></div>'),a.put("directives/decorators/bootstrap/section.html",'<div class="schema-form-section {{form.htmlClass}}"><sf-decorator ng-repeat="item in form.items" form="item"></sf-decorator></div>'),a.put("directives/decorators/bootstrap/select.html",'<div class="form-group {{form.htmlClass}} schema-form-select" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess(), \'has-feedback\': form.feedback !== false}"><label class="control-label {{form.labelHtmlClass}}" ng-show="showTitle()">{{form.title}}</label><select ng-model="$$value$$" ng-model-options="form.ngModelOptions" ng-disabled="form.readonly" sf-changed="form" class="form-control {{form.fieldHtmlClass}}" schema-validate="form" ng-options="item.value as item.name group by item.group for item in form.titleMap" name="{{form.key.slice(-1)[0]}}"></select><div class="help-block" sf-message="form.description"></div></div>'),a.put("directives/decorators/bootstrap/submit.html",'<div class="form-group schema-form-submit {{form.htmlClass}}"><input type="submit" class="btn {{ form.style || \'btn-primary\' }} {{form.fieldHtmlClass}}" value="{{form.title}}" ng-disabled="form.readonly" ng-if="form.type === \'submit\'"> <button class="btn {{ form.style || \'btn-default\' }}" type="button" ng-click="buttonClick($event,form)" ng-disabled="form.readonly" ng-if="form.type !== \'submit\'"><span ng-if="form.icon" class="{{form.icon}}"></span> {{form.title}}</button></div>'),a.put("directives/decorators/bootstrap/tabarray.html",'<div sf-array="form" ng-init="selected = { tab: 0 }" class="clearfix schema-form-tabarray schema-form-tabarray-{{form.tabType || \'left\'}} {{form.htmlClass}}"><div ng-if="!form.tabType || form.tabType !== \'right\'" ng-class="{\'col-xs-3\': !form.tabType || form.tabType === \'left\'}"><ul class="nav nav-tabs" ng-class="{ \'tabs-left\': !form.tabType || form.tabType === \'left\'}"><li ng-repeat="item in modelArray track by $index" ng-click="$event.preventDefault() || (selected.tab = $index)" ng-class="{active: selected.tab === $index}"><a href="#">{{interp(form.title,{\'$index\':$index, value: item}) || $index}}</a></li><li ng-hide="form.readonly" ng-click="$event.preventDefault() || (selected.tab = appendToArray().length - 1)"><a href="#"><i class="glyphicon glyphicon-plus"></i> {{ form.add || \'Add\'}}</a></li></ul></div><div ng-class="{\'col-xs-9\': !form.tabType || form.tabType === \'left\' || form.tabType === \'right\'}"><div class="tab-content {{form.fieldHtmlClass}}"><div class="tab-pane clearfix" ng-repeat="item in modelArray track by $index" ng-show="selected.tab === $index" ng-class="{active: selected.tab === $index}"><sf-decorator ng-init="arrayIndex = $index" form="copyWithIndex($index)"></sf-decorator><button ng-hide="form.readonly" ng-click="selected.tab = deleteFromArray($index).length - 1" type="button" class="btn {{ form.style.remove || \'btn-default\' }} pull-right"><i class="glyphicon glyphicon-trash"></i> {{ form.remove || \'Remove\'}}</button></div></div></div><div ng-if="form.tabType === \'right\'" class="col-xs-3"><ul class="nav nav-tabs tabs-right"><li ng-repeat="item in modelArray track by $index" ng-click="$event.preventDefault() || (selected.tab = $index)" ng-class="{active: selected.tab === $index}"><a href="#">{{interp(form.title,{\'$index\':$index, value: item}) || $index}}</a></li><li ng-hide="form.readonly" ng-click="$event.preventDefault() || appendToArray()"><a href="#"><i class="glyphicon glyphicon-plus"></i> {{ form.add || \'Add\'}}</a></li></ul></div></div>'),a.put("directives/decorators/bootstrap/tabs.html",'<div ng-init="selected = { tab: 0 }" class="schema-form-tabs {{form.htmlClass}}"><ul class="nav nav-tabs"><li ng-repeat="tab in form.tabs" ng-disabled="form.readonly" ng-click="$event.preventDefault() || (selected.tab = $index)" ng-class="{active: selected.tab === $index}"><a href="#">{{ tab.title }}</a></li></ul><div class="tab-content {{form.fieldHtmlClass}}"><div class="tab-pane" ng-disabled="form.readonly" ng-repeat="tab in form.tabs" ng-show="selected.tab === $index" ng-class="{active: selected.tab === $index}"><bootstrap-decorator ng-repeat="item in tab.items" form="item"></bootstrap-decorator></div></div></div>'),a.put("directives/decorators/bootstrap/textarea.html",'<div class="form-group has-feedback {{form.htmlClass}} schema-form-textarea" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess()}"><label class="{{form.labelHtmlClass}}" ng-class="{\'sr-only\': !showTitle()}" for="{{form.key.slice(-1)[0]}}">{{form.title}}</label> <textarea ng-if="!form.fieldAddonLeft && !form.fieldAddonRight" class="form-control {{form.fieldHtmlClass}}" id="{{form.key.slice(-1)[0]}}" sf-changed="form" placeholder="{{form.placeholder}}" ng-disabled="form.readonly" ng-model="$$value$$" ng-model-options="form.ngModelOptions" schema-validate="form" name="{{form.key.slice(-1)[0]}}"></textarea><div ng-if="form.fieldAddonLeft || form.fieldAddonRight" ng-class="{\'input-group\': (form.fieldAddonLeft || form.fieldAddonRight)}"><span ng-if="form.fieldAddonLeft" class="input-group-addon" ng-bind-html="form.fieldAddonLeft"></span> <textarea class="form-control {{form.fieldHtmlClass}}" id="{{form.key.slice(-1)[0]}}" sf-changed="form" placeholder="{{form.placeholder}}" ng-disabled="form.readonly" ng-model="$$value$$" ng-model-options="form.ngModelOptions" schema-validate="form" name="{{form.key.slice(-1)[0]}}"></textarea> <span ng-if="form.fieldAddonRight" class="input-group-addon" ng-bind-html="form.fieldAddonRight"></span></div><span class="help-block" sf-message="form.description"></span></div>')}]),angular.module("schemaForm").config(["schemaFormDecoratorsProvider",function(a){var b="directives/decorators/bootstrap/";a.defineDecorator("bootstrapDecorator",{textarea:{template:b+"textarea.html",replace:!1},fieldset:{template:b+"fieldset.html",replace:!1},array:{template:b+"array.html",replace:!1},tabarray:{template:b+"tabarray.html",replace:!1},tabs:{template:b+"tabs.html",replace:!1},section:{template:b+"section.html",replace:!1},conditional:{template:b+"section.html",replace:!1},actions:{template:b+"actions.html",replace:!1},select:{template:b+"select.html",replace:!1},checkbox:{template:b+"checkbox.html",replace:!1},checkboxes:{template:b+"checkboxes.html",replace:!1},number:{template:b+"default.html",replace:!1},password:{template:b+"default.html",replace:!1},submit:{template:b+"submit.html",replace:!1},button:{template:b+"submit.html",replace:!1},radios:{template:b+"radios.html",replace:!1},"radios-inline":{template:b+"radios-inline.html",replace:!1},radiobuttons:{template:b+"radio-buttons.html",replace:!1},help:{template:b+"help.html",replace:!1},default:{template:b+"default.html",replace:!1}},[]),a.createDirectives({textarea:b+"textarea.html",select:b+"select.html",checkbox:b+"checkbox.html",checkboxes:b+"checkboxes.html",number:b+"default.html",submit:b+"submit.html",button:b+"submit.html",text:b+"default.html",date:b+"default.html",password:b+"default.html",datepicker:b+"datepicker.html",input:b+"default.html",radios:b+"radios.html","radios-inline":b+"radios-inline.html",radiobuttons:b+"radio-buttons.html"})}]).directive("sfFieldset",function(){return{transclude:!0,scope:!0,templateUrl:"directives/decorators/bootstrap/fieldset-trcl.html",link:function(a,b,c){a.title=a.$eval(c.title)}}}),a});var underscore=angular.module("underscore",[])
;underscore.factory("_",["$window",function(a){return a._}]),angular.module("DashboardBuilder",["underscore","ACL","Grid","Map","Message","xeditable","Publisher","ui.bootstrap","ngRoute","schemaForm","slickCarousel","ngAnimate","ngSanitize","WsClient","HttpClient","Chart","gridster","DashboardBuilder","Gauge","Speedometer","Odometer","SearchBox","ngMaterial","ngMessages","material.svgAssetsCache","Thermometer","ProgressBar"]),angular.module("angular-scriptrui",[]).directive("ngDisplayBox",function(){return{restrict:"E",require:"ngModel",scope:{msg:"=ngModel",type:"@"},template:'<div class="alert alert-{{type}}" role="alert"><span ng-bind="msg"></span></div>',replace:!0}}),angular.module("Message",["angular-scriptrui"]),angular.module("Message").component("dspBox",{bindings:{data:"<?",api:"@",transport:"@",msgTag:"@",apiParams:"<?",onFormatData:"&"},templateUrl:"/UIComponents/dashboard/frontend/components/message/message.html",controller:["httpClient","wsClient",function(a,b){var c=this;this.$onInit=function(){this.data=this.data?JSON.stringify(data):"Waiting for info...",this.type=this.type?JSON.stringify(type):"info"},this.$postLink=function(){d(this.transport)};var d=function(d){"wss"==d?b.onReady.then(function(){b.subscribe(c.msgTag,c.consumeData.bind(c)),c.api&&b.call(c.api,c.apiParams,c.msgTag).then(function(a,b){c.consumeData(a)})}):"https"==d&&c.api&&a.get(c.api,c.apiParams).then(function(a,b){c.consumeData(a)},function(a){console.log("reject published promise",a)})};this.consumeData=function(a,b){"function"==typeof c.onFormatData()&&(a=c.onFormatData()(a)),this.data=JSON.stringify(a)}}]}),angular.module("DashboardBuilder").constant("config",{script:{form:[{key:"scriptName",notitle:!0,placeholder:"Script Name"}],schema:{type:"object",title:"Schema",properties:{scriptName:{type:"string",fieldHtmlClass:"script-name-input"}},required:["scriptName"]}},transport:{label:"Transport configuration",defaults:{requiresLogin:"No",redirectTarget:"",publishChannel:"requestChannel",subscribeChannel:"responseChannel"},form:["*"],schema:{type:"object",title:"Schema",properties:{redirectTarget:{title:"Redirection",type:"hidden",description:"Scriptr token."},requiresLogin:{title:"Requires Login",type:"string",enum:["Yes","No"],description:"Scriptr token."},publishChannel:{title:"Publish Channel",type:"string",description:"Publish Channel"},subscribeChannel:{title:"Subscribe Channel",type:"string",description:"Subscribe Channel"}},required:["token","baseUrl","publishChannel","subscribeChannel"]}},defaultWidget:{name:"message",label:"Display Box",class:"dsp-box",defaults:{transport:"wss","msg-tag":"myMessage",text:"",type:"info"},box:{sizeX:1,sizeY:1,minSizeX:1,minSizeY:1,maxSizeY:1}},widgets:[{name:"bar",label:"Bar Chart",class:"scriptr-chart",show:!0,defaults:{type:"bar",stacked:"true",xkey:"y",ykeys:'["a", "b"]',labels:'["Serie A", "Serie B"]',colors:'["#7ed38c", "#dd7ca7"]',transport:"wss",api:"UIComponents/dashboard/frontend/examples/chart/getChartData","msg-tag":"chart"},box:{sizeY:2,sizeX:2,minSizeX:1,minSizeY:1},imgSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAlCAYAAADBa/A+AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjIwNzM5ODZDRTIzRjExRTZBNDMxODBDRDVCMkFCNTZGIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjIwNzM5ODZERTIzRjExRTZBNDMxODBDRDVCMkFCNTZGIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjA3Mzk4NkFFMjNGMTFFNkE0MzE4MENENUIyQUI1NkYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MjA3Mzk4NkJFMjNGMTFFNkE0MzE4MENENUIyQUI1NkYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7BUDhKAAABLklEQVR42mJkGCDw+5iYA5Daj08NE8MgBqOOG3UcvQELCbkrAUgp4FFygNXq1YEBcRwQgBxnT0DNgdE0N+o4KqY5YjOOAJASwKPkBzDjvBgQxwFBARDX45E/CMQOo2lu1HEjIrd+fSYo8P8vbj8zMv3nYWB4NTCOe3NWyeDDLSmc8pziH5UZGG4Mg2iFFpr4wBdgofmH2hb//cnKTEy0viegxpHarQ0QeHFUXffNecXRomS0nMMJHm03VPn9iRN3ESHxwYDY8ovqjvvxlpf7+0t+3AZx/RQYWdF6d6UVXgW8Cq9VgNF1YEAc9+WJMF4FHKKfeEZz65BLc8xsf/7jVcH4/xfYF8x/f+FVy/T/B4zGpw5kDsxcgnYPZsBYXl4uMGijlYhWyWiGwAYAAgwAp1xSUMqF7k8AAAAASUVORK5CYII=",form:[{type:"tabs",tabs:[{title:"Data",items:["transport","msg-tag","api","api-params","data"]},{title:"Dimensions",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["xkey","ykeys","units","ymin","ymax"]},{type:"section",htmlClass:"col-xs-6",items:["goals","goal-stroke-width","event-stroke-width","events"]}]}]},{title:"Colors and Font",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["grid-text-weight","grid-text-size","grid-text-color","grid-text-family"]},{type:"section",htmlClass:"col-xs-6",items:["colors","goal-line-colors","event-line-colors"]}]}]},{title:"Chart behaviour",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:[{type:"radios-inline",key:"axes",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{key:"resize",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{type:"radios-inline",key:"parse-time",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]}]},{type:"section",htmlClass:"col-xs-6",items:[{key:"stacked",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{type:"radios-inline",key:"grid",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},"hide-hover"]}]}]},{title:"Labels",items:["labels","xlabel-angle","post-units","pre-units"]},{title:"Box Properties",items:["boxLabel"]}]}],schema:{type:"object",title:"Schema",properties:{boxLabel:{title:"Box Label",type:"string",description:"Define box title"},data:{title:"Data",type:"string",description:"Data series in case of static data.","x-schema-form":{type:"textarea",placeholder:"[{ y: '2006', a: 100, b: 90 },{ y: '2007', a: 75,  b: 65 }, { y: '2008', a: 50,  b: 40 }]"}},xkey:{title:"x Key",type:"string",description:"The name of the data record attribute that contains x-values."},ykeys:{title:"y Keys",type:"string",description:"A list of names of data record attributes that contain y-values."},labels:{title:"Labels",type:"string",description:"Labels for the ykeys -- will be displayed when you hover over the chart."},colors:{title:"Colors",type:"string",description:"Specify the color of each graph successively."},stacked:{title:"Stacked",type:"string",description:"Set to true to draw bars stacked vertically."},"hide-hover":{title:"Hide Hover",type:"string",description:"Set to false to always show a hover legend. Set to true or 'auto' to only show the hover legend when the mouse cursor is over the chart. Set to 'always' to never show a hover legend."},"hover-callback":{title:"Hover Callback",type:"string",description:"Provide a function on this option to generate custom hover legends. The function will be called with the index of the row under the hover legend, the options object passed to the constructor as arguments, a string containing the default generated hover legend content HTML, and an object containing the original data for the row as passed in the data option. hoverCallback: function (index, options, content, row) {return 'sin(' + row.x + ')='+ row.y}"},axes:{title:"Axes",type:"string",description:"Set to false to disable drawing the x and y axes."},grid:{title:"Grid",type:"string",description:"Set to false to disable drawing the horizontal grid lines."},"grid-text-color":{title:"Grid Text Color",type:"string",description:"Set the color of the axis labels (default: #888)."},"grid-text-size":{title:"Grid Text Size",type:"number",description:"Set the point size of the axis labels (default: 12)."},"grid-text-family":{title:"Grid Text Family",type:"string",description:"Set the font family of the axis labels (default: sans-serif)."},"grid-text-weight":{title:"Grid Text Weight",type:"string",description:"Set the font weight of the axis labels (default: normal)."},resize:{title:"Resize",type:"string",description:"Set to true to enable automatic resizing when the containing element resizes. (default: false). This has a significant performance impact, so is disabled by default.",default:"true"},"parse-time":{title:"Parse Time",type:"string",description:"Set to false to skip time/date parsing for X values, instead treating them as an equally-spaced series."},api:{title:"Api",type:"string",description:"Name of the api to get data."},"api-params":{title:"Api Params",type:"string",description:"Api parameters.","x-schema-form":{placeholder:"Ex: {'id' : '599865'}"}},transport:{title:"Transport",type:"string",enum:["wss","https"],description:"Method used to call api (can take 'http' or 'wss')."},"msg-tag":{title:"Message Tag",type:"string",description:"Subscribe to socket messages with tag name."},"on-format-data":{title:"Format data",type:"string",description:"Callback function to be called after data is returned from backend.","x-schema-form":{type:"textarea",placeholder:"Enter you format data function"}},ymax:{title:"y Maximum Value",type:"string",description:"Max. bound for Y-values. Alternatively, set this to 'auto' to compute automatically, or 'auto [num]' to automatically compute and ensure that the max y-value is at least [num]."},ymin:{title:"y Minimum Value",type:"string",description:"Min. bound for Y-values. Alternatively, set this to 'auto' to compute automatically, or 'auto [num]' to automatically compute and ensure that the min y-value is at most [num]. You can use this to create graphs with false origins."},units:{title:"Units",type:"number",description:"Width of the series lines, in pixels."},"post-units":{title:"Post Units",type:"string",description:"Set to a string value (eg: '%') to add a label suffix all y-labels."},"pre-units":{title:"Pre Units",type:"string",description:"Set to a string value (eg: '$') to add a label prefix all y-labels."},"xlabel-angle":{title:"x label Angle",type:"string",description:"The angle in degrees from horizontal to draw x-axis labels."},"ylabel-format":{title:"y label Format",type:"string",description:"A function that accepts y-values and formats them for display as y-axis labels. function (y) { return y.toString() + 'km'; }"},goals:{title:"Goals",type:"string",description:"A list of y-values to draw as horizontal 'goal' lines on the chart. goals: [1.0, -1.0]"},"goal-stroke-width":{title:"Goal Stroke Width",type:"number",description:"Width, in pixels, of the goal lines."},"goal-line-colors":{title:"Goal Line Colors",type:"string",description:"Array of color values to use for the goal line colors."},events:{title:"Events",type:"string",description:"A list of x-values to draw as vertical 'event' lines on the chart. events: ['2012-01-01', '2012-02-01']"},"event-stroke-width":{title:"Event Stroke Width",type:"number",description:"Width, in pixels, of the event lines."},"event-line-colors":{title:"Event Line Colors",type:"string",description:"Array of color values to use for the event line colors. If you list fewer colors here than you have lines in events, then the values will be cycled."}},required:["xkey","ykeys","labels"]}},{name:"area",label:"Area Chart",class:"scriptr-chart",show:!0,defaults:{type:"area",xkey:"y",ykeys:'["a", "b"]',labels:'["Serie A", "Serie B"]',colors:'["#CC5464", "#38B9D6"]',transport:"wss",api:"UIComponents/dashboard/frontend/examples/chart/getChartData","msg-tag":"chart"},box:{sizeX:2,sizeY:2,minSizeX:1,minSizeY:1},imgSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAAlCAYAAADfosCNAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0MzNkM2FlMS1hYTk2LWIyNGItYmFkMy1lYWZiODRkM2YzODIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODU0QUJEQTNFMjRDMTFFNjg5OTNGRTg1NTI0MkFENEUiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODU0QUJEQTJFMjRDMTFFNjg5OTNGRTg1NTI0MkFENEUiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NDMzZDNhZTEtYWE5Ni1iMjRiLWJhZDMtZWFmYjg0ZDNmMzgyIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQzM2QzYWUxLWFhOTYtYjI0Yi1iYWQzLWVhZmI4NGQzZjM4MiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pjz0N0QAAALTSURBVHja7JdPiE1RHMfvnXfnNaPMYpSaV/7MmBmNBePPUwYbNYqQYiEbKxoaK4tnIRSSlSiMlOxENiSzUGQhLLyJjSYLjbERIf8m4T2fH7+b2+3d++6976qj7q8+/V73nPO73/M75/zuebZloM26PbQGdxw2TA6OvLENFXgTWqEMxSaDBU7BATJZsQ0WKEt9R9ps0wWKNRkgcBPuVpBA2vOOAQKvQbNfIG2yyovhnZMgcEGCwVUCfvhHAnO45dAhIu0YQWXgHjgG0+ErXIYzBB9rQOBH2EyMu+7y4lbADO1etiMGXYobgWUBXR7CObjCy77FFLiWMY+0TfblKk2CFUkkg9pwR2DYc8iewFFYD9t0w7v2Fi7KhHjxi5gC5V0rffHCRTJoK+4UFPTRZzgEpwn8Q/u043boNuj2DK/qiZXsjkpBpu92fl8KEChLO6BtVl2RDJgr+0wz5dp12EvQyYAJSZxBFbvRV9oko6MwpM/9AiUJRcgF5OuvSDrLLPbBQU/KX6q4GzEOxWzcLtgJM33NfoGduP46H5U/Iuksm/U8LNCGn3ASDhPwS50TPwdE2D36Vr1FGLcFdsNqeA/rPAL7cH0R5l226XxWA7n2QJaGYE9DxEl9lW3RCy36+D5jXgf0X4j7Tvsz3RqSvc6Ii1N2dIZiUpj3wwXZ6CHi5kEP5H3Nks2aIt0Ja+aLnsMYyRwtJ7IHT4RkollPb3fACRQryCTckx8QY8BTpCNbvTqZ16x1hYjz2mNETtSI06o1sC3BF7TsBIhr0ax1abajmiz5RI0PQq0inSyTOuMe3dS5hDGleE9FKNLxMkmwabj5Wk4avWNKNseJ2aE3mVyD8SwpQYt0WdO6pX+C53oXTCPm70wWUv4bITeYJWlejo36t5iJzERmIjOR5llFivm459ta1Vt5miYxK0kFwqv/YbUtu1Qq9ZsuUpZ7LDs4KdgvAQYAsIQCfa7zz00AAAAASUVORK5CYII=",form:[{type:"tabs",tabs:[{title:"Data",items:["transport","msg-tag","api","api-params","data"]},{title:"Dimensions",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["xkey","ykeys","units","ymin","ymax"]},{type:"section",htmlClass:"col-xs-6",items:["goals","goal-stroke-width","events","event-stroke-width"]}]}]},{title:"Colors and Fonts",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["colors","goal-line-colors","point-fill-colors"]},{type:"section",htmlClass:"col-xs-6",items:["point-stroke-colors","event-line-colors","fill-opacity"]}]}]},{title:"Chart behaviour",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:[{type:"radios-inline",key:"axes",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{key:"resize",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{type:"radios-inline",key:"grid",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{type:"radios-inline",key:"parse-time",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{type:"radios-inline",key:"smooth",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]}]},{type:"section",htmlClass:"col-xs-6",items:[{type:"radios-inline",key:"continuous-line",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},"hide-hover","behave-like-line"]}]}]},{title:"Labels",items:["labels","xlabels","xlabel-angle","post-units","pre-units"]},{title:"Box Properties",items:["boxLabel"]}]}],schema:{type:"object",title:"Schema",properties:{boxLabel:{title:"Box Label",type:"string",description:"Define box title"},data:{title:"Data",type:"string",description:"Data series in case of static data.","x-schema-form":{type:"textarea",placeholder:"[{ y: '2006', a: 100, b: 90 },{ y: '2007', a: 75,  b: 65 }, { y: '2008', a: 50,  b: 40 }]"}},xkey:{title:"x Key",type:"string",description:"The name of the data record attribute that contains x-values."},ykeys:{title:"y Keys",type:"string",description:"A list of names of data record attributes that contain y-values."},labels:{title:"Labels",type:"string",description:"Labels for the ykeys -- will be displayed when you hover over the chart."},colors:{title:"Colors",type:"string",description:"Specify the color of each graph successively."},"line-width":{title:"Line Width",type:"number",description:"Width of the series lines, in pixels."},"point-size":{title:"Point Size",type:"number",description:"Diameter of the series points, in pixels."},"point-fill-colors":{title:"Point Fill Colors",type:"string",description:"Colors for the series points. By default uses the same values as lineColors."},"point-stroke-colors":{title:"Point Stroke Colors",type:"string",description:"Colors for the outlines of the series points. (#ffffff by default)."},ymax:{title:"y Maximum Value",type:"string",description:"Max. bound for Y-values. Alternatively, set this to 'auto' to compute automatically, or 'auto [num]' to automatically compute and ensure that the max y-value is at least [num]."},ymin:{title:"y Minimum Value",type:"string",description:"Min. bound for Y-values. Alternatively, set this to 'auto' to compute automatically, or 'auto [num]' to automatically compute and ensure that the min y-value is at most [num]. You can use this to create graphs with false origins."},smooth:{title:"Smooth",type:"string",description:"Set to false to disable line smoothing."},"hide-hover":{title:"Hide Hover",type:"string",description:"Set to false to always show a hover legend. Set to true or 'auto' to only show the hover legend when the mouse cursor is over the chart. Set to 'always' to never show a hover legend."},"hover-callback":{title:"Hover Callback",type:"string",description:"Provide a function on this option to generate custom hover legends. The function will be called with the index of the row under the hover legend, the options object passed to the constructor as arguments, a string containing the default generated hover legend content HTML, and an object containing the original data for the row as passed in the data option. hoverCallback: function (index, options, content, row) {return 'sin(' + row.x + ')='+ row.y}"},"parse-time":{title:"Parse Time",type:"string",description:"Set to false to skip time/date parsing for X values, instead treating them as an equally-spaced series."},units:{title:"Units",type:"number",description:"Width of the series lines, in pixels."},"post-units":{title:"Post Units",type:"string",description:"Set to a string value (eg: '%') to add a label suffix all y-labels."},"pre-units":{title:"Pre Units",type:"string",description:""},xlabels:{title:"x Labels",type:"string",description:"Sets the x axis labelling interval. By default the interval will be automatically computed. The following are valid interval strings. 'decade', 'year', 'month', 'week', 'day', 'hour', '30min', '15min', '10min', '5min', 'minute', '30sec', '15sec', '10sec', '5sec', 'second'"},"xlabel-angle":{title:"x Label Angle",type:"string",description:"The angle in degrees from horizontal to draw x-axis labels."},"xlabel-format":{title:"x Label Format",type:"string",description:"A function that accepts Date objects and formats them for display as x-axis labels. Overrides the default formatter chosen by the automatic labeller or the xLabels option. function (x) { return x.toString(); }"},"ylabel-format":{title:"y Label Format",type:"string",description:"A function that accepts y-values and formats them for display as y-axis labels. function (y) { return y.toString() + 'km'; }"},goals:{title:"Goals",type:"string",description:"A list of y-values to draw as horizontal 'goal' lines on the chart. goals: [1.0, -1.0]"},"goal-stroke-width":{title:"Goal Stroke Width",type:"number",description:"Width, in pixels, of the goal lines."},"goal-line-colors":{title:"Goal Line Colors",type:"string",description:"Array of color values to use for the goal line colors. If you list fewer colors here than you have lines in goals, then the values will be cycled."},events:{title:"Events",type:"string",description:"A list of x-values to draw as vertical 'event' lines on the chart. events: ['2012-01-01', '2012-02-01']"},"event-stroke-width":{title:"Event Stroke Width",type:"number",description:"Width, in pixels, of the event lines."},"event-line-colors":{title:"Event Line Colors",type:"string",description:"Array of color values to use for the event line colors. If you list fewer colors here than you have lines in events, then the values will be cycled."},"continuous-line":{title:"Continous Line",type:"string",description:"When set to false (the default), all null and undefined values in a data series will be ignored and lines will be drawn spanning them. When set to true, null values will break the line and undefined values will be spanned. Note that in v0.5.0, this setting will be removed and the behaviour will be to break lines at null values."},axes:{title:"Axes",type:"string",description:"Set to false to disable drawing the x and y axes."},grid:{title:"Grid",type:"string",description:"Set to false to disable drawing the horizontal grid lines."},"grid-text-color":{title:"Grid Text Color",type:"string",description:"Set the color of the axis labels (default: #888)."},"grid-text-size":{title:"Grid Text Size",type:"number",description:"Set the point size of the axis labels (default: 12)."},"grid-text-family":{title:"Grid Text Family",type:"string",description:"Set the font family of the axis labels (default: sans-serif)."},"grid-text-weight":{title:"Grid Text Weight",type:"string",description:"Set the font weight of the axis labels (default: normal)."},"fill-opacity":{title:"fill Opacity",type:"number",description:"Change the opacity of the area fill color. Accepts values between 0.0 (for completely transparent) and 1.0 (for completely opaque)."},resize:{title:"Resize",type:"string",default:"true",description:"Set to true to enable automatic resizing when the containing element resizes. (default: false). This has a significant performance impact, so is disabled by default."},"behave-like-line":{title:"Behave Like Line",type:"string",description:"Set to true to overlay the areas on top of each other instead of stacking them."},"date-format":{title:"Date Format",type:"string",description:"A function that accepts millisecond timestamps and formats them for display as chart labels. default is function (x) { return new Date(x).toString() }."},api:{title:"Api",type:"string",description:"Name of the api to get data."},"on-format-data":{title:"Format Data",type:"string",description:"Callback function to be called after data is returned from backend."},transport:{title:"Transport",type:"string",enum:["wss","https"],description:"Method used to call api (can take 'http' or 'wss')."},"msg-tag":{title:"Message Tag",type:"string",description:"Subscribe to socket messages with tag name."},"api-params":{title:"Api Params",type:"string",description:"Api parameters.","x-schema-form":{placeholder:"Ex: {'id' : '599865'}"}}},required:["xkey","ykeys"]}},{name:"line",label:"Line Chart",class:"scriptr-chart",show:!0,defaults:{type:"line",xkey:"y",ykeys:'["a", "b"]',labels:'["Serie A", "Serie B"]',colors:'[ "#FCC717", "#38B9D6"]',transport:"wss",api:"UIComponents/dashboard/frontend/examples/chart/getChartData","msg-tag":"chart"},box:{sizeX:2,sizeY:2,minSizeX:1,minSizeY:1},imgSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAlCAYAAADBa/A+AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkMyODMxQTMyRTIzRjExRTZCN0M2QjYwOTU2Q0U5QzZDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkMyODMxQTMzRTIzRjExRTZCN0M2QjYwOTU2Q0U5QzZDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QzI4MzFBMzBFMjNGMTFFNkI3QzZCNjA5NTZDRTlDNkMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QzI4MzFBMzFFMjNGMTFFNkI3QzZCNjA5NTZDRTlDNkMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7pqcU1AAACpElEQVR42uyXS2gUQRCGZ8d4kCQSiGIwHkQFCTm45ObBeEhAMIjxEgQfKMIelICIYdmTj5AETS4KCirk4SOHIHrygSGgkeAheFEUUXwcDSii6xMT16+kRppmZw7Znd0+pOGjumdqp/+tmq7uSeRyOc/VlnBBxIzXV4u5CRvhDnSs8DI/fUeC1AmboAK2wV656Iq4inwZdUXcI6Mvab2ST3G52n61x3jXTgYXfQcWQz2mHX7DRfOeC2lNwSK4QdTeOyOOqC1WcdLO2/fLHTlJZx08JWqTrok7FBa1WMWRsmpNW9j9RsxmyMK1kolj4l7MZ/hIvy3E7aDay6Q0WxJxWhoyWuWr4XS+qAZbVFhK44rcnDVuQMxxK8UirAruE7XnpRTXovYPvA0qP0wjMGml9FzBRyYeuh6zFh7wT79F+C3HSCSWyZaE7zDX5LQxCOtgFp5A0z93z1uFz+y8I8fDO3TCW/CYcWWE+1kVNg4jcoHJH2I2wBndCZrUt1bxCknrAcNPItgc8ie2Y3aCRDaFqP9HbPrf4TDdZ9YxqbJQcTPWuBchayxhNcaqyyDkXcizTsAv7V/C7828xTGppCioU3fhFSQ1vWb96oeVMBX1kiPmOkbey3r6qYK+IRAwhNkH93jYFsZL6Q/DDnU5BV+hWyOSxO9F7B84usomddJGJn2t1+U3XdBnRX4An65i1iQ/4ihzQYc9gTBNTQ6k6vdYP6sqdsEMe+eOSmWHl/m2H223rfFU7N+tRG211rUl0EqUJiJS36YLRj5Qrprlo+jitMCOwVYYZbJd5Tzs+YawTj3miLAvcKTcHxe+sQD6dXuRJuMPTojTY84P43qWlM45IQ4hcrzZrTuArNA93kJbaPG0RDqdrnFVnBz4Prkqznc5rX8FGAAWXa+WqoxqjwAAAABJRU5ErkJggg==",form:[{type:"tabs",tabs:[{title:"Data",items:["transport","msg-tag","api","api-params","data"]},{title:"Dimensions",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["xkey","ykeys","units","ymin","ymax"]},{type:"section",htmlClass:"col-xs-6",items:["goals","goal-stroke-width","events","event-stroke-width"]}]}]},{title:"Colors and Fonts",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["colors","goal-line-colors","point-fill-colors"]},{type:"section",htmlClass:"col-xs-6",items:["point-stroke-colors","event-line-colors","fill-opacity"]}]}]},{title:"Chart behaviour",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:[{type:"radios-inline",key:"axes",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{key:"resize",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{type:"radios-inline",key:"grid",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{type:"radios-inline",key:"parse-time",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{type:"radios-inline",key:"smooth",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]}]},{type:"section",htmlClass:"col-xs-6",items:[{type:"radios-inline",key:"continuous-line",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},"hide-hover","behave-like-line"]}]}]},{title:"Labels",items:["labels","xlabels","xlabel-angle","post-units","pre-units"]},{title:"Box Properties",items:["boxLabel"]}]}],schema:{type:"object",title:"Schema",properties:{boxLabel:{title:"Box Label",type:"string",description:"Define box title"},data:{title:"Data",type:"string",description:"Data series in case of static data.","x-schema-form":{type:"textarea",placeholder:"[{ y: '2006', a: 100, b: 90 },{ y: '2007', a: 75,  b: 65 }, { y: '2008', a: 50,  b: 40 }]"}},xkey:{title:"x Key",type:"string",description:"The name of the data record attribute that contains x-values."},ykeys:{title:"y Keys",type:"string",description:"A list of names of data record attributes that contain y-values."},labels:{title:"Labels",type:"string",description:"Labels for the ykeys -- will be displayed when you hover over the chart."},colors:{title:"Colors",type:"string",description:"Specify the color of each graph successively."},"line-width":{title:"Line Width",type:"number",description:"Width of the series lines, in pixels."},"point-size":{title:"Point Size",type:"number",description:"Diameter of the series points, in pixels."},"point-fill-colors":{title:"Point Fill Colors",type:"string",description:"Colors for the series points. By default uses the same values as lineColors."},"point-stroke-colors":{title:"Point Stroke Colors",type:"string",description:"Colors for the outlines of the series points. (#ffffff by default)."},ymax:{title:"y Maximum Value",type:"string",description:"Max. bound for Y-values. Alternatively, set this to 'auto' to compute automatically, or 'auto [num]' to automatically compute and ensure that the max y-value is at least [num]."},ymin:{title:"y Minimum Value",type:"string",description:"Min. bound for Y-values. Alternatively, set this to 'auto' to compute automatically, or 'auto [num]' to automatically compute and ensure that the min y-value is at most [num]. You can use this to create graphs with false origins."},smooth:{title:"Smooth",type:"string",description:"Set to false to disable line smoothing."},"hide-hover":{title:"Hide Hover",type:"string",description:"Set to false to always show a hover legend. Set to true or 'auto' to only show the hover legend when the mouse cursor is over the chart. Set to 'always' to never show a hover legend."},"hover-callback":{title:"Hover Callback",type:"string",description:"Provide a function on this option to generate custom hover legends. The function will be called with the index of the row under the hover legend, the options object passed to the constructor as arguments, a string containing the default generated hover legend content HTML, and an object containing the original data for the row as passed in the data option. hoverCallback: function (index, options, content, row) {return 'sin(' + row.x + ')='+ row.y}"},"parse-time":{title:"Parse Time",type:"string",description:"Set to false to skip time/date parsing for X values, instead treating them as an equally-spaced series."},units:{title:"Units",type:"number",description:"Width of the series lines, in pixels."},"post-units":{title:"Post Units",type:"string",description:"Set to a string value (eg: '%') to add a label suffix all y-labels."},"pre-units":{title:"Pre Units",type:"string",description:""},xlabels:{title:"x Labels",type:"string",description:"Sets the x axis labelling interval. By default the interval will be automatically computed. The following are valid interval strings. 'decade', 'year', 'month', 'week', 'day', 'hour', '30min', '15min', '10min', '5min', 'minute', '30sec', '15sec', '10sec', '5sec', 'second'"},"xlabel-angle":{title:"x Label Angle",type:"string",description:"The angle in degrees from horizontal to draw x-axis labels."},"xlabel-format":{title:"x Label Format",type:"string",description:"A function that accepts Date objects and formats them for display as x-axis labels. Overrides the default formatter chosen by the automatic labeller or the xLabels option. function (x) { return x.toString(); }"},"ylabel-format":{title:"y Label Format",type:"string",description:"A function that accepts y-values and formats them for display as y-axis labels. function (y) { return y.toString() + 'km'; }"},goals:{title:"Goals",type:"string",description:"A list of y-values to draw as horizontal 'goal' lines on the chart. goals: [1.0, -1.0]"},"goal-stroke-width":{title:"Goal Stroke Width",type:"number",description:"Width, in pixels, of the goal lines."},"goal-line-colors":{title:"Goal Line Colors",type:"string",
description:"Array of color values to use for the goal line colors. If you list fewer colors here than you have lines in goals, then the values will be cycled."},events:{title:"Events",type:"string",description:"A list of x-values to draw as vertical 'event' lines on the chart. events: ['2012-01-01', '2012-02-01']"},"event-stroke-width":{title:"Event Stroke Width",type:"number",description:"Width, in pixels, of the event lines."},"event-line-colors":{title:"Event Line Colors",type:"string",description:"Array of color values to use for the event line colors. If you list fewer colors here than you have lines in events, then the values will be cycled."},"continuous-line":{title:"Continous Line",type:"string",description:"When set to false (the default), all null and undefined values in a data series will be ignored and lines will be drawn spanning them. When set to true, null values will break the line and undefined values will be spanned. Note that in v0.5.0, this setting will be removed and the behaviour will be to break lines at null values."},axes:{title:"Axes",type:"string",description:"Set to false to disable drawing the x and y axes."},grid:{title:"Grid",type:"string",description:"Set to false to disable drawing the horizontal grid lines."},"grid-text-color":{title:"Grid Text Color",type:"string",description:"Set the color of the axis labels (default: #888)."},"grid-text-size":{title:"Grid Text Size",type:"number",description:"Set the point size of the axis labels (default: 12)."},"grid-text-family":{title:"Grid Text Family",type:"string",description:"Set the font family of the axis labels (default: sans-serif)."},"grid-text-weight":{title:"Grid Text Weight",type:"string",description:"Set the font weight of the axis labels (default: normal)."},"fill-opacity":{title:"Fill Opacity",type:"number",description:"Change the opacity of the area fill color. Accepts values between 0.0 (for completely transparent) and 1.0 (for completely opaque)."},resize:{title:"Resize",type:"string",default:"true",description:"Set to true to enable automatic resizing when the containing element resizes. (default: false). This has a significant performance impact, so is disabled by default."},"behave-like-line":{title:"Behave Like Line",type:"string",description:"Set to true to overlay the areas on top of each other instead of stacking them."},"date-format":{title:"Date Format",type:"string",description:"A function that accepts millisecond timestamps and formats them for display as chart labels. default is function (x) { return new Date(x).toString() }."},api:{title:"Api",type:"string",description:"Name of the api to get data."},"on-format-data":{title:"Format Data",type:"string",description:"Callback function to be called after data is returned from backend."},transport:{title:"Transport",type:"string",enum:["wss","https"],description:"Method used to call api (can take 'http' or 'wss')."},"msg-tag":{title:"Message Tag",type:"string",description:"Subscribe to socket messages with tag name."},"api-params":{title:"Api Params",type:"string",description:"Api parameters.","x-schema-form":{placeholder:"Ex: {'id' : '599865'}"}}},required:["xkey","ykeys","labels"]}},{name:"donut",label:"Donut Chart",class:"scriptr-chart",show:!0,defaults:{type:"donut",transport:"wss",data:'[{label: "Drillers", value: 50}, {label: "Cranes",value: 20 }, {label: "Blasters", value: 30 }]',"msg-tag":"donut","background-color":"#eee","label-color":"ff0000","parse-time":"false"},box:{sizeX:2,sizeY:2,minSizeX:1,minSizeY:1},imgSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAlCAYAAADBa/A+AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RTkzNjBBNzJFMkQ2MTFFNkIzQ0Y4MTdBRTNEODBCRUMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RTkzNjBBNzFFMkQ2MTFFNkIzQ0Y4MTdBRTNEODBCRUMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QzI4MzFBMzJFMjNGMTFFNkI3QzZCNjA5NTZDRTlDNkMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QzI4MzFBMzNFMjNGMTFFNkI3QzZCNjA5NTZDRTlDNkMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4tt2jHAAAD40lEQVR42rSYXUgVQRTH773eyjAsTZM+VCjsiwpEKTXJtEgf9C0iCiqi6Is+yMc+1J7qwQKxFPShCCnRIKJMibLMUktDgqwQEiFKQ8yiLM28/Y+ONq67e2b3rgf+nKs7u/vbMzNnzozb5/O53G63ywkbaog4AFcMDUJd0HuoCXoA1XsTu4dVnzXCZQcuoabNA7cCWgqFQjOhsvrg1OPwOQa3fYRKoAJA9qnAeS0A0RdsgfZA6VCIpgkXlUVQHpSNCNMHFAJyyOwGjyIYQb2CqqHtOmBk/YrfGQxdguoAGWXW0MtABcFdhna7nLdEqAWAGYhgi6XIAYy6odECWL8NwDDoEQDjlOEAthDuMbTKwosGbUaQurlar4s9OmCz4KqgJRZfQhOiFnoItUK/LUawHIBeLnKF0BobEejD2HkCbYZi8fdsMatvqyYE6Jj8jwl5DlHLgLtvAahHRKuBJk5j+spBg+ScBHcdWsw87wcUjY/rnZCEARaAC2+hGAWoDugUdMsISAcwVHz4WqZpLuDytHCUv24ovIeWp2xAWZ6dAvAlE8FPUGRAQtewPOaOKDw/B1CH7ICNJFV0F9wuptkCKGV8QiBq0XDJzE2VgDrnb+YF4DO4O0yzTfJsTWca/9TOJD+tWGHmjsNtYBoXIWqfHYSrZZL2MhmOWwnKnVxU0bWUoNtNmsyT4SLNkist0FOw8HebXJsuVyWhJg070aW+KYA7Az01uPaBLZmkyDlurflZVL63GU3AuIr/cMMm5VOYa2qsfmxW6tgXKMIj1fdGFoM8GOgkVfPWfTSM1qlOiHZmcG50OGpU9pvtqnpluCbmYYcdhjuqUFiMw1UzjbPQtckOdWkmXBLT7LUMR+sdtwJcA+BcP8FoX1KquIKMwiGP0WwtYm6gMqcKgCF+gFEJH8E0/TNW8Mrpg+C+MTdSodgCwPWK+90gKdoHxQkBZ3fjK0t79Mr0k3D5isGgsucK7dIQ+QEN1HK4baKSoV6JLSy5SAt9MxTF7WcB1zjprESU6nUKA1a2AXFg8xWaJsr8cE0bemYaAFfDPxdnK3p2D2CZY2clE1YFROAv3A5mUdbaDLFbSxEfFa7Thkqys3gxbRn3GjznlzbFTFqyANgJR/TfHc5tp9EzqQC8id8X9HIprnWwO34A0thIE2ucU0bvKgNguNi5VUnXCgB2VfmsBIBUw8WJPalTNp+2BACh4bMTekFg0Am9xuzhoZgkNBZyxS7erg2Jg8XzIq+yh4fKJ5uAnCMg9zOVs57ViL3uG9UbbB27iiPXJLFji3eNHr9S1g+UIkRj9Z1IIRWAarMaZuL6J8AAXG5blin5AbwAAAAASUVORK5CYII=",form:[{type:"tabs",tabs:[{title:"Data",items:["transport","msg-tag","api","api-params","data"]},{title:"Colors",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["colors","label-color"]},{type:"section",htmlClass:"col-xs-6",items:["background-color"]}]}]},{title:"Chart behaviour",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:[{key:"resize",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]}]},{type:"section",htmlClass:"col-xs-6",items:["donut-formatter"]}]}]},{title:"Box Properties",items:["boxLabel"]}]}],schema:{type:"object",title:"Schema",properties:{boxLabel:{title:"Box Label",type:"string",description:"Define box title"},data:{title:"Data",type:"string",style:"control-label",description:"Data series in case of static data.","x-schema-form":{style:"control-label",type:"textarea",placeholder:"[{ y: '2006', a: 100, b: 90 },{ y: '2007', a: 75,  b: 65 }, { y: '2008', a: 50,  b: 40 }]"}},colors:{title:"Colors",type:"string",description:"Specify the color of each graph successively."},"label-color":{title:"Donut Label Color",type:"string",description:"Donut label color."},"background-color":{title:"Donut Background Color",type:"string",description:"Donut background color."},"donut-formatter":{title:"Donut Formatter",type:"string",description:"Can either be a string for a filter name (eg. 'currency') or a reference to a scope function."},resize:{title:"Resize",type:"string",default:"true",description:"Set to true to enable automatic resizing when the containing element resizes. (default: false). This has a significant performance impact, so is disabled by default."},api:{title:"Api",type:"string",description:"Name of the api to get data."},"on-format-data":{title:"Format Data",type:"string",description:"Callback function to be called after data is returned from backend."},transport:{title:"Transport",type:"string",enum:["wss","https"],description:"Method used to call api (can take 'http' or 'wss')."},"msg-tag":{title:"Message Tag",type:"string",description:"Subscribe to socket messages with tag name."},"api-params":{title:"Api Params",type:"string",description:"Api parameters.","x-schema-form":{type:"textarea",placeholder:"Ex: {'id' : '599865'}"}}},required:[]}},{name:"gauge",label:"Gauge",class:"scriptr-gauge",show:!0,defaults:{transport:"wss","msg-tag":"gauge",api:"UIComponents/dashboard/frontend/examples/gauge/getGaugeVal",width:100,"height-unit":"%",height:100},box:{sizeX:1,sizeY:1,minSizeX:1,minSizeY:1},imgCls:"gauge-img",imgSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEoAAAAlCAYAAADlcn/+AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0MzNkM2FlMS1hYTk2LWIyNGItYmFkMy1lYWZiODRkM2YzODIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzVERDhERDJFN0I2MTFFNjk4RTNDOTE2MDRFNDhGQjgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzVERDhERDFFN0I2MTFFNjk4RTNDOTE2MDRFNDhGQjgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MmM0MmUzZDAtZTJjNC1iMjQyLWJjZTItYThjYWQ3ZjkxMzAyIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQzM2QzYWUxLWFhOTYtYjI0Yi1iYWQzLWVhZmI4NGQzZjM4MiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PlCd/HQAAAY7SURBVHja3FprbFRFFL67C6RVKVKtCVpJxVhk2XatBa0/fGIT5CEGw8O0kFaw8VH9YcQqGhSQBg0agqkC1RaRJkBiVOKDtIAvok1FKrXdauMDVMLD2iJYWh7u+p3ut2a83d1u5263207y9czemTt37jfnnDlzbm1GjEtNTU0SRA6QCbiANCAVSAGSTN1PAn8AvwMHgUagAajNzc09Gct522JEziSIe4BpgBuwWxzSCxwAPgJ2gLS6QUsUyLkcYhFQAIzr5/f4GdgEVIC0w4OCKBDkhFgKzAOGxdiyzwPbgFIQ5olLokCQ+JpSYH6sTDpM8QFbZcFA2MG4IAoEjYAooRYlGPFVurh4q0HYuQEjCiSJY64CJhrxXZqAPJB1QHcAuwWSHoGoGwQkGZxjHeccG42iqZUDC43BWd4CiqBdZ/uNKJA0SuIW4BZjcJfPgFkg66+om96z1V+Ngdg1BEiScqt/3WtSokpUzs6mUbu8STu2e0c7jKFTJgMf0kqsEwWSRtDcJn3nS8wCWfVDjKz36Xcta9Qbqrn1M1kdwFHgGOuxMsONlpw5tKkY4tVgbRm2zvq59vYsi7HNbmAv8D3QAud6xrR5SACbDkwAbgamANf2E2HFeH5Zn4kCSW7GSSHVcrytqzHP3ubqw9Yp2lIBbMakfrBwlpTQZDFwSRSJknDhhlBBqS2MX9ofSTCZbuvy5NvbnL2QdRxYJfEXJtIZpbPlhRAP8OiUEiWyRMuzgh13Qvmokkgj7hZfgnOLN9njC304fU34xMPXRYskKRirA1hLU9wQxQj+qYg0CtokWYDmvh5wg2iWZCbz8TLVsfDI0LC7IN6OgjnKQXqCOesQTKNKdbIAJs0SFc6OFUnUsI8hrufGYKUkkIPQGgVtEkfZaCWrkGnr/GCOvX0hJt4+EIERNOtSCSTFMVsYRtbbpSb/zBq11GLqpanBl7hgoEiiZrVCTLeoWTZy0VOjoE2S4z5k6KdvxSdl106d+Fs8hNzQrLHcuXV9lqSV0wI5eFWjFlkgSVQ1P15Iomb9CrHAwhDCxf3BTK/AwqCvg6RqI84KHbyV0KHgf6YHs5vMKFynSDCZDqJ65HYqKytl/KmG/3uefNwUjdtaWFjYaOonZl8EXAX8AqxHn6NK+0MQS7jKZWh7UWm7iBtQJa4vD2KCyfRXukHpjfLdMKBRsyywvioEScMh9hj+j5TFPHY8A3yLttlKv/GG/2Pmc+wjsgHXr2b7bQxaZUF+BFbj2jzlUY8DstOVhdCqtmDbfR/K3arpTdMcRFa9PFgDVleOAZ8CrYx2HwT+BBymib/CF22in2zm6r/M9jmUD8uwrN9HEpNJ1Bo8rzXMPMv5bJ3SzY0dZicm4dYcpALaFO5YskKiXDEVYAO1S0oyX3Q0TbO7L/rIgXklf09HuyTVruDvI2g/xPoYyie5O63t7bjDdJFOccv/S4jN5xj6X2M2h2vEi/nwsm1AtoQOwEw2vUfpUp69n7Je2XWczE1JuQzjBPoeR13IepTEXoDf8oUlEajCc5tDzLVE4x3lmTnyJ1M3uIQ2RZIqEY3dx93nYuAd+izDFOMEgtQTyjUxyXdZXwOsY12uPW34/9ulihvRcprhNyDNHUSrPBaC0Ew7V1Wn7I6w3zkeKQKrfC/wAuv/KP2Gm2T3vdCOnZDLgJuAGUwk7qHPk9TNfJrnYmYrE0mYlTmbi0uIStO8eW8knfCiHcAMQMzoCV5eglWXzOVhk/YYpm38CMcQ8xopJKD+GImTjWSjstBfou1r+qyMENP5QvNd04SoVM2be1VjkJEHqKZ9TKlfyfgn8A9hUyhvV0zRo/o7wIvxrmEYsQy/z1JjpTjowxwmTVVLs+a7pg6zEIi19EKSrOqb4pRRlzDhtLgKNp8SXyIvirZNqIuWrEDdSVPq3lEZYpjLSsZTW/h7H8OK2ZyTBLm1OnMOU1LsRs9/B4ykdMCRn+mlz0/c3RzUlpnM9cjheS5IOKFkLD7nPIooP6F5mcm/Tu4Fnsf955XdrIF+bzvN+aUQYYIk5XS+7iTphgWnIvBNpwHRjnEMEIsYvI2lg/7Ph9HchEzJgd8B3Cn3Bxl2JHfMbepz5JhBAuUQnIFr4Q7nf+u88L8CDAAOWg6lD3k11QAAAABJRU5ErkJggg==",form:[{type:"tabs",tabs:[{title:"Data",items:["transport","msg-tag","api","api-params"]},{title:"Dimensions",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["width","gauge-value","shadow-size"]},{type:"section",htmlClass:"col-xs-6",items:["height","min","max"]}]}]},{title:"Colours",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["label-font-color","value-font-color","custom-sectors"]},{type:"section",htmlClass:"col-xs-6",items:["gauge-color","shadow-opacity"]}]}]},{title:"Gauge behaviour",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:[{key:"hide-min-max",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{key:"hide-value",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{key:"hide-inner-shadow",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},{key:"show-inner-shadow",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]}]},{type:"section",htmlClass:"col-xs-6",items:["start-animation-type","refresh-animation-type",{key:"counter",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]}]}]}]},{title:"Labels",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["label"]}]}]},{title:"Box Properties",items:["boxLabel"]}]}],schema:{type:"object",title:"Schema",properties:{boxLabel:{title:"Box Label",type:"string",description:"Define box title"},"gauge-value":{title:"Gauge Value",type:"string",description:"Sets the value of the gauge."},"custom-sectors":{title:"Custom Sectors",type:"string",description:"Array of objects with color, hi, lo attributes.","x-schema-form":{type:"textarea",placeholder:"Ex: [{color : '#A3CD3B', lo : 0, hi : 25}, { color : '#FF4A43', lo : 25, hi : 100 }]"}},"value-font-color":{title:"Value Font Color",type:"string",description:"Color of the value text."},min:{title:"Minimum Value",type:"number",description:"Minimum value."},max:{title:"Maximum Value",type:"number",description:"Maximum value."},"hide-min-max":{title:"Hide min-max",type:"string",description:"Hide min and max values."},"hide-value":{title:"Hide Value",type:"string",description:"Hide value text."},"hide-inner-shadow":{title:"Hide inner-shadow",type:"string",description:"Hide inner shadow."},"gauge-color":{title:"Gauge Color",type:"string",description:"Background color of gauge element."},"show-inner-shadow":{title:"Show inner-shadow",type:"string",description:"True to display inner shadow."},"shadow-size":{title:"Shadow Size",type:"string",description:"Inner shadow size."},"shadow-opacity":{title:"Shadow Opacity",type:"string",description:"Shadow opacity, values 0 ~ 1."},label:{title:"Label",type:"string",description:"Text to show below value."},"label-font-color":{title:"Label Font Color",type:"string",description:"Color of label under the value."},"start-animation-type":{title:"Start Animation Type",type:"string",description:"Type of initial animation (linear, >, <, <>, bounce)."},"refresh-animation-type":{title:"Refresh Animation Type",type:"string",description:"Type of refresh animation (linear, >, <, <>, bounce)."},counter:{title:"Counter",type:"string",description:"Increase numbers one by one."},width:{title:"Gauge Width",type:"number",description:"Width as %."},height:{title:"Gauge height",type:"number",description:"Height as px."},api:{title:"Api",type:"string",description:"Name of the api to get data."},"on-format-data":{title:"Format Data",type:"string",description:"Callback function to be called after data is returned from backend."},transport:{title:"Transport",type:"string",enum:["wss","https"],description:"Method used to call api (can take 'http' or 'wss')."},"msg-tag":{title:"Message Tag",type:"string",description:"Subscribe to socket messages with tag name."},"api-params":{title:"Api Params",type:"string",description:"Api parameters.","x-schema-form":{placeholder:"Ex: {'id' : '599865'}"}}},required:[]}},{name:"speedometer",label:"Speedometer",class:"scriptr-speedometer",show:!0,defaults:{transport:"wss","msg-tag":"speedometer",api:"UIComponents/dashboard/frontend/examples/speedometer/getSpeedometerVal","gauge-radius":"70"},box:{sizeX:1,sizeY:1,minSizeX:1,minSizeY:1},imgSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAlCAYAAADWSWD3AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0MzNkM2FlMS1hYTk2LWIyNGItYmFkMy1lYWZiODRkM2YzODIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6M0U0RkEwQjZFN0I3MTFFNjhGMEZBOEREMDEzMkY1NjciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6M0U0RkEwQjVFN0I3MTFFNjhGMEZBOEREMDEzMkY1NjciIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MmM0MmUzZDAtZTJjNC1iMjQyLWJjZTItYThjYWQ3ZjkxMzAyIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQzM2QzYWUxLWFhOTYtYjI0Yi1iYWQzLWVhZmI4NGQzZjM4MiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Poq6iGcAAAS7SURBVHjazFhpbA1RFJ432qq1VUtUqK1FSGiUJ2jkWZ7YfpTG1ibULvHDnhA/hPhhDz+IJVWaWqKpNhEifRJCEY9KNSpEiiIhllL6qkFT3+FMnd4+rTfz+p6TfDkz584955szZ87cuTbNgrhcrhZQw4CxwFCgP9ADiAB0oAb4DLwEHgP3gCvAXafTWWM2rs0k2SFQC4C5QBcTLt4Cp4EMkL/frKRBNgFqCzBV859cADaDfKFfSYNsJNR2YKmXObVAMXCNdWnrgsL40Bev936PiV5TlZhQBFtfYDAwhrU3H0eADSD/yTJpEB4BdQbopQw9Aw4DJxHolRy4m7woCSoXmD4sJz1P8dcdKhVYBvRWfD4H5sDf7cY46U0QJufXJWHd81Vr5S5247AfnO9QCTcldD3No/nkh/wJoTjXOa7vpDFxBVQWECrMB9pnX8oNv/fQ3uHQmVFWCpnmkx/yR37FEMXL4vj/Xh6YMA/qhDBROlKRoVw8+p44fsQtLAGP3+fWBR/UKgu5RQ6AjzLEnE6lBrQSl85HzMwmM43JlMF0YXoPOIgwnVAAKHq81PbGm0z0eJ6/g/1p7N/B8QxJZz5/J40LOkKdBULY5KH2BoduZR6RTkTAfDOMeV4i+5H17uZ26mET8TjLvLyXBwYzoNKEaYaR4UAKl8o5YToOHgsakMaFo6EK/nTO2v3OiRNXaUESV37+Ps1mWylMiSB+Qy2PrXU1U1mlRR7LGYcXxhEMwhSX4hMPb/xsnOXhUHV1i1aUgx46hd9kKo+1qMNnASBLH5s99FGijvXVPvhi9dCByeISO7J9x8j0EjFQigtnUfMHTgFJvHILhPTgeBS3H3jMJj5i/BdPG7IcBv0OaM8D63E3u8XdxyHLTwJYGvXigd86qF18SsvczpTpkYJwLX8FZXt6Esh69hIvi3lpzHOkzgt4Q4qR5TfafyTMp1iYxhLpeGG4auGxDgBszcRd8orX+ftvyEMLjgcCB5uJuOTVn0hHC8NTC46p8S+n9QIviPwpklc0dQ+jyLU2rhtHwkpfvhYXbMeLUe1DiVB76sMta56ZFSD7Cae/GOP8W9+Ybh7nqLq2HCIvblFRuVSZvw+o9iHeLSadwsHNEifSm//w+tJglffDOPGMG+Gk9blAhYkSMYSIZ5oslQrJw+OwTxBjNZTpcmMboCYqsi0y88lC7V1Wzol4FIinwO9HH3o1lWwdD9fyOW3F8Add+UzG+eHDUKaYJwElID7FgutYcVymK+3E7oc3vcCLjToU/arFms2HOH5ApG8Kg4O3uqzIo7/Yw3hHytcfAhv/hhni1pU67MQbKlbkQyNjESb80b5LV3kfOr7tL6g7CeNii6Qb2966acLfQnFcAr6lxno6QwzMxCOJsfAyurm/q5LHPxS+lEYn3o3SJE+DdKboyaG8yWili6yGSuad0WzOVjK3Ml9kI9Ba7AwcV39sN0FtE+vqMXgUBUH7sXW5BkEVia82bcFtUH9s92u/N7+Nm8nAxIggEW7Ji/8Q8XLvbLBZg7uohFqhNPSDQUp0mrLOp1/Acq87TBg4D3VImKYFibRck+eAl2wU9Vd5LLRBQ91jMpdMMOQor/Ta8ZZCPfkpwABkBJ8fXRbYywAAAABJRU5ErkJggg==",form:[{type:"tabs",tabs:[{title:"Data",items:["transport","msg-tag","api","api-params","needle-val"]},{title:"Dimensions",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["gauge-radius","min-value","max-value"]},{type:"section",htmlClass:"col-xs-6",items:["tick-space-maj-val","tick-space-min-val"]}]}]},{title:"Colours",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["tick-col-maj","tick-col-min","outer-edge-col","needle-col"]},{type:"section",htmlClass:"col-xs-6",items:["inner-col","units-label-col","tick-label-col","pivot-col","default-fonts"]}]}]},{title:"Labels",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["gauge-units"]}]}]},{title:"Box Properties",items:["boxLabel"]}]}],schema:{type:"object",title:"Schema",properties:{boxLabel:{title:"Box Label",type:"string",description:"Define box title"},"gauge-radius":{title:"Gauge Radius",type:"string",description:"Sets the size of the gauge."},"min-value":{title:"Minimum Value",type:"number",description:"Minimum value to be shown in gauge scale."},"max-value":{title:"Maximum Value",type:"number",description:"Maximum value to be shown in gauge scale."},"needle-val":{title:"Needle Value",type:"number",description:"Sets the value of needle to be pointed."},"tick-space-min-val":{title:"Minor Tick Space Value",type:"number",description:"Space between the major ticks of the gauge."},"tick-space-maj-val":{title:"Major Tick Space Value",type:"number",description:"Space between the sub ticks of the gauge."},"gauge-units":{title:"Gauge Units",type:"string",description:"Unit of the values to be shown(ex. Kmph,%)."},"tick-col-maj":{title:"Tick Major Color",type:"string",description:"Sets color of the major tick."},"tick-col-min":{title:"Tick Minor Color",type:"string",description:"Sets color of the sub tick."},"outer-edge-col":{title:"Outer Edge color",type:"string",description:"Sets the color of outer circle of the gauge."},"pivot-col":{title:"Pivot color",type:"string",description:"Sets color of the pivot."},"inner-col":{title:"Inner color",type:"string",description:"Sets color of inner body of the gauge."},"units-label-col":{title:"Units Label Colour",type:"string",description:"Sets color of units label."},"tick-label-col":{title:"Tick Label Colour",type:"string",description:"Sets color of labels of the ticks."},"needle-col":{title:"Needle Colour",type:"string",description:"Sets color of the needle."},"default-fonts":{title:"Default Fonts",type:"string",description:"Sets the default fonts in gauge."},api:{title:"Api",type:"string",description:"Name of the api to get data."},"on-format-data":{title:"Format Data",type:"string",description:"Callback function to be called after data is returned from backend."},transport:{title:"Transport",type:"string",enum:["wss","https"],description:"Method used to call api (can take 'http' or 'wss')."},"msg-tag":{title:"Message Tag",type:"string",description:"Subscribe to socket messages with tag name."},"api-params":{title:"Api Params",type:"string",description:"Api parameters.","x-schema-form":{placeholder:"Ex: {'id' : '599865'}"}}},required:[]}},{name:"thermometer",label:"Thermometer",class:"scriptr-thermometer",show:!1,defaults:{transport:"wss","msg-tag":"thermometer",api:"UIComponents/dashboard/frontend/examples/thermometer/getThermometerValue",height:220},box:{sizeX:1,sizeY:1,minSizeX:1,minSizeY:1,maxSizeX:1,maxSizeY:1},imgCls:"",imgSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAlCAYAAADWSWD3AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0MzNkM2FlMS1hYTk2LWIyNGItYmFkMy1lYWZiODRkM2YzODIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzgzODQxMTZGNzg1MTFFNjk0MTBGMzg4MzJCMkQ5QjciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzgzODQxMTVGNzg1MTFFNjk0MTBGMzg4MzJCMkQ5QjciIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjQxMWY2ZjctYTU5Zi00NzRiLTgwOWMtZGQ5ZTNhNTZiMTk0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQzM2QzYWUxLWFhOTYtYjI0Yi1iYWQzLWVhZmI4NGQzZjM4MiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PoB6+/wAAAIXSURBVHja7JnNK0RRGMbv+I6QLIyIZvgjSInFlPKRyCR2WFiQj60k/wBGEmWyVcNuFjQrC1aytlCiRKFZmRDG8/LcuqahyT3NvVf3rafnfLzn3t/czjm3e8aTTCa1v4bH4/lWj8ViHbA5qAmSCx9DC4FA4NCYZ+aen/dVBQ3gSdhqmrR3KAjwPVtBA9gPO4Py2fVKz6M/QPUAf1QBnaOpiX4DcAgqp0Jsq4RaFd1LGXQN/RyaxRNNiKTMNokqu0HrcQ3Yd73C8rXieyiHzkrkqb4gFqUPtszqjCOgMSUuYL2GH6G508OFdqGzv3s0wrZYHXPK7iFvwDZ393Ch/8tCPOkf9cI6WN2POwH6trig3Zt42WZ5qNAJ0wPAN+nK7kJ0oR0GXZpBTp1toPGaHoaNZJC6yFxroQFRDVtn9R6aT5M2zz6JTYyptfpJT0Fl2tcRWHfFxs4TPGzoD6PtWfqYU6Liu9EsdA/9AHCn8F3Ib+iXcoR9ByljLINuoMsBY/MPi62OfYcpYyyD1se/QL+9sQuZI/FmNfQlXY52jwwLzhj37GtKGWMZdJTeFx8flEOaoPZ1QqqHlIPs60sZYxn0EiQ7Rq7AAO6Oi6+T8rMtypwnjjEVps+nse+OGj5kZb5GOB0kWqABAn9+6OIbMmyXQ3UBX4OKfkiVJzwhwFKx098XsrVNQ12Qj80XnBorAL7Sc81CfwgwAJTrtj6gcXkiAAAAAElFTkSuQmCC",form:[{type:"tabs",tabs:[{title:"Data",items:["percent","transport","msg-tag","api","api-params"]},{title:"Box Properties",items:["height",{key:"size",type:"radios-inline",titleMap:[{value:"large",name:"large"},{value:"small",name:"small"}]}]},{title:"Box Properties",items:["boxLabel"]}]}],schema:{type:"object",title:"Schema",properties:{percent:{title:"Thermometer Value",type:"string",description:"Thermometer Value (0 to 100)"},size:{title:"Thermometer Size",type:"string",description:"Set the size of Thermometer (small)."},height:{title:"Height",type:"number",description:"Set the height of Thermometer."},api:{title:"Api",type:"string",description:"Name of the api to get data."},"on-format-data":{title:"Format Data",type:"string",description:"Callback function to be called after data is returned from backend."},transport:{title:"Transport",type:"string",enum:["wss","https"],description:"Method used to call api (can take 'http' or 'wss')."},"msg-tag":{title:"Message Tag",type:"string",description:"Subscribe to socket messages with tag name."},"api-params":{title:"Api Params",type:"string",description:"Api parameters.","x-schema-form":{placeholder:"Ex: {'id' : '599865'}"}}},required:[]}},{name:"odometer",label:"Odometer",class:"scriptr-odometer",show:!0,defaults:{transport:"wss","msg-tag":"odometer",api:"UIComponents/dashboard/frontend/examples/odometer/getOdometerVal",animation:"count",duration:"1000",size:"4"},box:{sizeX:2,sizeY:1,minSizeX:1,minSizeY:1,maxSizeY:2},imgCls:"odometer-img",imgSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGsAAAAlCAYAAABF7RcQAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjA0MzlBMzQxRTdCNjExRTZCREVBQURCRkE1MTI4QTFBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjA0MzlBMzQyRTdCNjExRTZCREVBQURCRkE1MTI4QTFBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDQzOUEzM0ZFN0I2MTFFNkJERUFBREJGQTUxMjhBMUEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDQzOUEzNDBFN0I2MTFFNkJERUFBREJGQTUxMjhBMUEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz75PGiuAAAGNUlEQVR42uxbeWwUVRj/bbdb2i6lpaUnUEoPrAWkHBYhCBpvjPGKMWAkROMZE9SoqPEPE0X/gMQrIWokYEwwKonGKK0RQyReGKRQKCAKrQiLtF2uHtuybdfv62M7+2Z3dneOLWwzv2RC38yb2Xnf77vf4AisxXIA6+nIho3LFWfoeMJBZPEfObY8Ln/CUmyikgbjU2wZJA9Sw87ULLelooWj9UDvGWVcfhuQPl4ZL14LjC1RxjtfB7wHNSSfAdz8kXyuYSUw6FfGBzZLl23LshK9p+Wxu0R77ljVNX+XTFQE2GRZie6T8jivRntubrXq3v9iPt4my0qcPaIiazrgcEaem18b/d64Yla8YDMuqqN/JwJp44QJ97QBHfuA9j1AIGBu4UXzgIwJ8jnvIeB8q8mcaho9ez4JMRiHvpHjkBm07xXrdlx8eFoWUHwN4PlZJTuSWd6Vqnv3JICsjDzgimVAyYLI18tuATqPAY3vAV0eY4vOKgVmr6JFqwz/4CfGyRo3BZh2H1AwWz5/fId1ZF04L4Qe+hvV99O5RopJPWLMRNasgKItEL/f0WyxG8wlbVj0hjZRocKuexlwjTWwYlrEjIfCiTKKzEKg9il67zXhRCUCR76Wx+mk3FevpmSjWHigmY8BE2bIc1q2kkUOWGxZrDkpqbJGsOlzJsPuhY/hl6SUtnwp8Ofn+hY7+Tp6TpUFUrtIOj/PMYKh+cxh4MRPwMRFyrmcSmDJusjzO48D/3xvsM6Khq4TQNOHwKwniYTPgNbvZI2oeZDc4K3KuGCOPrJY86qXyQvJmmRQahQ7MgtkojjjYoULVapEoHkTud1S4WGigV1j47sxU3bj2eDJncCPz0U23aPfqlxQvr5nV1NB7nKLvwcuUFH4sTmhHftB8QjN9KwdLwDnjibeuvp9VBC/KaxMCz4v8PsaYQCGOxjxwNeu4SY7w5Q7/nhIdceka5XxX1sou2w3J7RTfwCHvxAegAU4kmAF+e01WtMS4YrHlQkr51rM8yu9Uz29U6/JdpMZuAt1F3oivDhFfAmCM76WBop7uebehy3/768uXd0VGAT+3S6OYCZooqSxNvKyFumsHYZQfruoPYYWSIvZtyGu7CjpYLL2tI6s7DJRYwXBMefYtjjqNip8K+9Wxq0NIxNXkhDWuMEx2cCcp+XWCseKeIrN6SsBZ5oSdA9vGX1SdmWS55hMpuEUjYK+s5eIrNRMUQBn5MsZY0t97HsL58mFavNGssje0UNSsNtTXCcrsvcAcOhT3R7EHFlsEXWr5VqobTewd33sVJDvnb5CGZ9rFUSF9szGqDaxM4uU610nDWvoiICz27nPKqVIKLgbv/BVYP9GJflIKFks7HnPi+o8CG7i7n6Hirz+OArgbNGKCY1581+Jfs+Um8TBaPpA9PUuR3BriWWTmh49A575sFC4tsYEJhhDru8leb+GLWrXuviIGs3gWmrW4+FE+TpEg1vdEpv5SGTrs8Syhoh6kSyqQjnn+YVc3/ujM93Wi+IFsrcZ6qRsEx0UrrsmLQauehTDXXdOzirupBi22WKyIhHl7xb7WJV3Rb6n2yMq9khdkK0PxAjQlLRc/7Yy5i0SLpbjBW+L8BGKYD03nOTMlefwJqCOFlAYKu6Qx9xy2r9JieHsurMoM5y6VJlTegMV71/G7LLoI4vrqFCihtJStzZRwZZPJLJGApxtVt0TfU7VvfKYFcIoWbwhy0SEghve6mSLuyqlNyolC7vMgtqYctIXsxz2VwBRod6qZ49z+lD4PPZGp3bJ5+LYa9NnWf3dIlDqATc0DbdnBuTf8+tsxhp5X7+Jhq/a63Q0ac9tp2slC0NcdpnFZHG80BMzzII/7dq+yvj9I/2+vH8WCq4dtaD+PMFdlKDU3YZG7ZilUjav9lyfN7zuivEZhE2WtUWWyqX2RHHRPbpzApushHLniN7BCIvR/Tpj1oWuTlvKGhgccEsK7u/pRoprcHjsPZCJrFKFhUDAR/KMzEB6TgrFNLeUTHW3d6rSfMmv8v/PCtgsJAdsN5hkZHlsMSQFPByzuEH3Fh1TbXlYof4uF5xpaRSDBtDf16f94QVlHy63GylOJwb9firGfVE+0mih45n/BRgA2iDYoASd98UAAAAASUVORK5CYII=",form:[{type:"tabs",tabs:[{title:"Data",items:["transport","msg-tag","api","api-params","odometer-value"]},{title:"Odometer behaviour",items:["duration","animation","size"]},{title:"Box Properties",items:["boxLabel"]}]}],schema:{type:"object",title:"Schema",properties:{boxLabel:{title:"Box Label",type:"string",description:"Define box title"},"odometer-value":{title:"Odometer Value",type:"number",description:"Set a static value for Odometer."},duration:{title:"Duration",type:"number",description:"Change how long the javascript expects the CSS animation to take."},size:{title:"Size",type:"number",description:"Odometer size in em. Recommended size between 0 & 5."},animation:{title:"Animation",type:"string",description:"Count is a simpler animation method which just increments the value,use it when you're looking for something more subtle."},api:{title:"Api",type:"string",description:"Name of the api to get data."},"on-format-data":{title:"Format Data",type:"string",description:"Callback function to be called after data is returned from backend."},transport:{title:"Transport",type:"string",enum:["wss","https"],description:"Method used to call api (can take 'http' or 'wss')."},"msg-tag":{title:"Message Tag",type:"string",description:"Subscribe to socket messages with tag name."},"api-params":{title:"Api Params",type:"string",description:"Api parameters.","x-schema-form":{placeholder:"Ex: {'id' : '599865'}"}}},required:[]}},{name:"progressbar",label:"ProgressBar",class:"scriptr-progressbar",show:!1,defaults:{transport:"wss","msg-tag":"progressbar",api:"UIComponents/dashboard/frontend/examples/progressBar/getProgressBarVal",value:"20",animate:"true",title:"Progress bar",class:"progress-striped active"},box:{sizeX:2,sizeY:1,minSizeX:1,minSizeY:1,maxSizeY:1},imgCls:"",
imgSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAlCAYAAADWSWD3AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0MzNkM2FlMS1hYTk2LWIyNGItYmFkMy1lYWZiODRkM2YzODIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzIwMzYyNENGNzg1MTFFNkEwRUNDNjZDRjJCNDk3Q0YiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzIwMzYyNEJGNzg1MTFFNkEwRUNDNjZDRjJCNDk3Q0YiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjQxMWY2ZjctYTU5Zi00NzRiLTgwOWMtZGQ5ZTNhNTZiMTk0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQzM2QzYWUxLWFhOTYtYjI0Yi1iYWQzLWVhZmI4NGQzZjM4MiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PnTLjfAAAAHGSURBVHja7JffK0NhGMe3mRWLbBEXLshc0eHOnbh2Q4miSC1kSpblbyBEWpRtRbI7/Aei3LhQfl65k/zI7581NN+3nlOvpzPjzup569Pznn3O8+57zt5zavZkMmnLtOGwZeCQ0BJaQktoCS2hJbSEltBphrM7etCCGgYJ7fMsUMrOfQNXNM8FRczfgweau0HhH/0deEyzvsoQcFDg+iW/UWaC4zhr+ARN5HzgiHl1MQb5SnD8g/dZ+AtQRb4CHDJ/CapVTpXXqe4wTj4xbVdkvx0lxJpGcc4GzcdAg+Y+QBv8KR1P0eKp/ATz76AV/pyOx0GjRf8Z5Ut829P4wECJscBxNEyS70AJMh+C3yTfgzLIfFDznShDzA/Db2s3jK8/Ar9l+SCiwYOyTvvJHHvAT74WJcIWXMaC0+TrUOaZj8HPkq9BWWB+ET5MXv38UYv1Z6zeHtloUPtwBZRr7hY0o+kV3ov5GsjR/C7opS8sQVkFLs3vgAHyqfr7yReQd7Mb1sd2gnoeXHZM1NtjDhSzC3oGNzTPA17m1UU90TwfeJi/Bi+/7Ld6m+jeHOqmBOzyb1xCS2gJLaEltISW0BJaQv+P8SXAADiWmlqqypMfAAAAAElFTkSuQmCC",form:[{type:"tabs",tabs:[{title:"Data",items:["value","transport","msg-tag","api","api-params"]},{title:"Progress bar behaviour",items:["stacked","class","type","max",{key:"animate",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]}]},{title:"Box Properties",items:["boxLabel"]}]}],schema:{type:"object",title:"Schema",properties:{boxLabel:{title:"Box Label",type:"string",description:"Define box title"},value:{title:"Progressbar Value",type:"number",description:"The current value of progress bar."},animate:{title:"Animate",type:"string",description:"Whether bars use transitions to achieve the width change."},class:{title:"Class",type:"string",description:"Can take 'progress-striped' or 'progress-striped active'"},type:{title:"Type",type:"string",description:"Bootstrap style type. Possible values are 'success', 'info', 'warning', and, 'danger' to use Bootstrap's pre-existing styling, or any desired custom suffix."},max:{title:"Total number of bars",type:"string",description:"A number that specifies the total value of bars that is required."},stacked:{title:"Stacked",type:"string",description:"Array of objects representing multiple stacked progress bars.","x-schema-form":{type:"textarea",placeholder:"[{value : 50, type : 'success', title : 'bar1'},{value : 70, type : 'warning', title : 'bar2'}]"}},api:{title:"Api",type:"string",description:"Name of the api to get data."},"on-format-data":{title:"Format Data",type:"string",description:"Callback function to be called after data is returned from backend."},transport:{title:"Transport",type:"string",enum:["wss","https"],description:"Method used to call api (can take 'http' or 'wss')."},"msg-tag":{title:"Message Tag",type:"string",description:"Subscribe to socket messages with tag name."},"api-params":{title:"Api Params",type:"string",description:"Api parameters.","x-schema-form":{placeholder:"Ex: {'id' : '599865'}"}}},required:[]}},{name:"map",label:"Map",class:"scriptr-map",show:!0,defaults:{transport:"wss","clustered-view":"true","cluster-zoom":8,api:"UIComponents/dashboard/frontend/examples/map/simulatorData","sources-info":"{'simulator': {'label': 'Carvoyant'}}","msg-tag":"everyone-main-live"},box:{sizeX:2,sizeY:2,minSizeX:2,minSizeY:2},imgCls:"",imgSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAlCAYAAADWSWD3AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0MzNkM2FlMS1hYTk2LWIyNGItYmFkMy1lYWZiODRkM2YzODIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MkU0NTdGMTJGMUU1MTFFNkJDRDE5REMyQjEzM0VEQzYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MkU0NTdGMTFGMUU1MTFFNkJDRDE5REMyQjEzM0VEQzYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjQxMWY2ZjctYTU5Zi00NzRiLTgwOWMtZGQ5ZTNhNTZiMTk0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQzM2QzYWUxLWFhOTYtYjI0Yi1iYWQzLWVhZmI4NGQzZjM4MiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Phrv2GYAAAP1SURBVHja7JlrSFRBFMfnqklWW5qP0NK2KCgqo6DACntpRQ8MAwtK+tBLiygiqCiIDAyjD/Uhn5VFH8oUKYuCMiUqS4JKgojIrdQv+SDDtJe72//ocZu97euuXlfBgT9nd+48fvfMzNmZWcVqtQo5KYoi+jr9qYpIgNkDLYZCoG9QFZQ3bEHjLWf11Gw2Rj2hARsIkw9tdVGMoDcDvt1TaD+hb7rgBphSElSEF/SYRTdoQKyESbUbxeFGoYxdJZSgqeria8jbnrYdoKOX99p5x5gh/CJ3/Rv6phvCXLsfH8xy+as+9TTSUpuHQ9fZAXflhacIvwi7gZiH0RnhM2h0boCxASjByxxHgZAEdVaEz6ARCdpg2mwZlp+OC1o67L5BzdEP0sI1Q6NSFjSpD9jv2eZvcwkzqZgxr6X0CC/7HbYU/VdA8501/F+cjilPpwwrd5oD3a1PzLV4QomOpsOkQKdMI0sXwlbYOgpbL/yNJzEMmAGdrcJSlyksX67I1TdObk+ugX3Xk1GXkKNoiR5UeDXrE2DyYC8CvskBaCTMJg5vczi7HiqEXtAC6/b2TdHZXIYeRwthbpOjBqUP5GFoDFQpL2JvQ56RPAedAGAxbDb0Bkrm2LpcNc1olOIw1JewIA/J3u6aIvCyg3QU5TuFyG1BH2XuoF0txGPQTqiGvwcy5FPoK3QZSpTaIK8eJOdjRHbwgqxkD7pKj6FiLYvFlafb0XkBbAHePg52N89XgvfnMo3QOfoZRtlaJ+3sg1ZAoxxFRygNL2fVAu1RyAPQM4jm7ATosBTOKD/TBTB5uwHmgJPHx/H8rdawpClO00KEsvDRpDFu04jdVmXTNDvtTSzVe5cnp208nQSPVCpexjygoQHYxNtUmr/p+P7R27b609MCPx7VMEtgy3vTTr9CI50B8A8+zQwa6FCKONDEwQQtpBg/qKDFEPQQ9BD0wIAOw84x1tvKAf1FCcgpfKCgNJ726ch7wke6EmzEfg8IaEBRTF5Lew3eU6vPfItYZ1GWrtDyfAYNgHEw2yG6oYlWPX5IBwtoFpehsnRtcASi41lDb6DnovNgDFurBth49uoG2thJj6gNOnpno733nFeE8hl81qQ68bzGYtz14+wKoSfRbco16Dw6eyXBvYaZLbqvaelEs4WPYzNV7b+kutB11O9w88IzuA1qz+DqCsERNJ3p0qBpqrLVfBKnG5bnDE175CDV+e8XQdICA2i1F1PLwE5IB3SsR9B0qY6KCh/j6c2TVNOohQ+3BlVbJo4EhYBt6Yu14fU/AXiBKL5KoGuBKPXNFnSHYe97ehOlO7QEH8Bep/9OaP5RiMoH6Ge9QqYz6L8CDAAxBVRygRGqnQAAAABJRU5ErkJggg==",form:[{type:"tabs",tabs:[{title:"Data",items:["transport","msg-tag","api","api-params"]},{title:"Map behaviour",items:[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:[{key:"clustered-view",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},"cluster-zoom","clustered-zoom-max","detailed-zoom-min"]},{type:"section",htmlClass:"col-xs-6",items:[{key:"marker-info-window",type:"radios-inline",titleMap:[{value:"true",name:"True"},{value:"false",name:"False"}]},"focused-marker-zoom","path-stroke-opacity","path-stroke-weight","max-asset-points"]}]},{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-12",items:["sources-info","default-center"]}]}]},{title:"Box Properties",items:["boxLabel"]},{title:"Help",items:[{type:"help",helpvalue:'<div class="alert alert-info"><h4>Map data format is as below, where: <br/> <br/>"253831": asset id, <br/> <br/> "550488": asset trip id & contains an array  of asset trip points data,  <br/> <br/>  "order" : [ "550488" ]\r\n   contains the asset\'s trips order <br/> <br/>and "source" : "simulator" is the asset source name.  </h4></div> <pre class="map-help-settings">{"253831" : {\r\n      "550488" : [\r\n            {\r\n               "lat" : {"value": "40.859140000000004"},\r\n               "long" : {"value": "-72.67528"},\r\n               "speed" : {\r\n                  "value" : "6",\r\n                  "description" : "Maximum Speed Recorded (since the previous reading)"\r\n               },\r\n               "fuel" : {\r\n                  "value" : "57",\r\n                  "description" : "Percentage of Fuel Remaining"\r\n               },\r\n               "fuelRate" : {\r\n                  "value" : "0.9",\r\n                  "description" : "Rate of Fuel Consumption"\r\n               },\r\n               "rpm" : {\r\n                  "value" : "2181",\r\n                  "description" : "Engine Speed"\r\n               },\r\n               "coolantTemperature" : {\r\n                  "value" : "104",\r\n                  "description" : "Engine Temperature"\r\n               },\r\n               "voltage" : {\r\n                  "value" : "13.38",\r\n                  "description" : "Battery Voltage"\r\n               },\r\n               "status" : {\r\n\t               "value" : "RUNNING"\r\n               },\r\n               "address" : {},\r\n               "mileage" : {\r\n\t               "value" : "54849"\r\n               },\r\n               "make" : {\r\n\t               "value" : "Jeep"\r\n               },\r\n               "model" : {\r\n\t               "value" : "Wrangler"\r\n               },\r\n               "snr" : {\r\n                  "value" : "11",\r\n                  "description" : "Signal to Noise Ratio"\r\n               },\r\n               "rssi" : {\r\n                  "value" : "46",\r\n                  "description" : "Received Signal Strength Indicator"\r\n               }\r\n            },\r\n            {\r\n               "lat" : {"value": "40.859790000000004"},\r\n               "long" : {"value": "-72.67344"},\r\n               "speed" : {\r\n                  "value" : "11",\r\n                  "description" : "Maximum Speed Recorded (since the previous reading)"\r\n               },\r\n               "fuel" : {\r\n                  "value" : "23",\r\n                  "description" : "Percentage of Fuel Remaining"\r\n               },\r\n               "fuelRate" : {\r\n                  "value" : "1.6",\r\n                  "description" : "Rate of Fuel Consumption"\r\n               },\r\n               "rpm" : {\r\n                  "value" : "1498",\r\n                  "description" : "Engine Speed"\r\n               },\r\n               "coolantTemperature" : {\r\n                  "value" : "87",\r\n                  "description" : "Engine Temperature"\r\n               },\r\n               "voltage" : {\r\n                  "value" : "13.68",\r\n                  "description" : "Battery Voltage"\r\n               },\r\n               "status" : {\r\n\t               "value" : "RUNNING"\r\n               },\r\n               "address" : {},\r\n               "mileage" : {\r\n\t               "value" : "54849"\r\n               },\r\n               "make" : {\r\n\t               "value" : "Jeep"\r\n               },\r\n               "model" : {\r\n\t               "value" : "Wrangler"\r\n               },\r\n               "snr" : {\r\n                  "value" : "10",\r\n                  "description" : "Signal to Noise Ratio"\r\n               },\r\n               "rssi" : {\r\n                  "value" : "49",\r\n                  "description" : "Received Signal Strength Indicator"\r\n               }\r\n            },\r\n            {\r\n               "lat" : {"value": "40.86056000000001"},\r\n               "long" : {"value": "-72.67124000000001"},\r\n               "speed" : {\r\n                  "value" : "15",\r\n                  "description" : "Maximum Speed Recorded (since the previous reading)"\r\n               },\r\n               "fuel" : {\r\n                  "value" : "32",\r\n                  "description" : "Percentage of Fuel Remaining"\r\n               },\r\n               "fuelRate" : {\r\n                  "value" : "1.8",\r\n                  "description" : "Rate of Fuel Consumption"\r\n               },\r\n               "rpm" : {\r\n                  "value" : "1323",\r\n                  "description" : "Engine Speed"\r\n               },\r\n               "coolantTemperature" : {\r\n                  "value" : "91",\r\n                  "description" : "Engine Temperature"\r\n               },\r\n               "voltage" : {\r\n                  "value" : "14.30",\r\n                  "description" : "Battery Voltage"\r\n               },\r\n               "status" : {\r\n\t               "value" : "RUNNING"\r\n               },\r\n               "address" : {},\r\n               "mileage" : {\r\n\t               "value" : "54849"\r\n               },\r\n               "make" : {\r\n\t               "value" : "Jeep"\r\n               },\r\n               "model" : {\r\n\t               "value" : "Wrangler"\r\n               },\r\n               "snr" : {\r\n                  "value" : "13",\r\n                  "description" : "Signal to Noise Ratio"\r\n               },\r\n               "rssi" : {\r\n                  "value" : "57",\r\n                  "description" : "Received Signal Strength Indicator"\r\n               }\r\n            } ],\r\n      "source" : "simulator",\r\n      "order" : [ "550488" ]\r\n   } }</pre>'}]}]}],schema:{type:"object",title:"Schema",properties:{boxLabel:{title:"Box Label",type:"string",description:"Define box title"},"clustered-view":{title:"Clustered View",type:"string",description:"Render map with a cluster view for conglomerate markers or not."},"cluster-zoom":{title:"Cluster Zoom",type:"number",description:"The initial map zoom level when clustered view is true.",default:3},"clustered-zoom-max":{title:"Cluster Zoom Max",type:"number",description:"Map max zoom level with a rendered cluster view.",default:11},"focused-marker-zoom":{title:"Focused marker zoom",type:"number",description:"Zoom level when focusing on a single marker. If not set it is equal to detailed map zoom + 3."},"detailed-zoom-min":{title:"Detailed map initial zoom",type:"number",description:"Ignored when clustered view true.",default:0},"max-asset-points":{title:"Max marker trip points",type:"string",description:"Number of tracked trip points per marker, do not set if infinite.",default:100},"marker-info-window":{title:"Show marker info",type:"string",description:"Whether to show an info window on marker click.",default:"true"},"default-center":{title:"Default Map Center",type:"string",description:"Default map center before marker(s) is/are loaded. String format lat,long.",default:"40.7053111,-74.258188"},"sources-info":{title:"Sources Info",type:"string",description:"Sources Info.ex: {'stream': {'label': 'Carvoyant', 'url': 'http://icons.iconarchive.com/icons/graphicloads/flat-finance/32/lock-icon.png'}}","x-schema-form":{type:"textarea",placeholder:"{'stream': {'label': 'Carvoyant', 'url': 'http://icons.iconarchive.com/icons/graphicloads/flat-finance/32/lock-icon.png'}}"}},"path-stroke-opacity":{title:"Path stroke opacity",type:"number",description:"Default marker trail opacity.",default:0},"path-stroke-weight":{title:"Path stroke weight",type:"number",description:"Default marker trail stroke weight.",default:1},api:{title:"Api",type:"string",description:"Api to load map data. ex:  UIComponents/dashboard/frontend/examples/map/locksData"},transport:{title:"Transport",type:"string",enum:["wss"],description:"Method used to call api (can take only 'wss')."},"msg-tag":{title:"Message Tag",type:"string",description:"Subscribe to socket messages with tag name."},"api-params":{title:"Api Params",type:"string",description:"Api parameters.","x-schema-form":{placeholder:"Ex: {'id' : '599865'}"}}},required:[]}}]}),angular.module("DashboardBuilder").service("scriptrService",["httpClient","$cookies",function(a,b){this.saveScript=function(b,c){return a.post("UIComponents/dashboardBuilder/backend/api/saveDashboard",b)},this.getScript=function(b){return a.post("UIComponents/dashboardBuilder/backend/api/getDashboard",b)},this.getToken=function(){return b.get("token")||null}}]),angular.module("DashboardBuilder").component("dashboard",{bindings:{widgets:"<",dashboard:"<",treeSearchCriteria:"@",iconExpand:"@",iconCollapse:"@",loadTree:"<?",showTree:"<",custom:"<",devicesModel:"@"},templateUrl:"/UIComponents/dashboardBuilder/javascript/components/dashboard.html",controller:["$scope","$timeout","$sce","$window","httpClient","wsClient","$cookies","config","$uibModal","scriptrService","$route","$routeParams","$q","_",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){this.wsClient=f;var o=this;o.acls,this.$onInit=function(){o.custom=void 0!==this.custom&&this.custom,o.showTree=void 0===this.showTree||this.showTree,o.loading=!0,o.showPanelMsg=!1,o.users=[{code:"anonymous",icon:"fa fa-group"}],o.onACLChange=function(a){o.acls=a.join(";");var b=m.defer();return o.saveDashboard(null,null,!0).then(function(a,c){console.log("success"),b.resolve(a,c)},function(a){console.log("reject",a),b.reject(a)}),b.promise},e.get("UIComponents/dashboardBuilder/backend/api/loadScripts",{}).then(function(a,b){a&&a.documents?(o.customDashboards=a.documents,o.loading=!1,0==a.documents.length&&(o.noDashboards=!0)):(console.log("No data found"),o.loading=!1)},function(a){o.loading=!1,console.log("reject published promise",a)}),this.urlParams=[],this.transport=angular.copy(h.transport),this.frmGlobalOptions={destroyStrategy:"remove",formDefaults:{feedback:!0}},this.initializeDashboard(),this.schema=angular.copy(h.script.schema),this.form=angular.copy(h.script.form),this.model={},this.isInIde=!!l.scriptrIdeRef;var b=l.scriptName;b&&this.openEditor(b),this.slickConfig={enabled:!0,autoplay:!0,draggable:!1,autoplaySpeed:3e3,method:{},event:{beforeChange:function(a,b,c,d){},afterChange:function(a,b,c,d){}}},this.gridsterOptions={defaultSizeY:200,defaultSizeX:200,minRows:1,maxRows:100,columns:5,colWidth:"auto",rowHeight:"match",margins:[10,10],defaultSizeX:2,defaultSizeY:1,mobileBreakPoint:1024,minColumns:1,resizable:{enabled:!0,handle:".my-class",start:function(a,b,c){},resize:function(a,b,c){},stop:function(b,c,d){console.log("End resize:",b,c,d),a.$broadcast("resize_widget",{wdg:c,element:d})}},draggable:{enabled:!0,handle:".my-class",start:function(a,b,c){},drag:function(a,b,c){},stop:function(b,c,d){console.log("End drag",b,c,d),a.$broadcast("drag_widget",{wdg:c,element:d})}}},this.widgetsConfig=h.widgets,this.dataLoaded=!0},this.$postLink=function(){var a=this;this.scriptrIdeRef=l.scriptrIdeRef,angular.element(d).on("message",function(b){var c=b.originalEvent.data;c[0]=="get_editor_save_data-"+a.scriptrIdeRef&&d.parent&&d.parent.postMessage(["editor_save-"+a.scriptrIdeRef,a.getEditorValue()],"*"),c[0]=="set_editor_load_data-"+a.scriptrIdeRef&&a.setEditorValue(JSON.parse(c[1]))}),d.parent&&d.parent.postMessage(["editor_loaded-"+this.scriptrIdeRef],"*")},this.trustSrc=function(a){return c.trustAsResourceUrl(a)},this.addCustomDashboard=function(){this.showDashboard=!0,o.savedScript=null,this.switchStatus=!0,this.model.scriptName=null,o.isEdit=!1,this.dashboard.widgets=[]},this.showCustomDashboard=function(a){this.showDashboard=!0,this.scriptName=a,this.switchStatus=!1,this.dashboardScriptName="/"+this.scriptName,this.openEditor(a)},this.homeCallback=function(a){a&&a.documents?(o.customDashboards=a.documents,0==a.documents.length?o.noDashboards=!0:o.noDashboards=!1):console.log("No data found")},this.deleteDashboard=function(a){console.log(name,a);var b={path:a,name:name};o=this,e.get("UIComponents/dashboardBuilder/backend/api/deleteDashboard",b).then(function(a,b){console.log("success")},function(a){console.log("reject published promise",a)})},this.deleteDashboardPopUp=function(a,b){i.open({controller:"PopupCont",templateUrl:"/UIComponents/dashboardBuilder/javascript/components/deletePopup.html",resolve:{dashboard:function(){return o},path:function(){return a},name:function(){return b}}})},this.renameDashboard=function(a,b){var c=b.split("/");if(c[c.length-1]!=a){console.log(name,b);var d={path:b,newName:a},f=this;e.get("UIComponents/dashboardBuilder/backend/api/renameDashboard",d).then(function(a,b){"success"==a?(console.log("success"),f.showMsg("success","The dashboard has been renamed successfully.")):a&&a.errorDetail?f.showMsg("danger",a.errorDetail):f.showMsg("danger","An error has occured")},function(a){f.showMsg("danger",a.data.response.metadata.errorDetail),console.log("reject published promise",a)})}},this.viewDasboard=function(){this.savedScript?d.open("/"+this.savedScript):o.showAlert("danger","Please save your dashboard before viewing it")},this.closeAlert=function(){this.show=!1},this.showAlert=function(a,b){this.closeAlert(),this.message={type:a,content:b},this.show=!0},this.closeMsg=function(){this.showPanelMsg=!1},this.showMsg=function(a,b){this.closeMsg(),this.message={type:a,content:b},this.showPanelMsg=!0},this.getEditorValue=function(){var a={};a.items=angular.copy(this.dashboard.widgets),a.urlParams=angular.copy(this.urlParams),a.transport=angular.copy(this.transport.defaults);var b=this.unsafe_tags(document.querySelector("#handlebar-template").innerHTML),c=Handlebars.compile(b)(a),d={};return d.content=c,d.pluginData=JSON.stringify({wdg:a.items,urlParams:a.urlParams}),d},this.setEditorValue=function(a){a&&(this.widgets=a.wdg,this.urlParams=a.urlParams,this.dashboard.widgets=this.widgets)},this.notifyDashboardChange=function(){d.parent&&d.parent.postMessage(["editor_data_changed-"+this.scriptrIdeRef,this.getEditorValue()],"*")},this.openEditor=function(a){this.model={scriptName:a};var b=this;j.getScript(this.model).then(function(c,d){b.postLoadScript(a,c)},function(a){console.error("reject",a)})},this.selectBranch=function(a){console.log("Clicked branch data",a);var b=a.label;if(a[b]&&a[b].widget&&a[b].widget.type){var c=a[b].widget,d=n.findWhere(h.widgets,{name:c.type});console.log("Widget is",d),d||(d=h.defaultWidget);var e=0;c["default-api-params"]&&(e=Object.keys(c["default-api-params"]).length);var f={};n.each(c,function(a,b){f[b]=a});var g="{";if(c["api-params-name"]&&n.each(c["api-params-name"],function(a,b){o.urlParams=o.urlParams.concat([a]),g+='"'+a+'": vm.'+a+(b<c["api-params-name"].length-1||e>0?",":"")}),c["default-api-params"]){var i=0;n.each(c["default-api-params"],function(a,b){o.urlParams=o.urlParams.concat([b]),g+='"'+b+'": "'+a+(i<e-1?'",':'"'),i++}),g+="}"}else g+="}";console.log("apiParamsOutput",g),f["api-params"]=g,o.dashboard.widgets.push({name:a.label,sizeX:d.box&&d.box.sizeX?d.box.sizeX:2,sizeY:d.box&&d.box.sizeY?d.box.sizeY:2,minSizeX:d.box&&d.box.minSizeX?d.box.minSizeX:2,maxSizeX:d.box&&d.box.maxSizeX?d.box.maxSizeX:null,minSizeY:d.box&&d.box.minSizeY?d.box.minSizeY:2,maxSizeY:d.box&&d.box.maxSizeY?d.box.maxSizeY:null,label:d.label,type:d.class,options:angular.extend(angular.copy(d.defaults),angular.copy(f)),schema:d.schema,form:d.form}),o.notifyDashboardChange()}},this.initializeDashboard=function(){this.dashboard={widgets:[]},this.widgets&&(this.dashboard.widgets=this.widgets)},this.clear=function(){this.dashboard.widgets=[],this.notifyDashboardChange()},this.logout=function(){$.scriptr.authorization({loginPage:login.loginTarget}).logout()},this.addWidget=function(a){"speedometer"==a.name&&(a.defaults["gauge-radius"]=70),this.dashboard.widgets.push({name:"New Widget",sizeX:a.box&&a.box.sizeX?a.box.sizeX:2,sizeY:a.box&&a.box.sizeY?a.box.sizeY:2,minSizeX:a.box&&a.box.minSizeX?a.box.minSizeX:2,maxSizeX:a.box&&a.box.maxSizeX?a.box.maxSizeX:null,minSizeY:a.box&&a.box.minSizeY?a.box.minSizeY:2,maxSizeY:a.box&&a.box.maxSizeY?a.box.maxSizeY:null,label:a.label,type:a.class,options:a.defaults,schema:a.schema,form:a.form}),this.notifyDashboardChange()},this.setTransportSettings=function(a){var b=this;i.open({animation:!0,component:"modalComponent",size:"lg",resolve:{widget:function(){return{label:b.transport.label,options:b.transport.defaults,schema:b.transport.schema,form:b.transport.form}}}}).result.then(function(a){console.log("modal-component transport settings data :",a,"submitted at: "+new Date),"cancel"!=a&&(b.transport.defaults.publishChannel!=a.publishChannel&&b.wsClient.updatePublishingChannel(a.publishChannel),b.transport.defaults.subscribeChannel!=a.subscribeChannel&&b.wsClient.updateSubscriptionChannel(a.subscribeChannel),b.transport.defaults=angular.copy(a),b.notifyDashboardChange())},function(){console.log("modal-component transport settings dismissed at: "+new Date)})},this.saveDashboard=function(b,c,d){console.log("Form submit",b);var e=this;if(a.$broadcast("schemaFormValidate"),b&&b.$valid||d){var f={};f.items=angular.copy(this.dashboard.widgets),f.urlParams=angular.copy(this.urlParams),f.token=j.getToken(),e.transport.defaults.redirectTarget=this.model.scriptName,f.transport=angular.copy(this.transport.defaults);var g=this.unsafe_tags(document.querySelector("#handlebar-template").innerHTML),h=Handlebars.compile(g)(f),i={};i.content=h,i.scriptName=this.model.scriptName,i.pluginData=JSON.stringify({wdg:f.items,urlParams:f.urlParams}),e.isEdit&&(i.update=!0),e.savedScript&&(i.previousScriptName=e.savedScript),i.custom=this.custom,i.acls=this.acls;var k=m.defer();return j.saveScript(i).then(function(a,b){console.log("resolve",a),"failure"==a.status?e.showAlert("danger",a.errorDetail):(e.isEdit=!0,e.savedScript=i.scriptName,e.showAlert("success","The dashboard has been saved successfully."),k.resolve(a,b))},function(a){e.showAlert("danger",a.data.response.metadata.errorDetail),console.log("reject",a.data.response.metadata.errorDetail),k.reject(a)}),k.promise}},this.setACLs=function(a){this.acls=a.ACL.read;var b=this.acls.split(";");this.users=[];for(var c=0;c<b.length;c++){var d={};d.code=b[c],this.users.push(d)}},this.postLoadScript=function(a,b){if(b){var c=b.userConfig,d=c.match(/\/\*#\*SCRIPTR_PLUGIN\*#\*(.*\n?.*)\*#\*#\*\//);if(c&&d){var e=JSON.parse(d[1]);e&&e.metadata&&"CodeMirrorArbitraryFile"==e.metadata.name?(this.widgets=JSON.parse(e.metadata.plugindata).wdg,this.urlParams=JSON.parse(e.metadata.plugindata).urlParams,this.dashboard.widgets=this.widgets,this.isEdit=!0,this.savedScript=a,this.setACLs(b)):(this.showAlert("danger","Invalid dashboard script. Pass another script."),console.error("Invalid dashboard script. Pass another script."))}else this.showAlert("danger","Invalid dashboard script. Pass another script."),console.error("Invalid dashboard script. Pass another script.")}else o.custom||(this.showAlert("danger","Invalid dashboard script. Pass another script."),console.error("Invalid dashboard script. Pass another script."));console.debug("resolve get script "+a+" :",b)},this.safe_tags=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},this.unsafe_tags=function(a){return a.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"')}}]}),angular.module("DashboardBuilder").component("box",{require:{parent:"^^dashboard"},bindings:{widget:"<"},templateUrl:"/UIComponents/dashboardBuilder/javascript/components/box.html",controller:["$scope","$compile","$element","$uibModal",function(a,b,c,d){var e=this;this.remove=function(a){this.parent.dashboard.widgets.splice(this.parent.dashboard.widgets.indexOf(a),1),this.parent.notifyDashboardChange()},this.$onInit=function(){var b=this;this.widget&&this.addWidget(this.widget),a.$on("gridster-item-initialized",function(a){console.log("gridster-item-initialized")}),a.$on("resize_widget",function(a,c){if(console.log("Widget resize",a,c),$(window).trigger("resize"),b.widget==c.element){if("scriptr-speedometer"==b.widget.type){var d=c.wdg.height(),f=c.wdg.width();c.element.options["gauge-radius"]=f>=d?d/2-20:f/2-20,b.updateWidget(c.element.options)}if("scriptr-grid"==b.widget.type){var d=c.wdg.height();c.element.options["grid-height"]=d-110,b.updateWidget(c.element.options)}}e.parent.notifyDashboardChange()}),a.$on("drag_widget",function(a,b){console.log("Widget dragged",a,b),$(window).trigger("resize")})},this.openSettings=function(){var b=this;d.open({animation:!0,component:"modalComponent",size:"lg",scope:a,resolve:{widget:function(){return b.widget}}}).result.then(function(a){"cancel"!=a&&b.updateWidget(a)},function(){console.info("modal-component for widget update dismissed at: "+new Date)})},this.addWidget=function(d){var e=this;this.chart=angular.element(document.createElement(d.type)),angular.forEach(d.options,function(a,b){e.chart.attr(b,a)},this);var f=b(this.chart)(a);angular.element(c.find(".box-content")).append(f),a.$watch("widget",function(){b(e.chart)(a)},!0)},this.updateWidget=function(c){var d=this;angular.forEach(c,function(a,b){d.chart.attr(b,a)},this);var e=angular.copy(c);this.parent.dashboard.widgets[this.parent.dashboard.widgets.indexOf(this.widget)].options=angular.copy(e),this.parent.notifyDashboardChange(),b(d.chart)(a)}}]}),angular.module("DashboardBuilder").component("modalComponent",{bindings:{resolve:"<",close:"&",dismiss:"&"},templateUrl:"/UIComponents/dashboardBuilder/javascript/components/myModalContent.html",controller:["$scope",function(a){this.$onInit=function(){this.widget=this.resolve.widget,a.$broadcast("schemaFormRedraw"),this.frmGlobalOptions={destroyStrategy:"remove",formDefaults:{feedback:!1}},this.widget&&(this.widget.schema&&(this.schema=angular.copy(this.widget.schema)),this.widget.form&&(this.form=angular.copy(this.widget.form)),this.widget.options&&(this.model=angular.copy(this.widget.options)))},this.onSubmit=function(b){a.$broadcast("schemaFormValidate"),console.log(this.model),b.$valid&&(this.close({$value:this.model}),console.log("component_form_parent",this.model))},this.onCancel=function(a){this.schema={},this.form={},this.model=angular.copy(this.widget.options),this.dismiss({$value:"cancel"}),console.log("Dissmissed")}}]}),angular.module("DashboardBuilder").component("sidetoolbar",{bindings:{},templateUrl:"/UIComponents/dashboardBuilder/javascript/components/sideToolbar.html",controller:["$scope","$mdSidenav",function(a,b){this.close=function(){b("left").close().then(function(){console.debug("close LEFT is done")})}}]}),angular.module("DashboardBuilder").controller("PopupCont",["$scope","$uibModalInstance",function(a,b){a.name=a.$resolve.name,a.close=function(){b.dismiss("cancel")},a.ondeleteDashboard=function(){this.$resolve.dashboard.deleteDashboard(this.$resolve.path),b.dismiss("cancel")}}]),angular.module("Thermometer",["angularThermometer"]),angular.module("Thermometer").component("scriptrThermometer",{bindings:{onLoad:"&onLoad",api:"@",percent:"@",size:"@",height:"@",transport:"@",msgTag:"@",apiParams:"<?",onFormatData:"&"},templateUrl:"/UIComponents/dashboard/frontend/components/thermometer/thermometer.html",controller:["httpClient","wsClient",function(a,b){var c=this;this.$onInit=function(){this.percent=this.percent?this.percent:0,this.transport=this.transport?this.transport:"wss",this.msgTag=this.msgTag?this.msgTag:null,d(this.transport)};var d=function(d){"wss"==d?b.onReady.then(function(){b.subscribe(c.msgTag,c.consumeData.bind(c)),c.api&&b.call(c.api,c.apiParams,c.msgTag).then(function(a,b){c.consumeData(a)},function(a){console.log("reject published promise",a),c.consumeData()})}):"https"==d&&c.api&&a.get(c.api,c.apiParams).then(function(a,b){c.consumeData(a)},function(a){console.log("reject published promise",a)})};this.consumeData=function(a,b){"function"==typeof this.onFormatData()&&(a=this.onFormatData()(a)),this.percent=a}}]}),angular.module("ProgressBar",["ngAnimate","ngSanitize","ui.bootstrap"]),angular.module("ProgressBar").component("scriptrProgressbar",{bindings:{onLoad:"&onLoad",value:"@",type:"@",max:"@",title:"@",class:"@",animate:"<?",stacked:"<?",api:"@",
transport:"@",msgTag:"@",apiParams:"<?",onFormatData:"&"},templateUrl:"/UIComponents/dashboard/frontend/components/progressBar/progressBar.html",controller:["httpClient","wsClient",function(a,b){var c=this;this.$onInit=function(){this.value=this.value?this.value:"0",this.transport=this.transport?this.transport:"wss",this.msgTag=this.msgTag?this.msgTag:null,d(this.transport)};var d=function(d){"wss"==d?b.onReady.then(function(){b.subscribe(c.msgTag,c.consumeData.bind(c)),c.api&&b.call(c.api,c.apiParams,c.msgTag).then(function(a,b){c.consumeData(a)},function(a){console.log("reject published promise",a),c.consumeData()})}):"https"==d&&c.api&&a.get(c.api,c.apiParams).then(function(a,b){c.consumeData(a)},function(a){console.log("reject published promise",a)})};this.consumeData=function(a,b){"function"==typeof c.onFormatData()&&(a=c.onFormatData()(a)),this.value=Math.round(a)}}]}),angular.module("Map",["ngMap"]),angular.module("Map").component("scriptrMap",{transclude:!0,bindings:{sourcesInfo:"<?",clusteredView:"<?",clusteredZoomMax:"<?",clusterZoom:"<?",detailedZoomMin:"<?",focusedMarkerZoom:"<?",pathStrokeOpacity:"@",pathStrokeWeight:"@",maxAssetPoints:"@",defaultCenter:"@",trackedAsset:"@",summaryIcons:"<?",assetsData:"<?",api:"@",apiParams:"@",msgTag:"@",onFormatData:"&",onSelectAsset:"&",geofenceManager:"@",apiGeofence:"<?",apiGeofenceParams:"<?",msgTagGeofence:"<?",markerInfoWindow:"@"},templateUrl:"/UIComponents/dashboard/frontend/components/map/map.html",controller:["$scope","$rootElement","$location","$sce","$compile","$timeout","$interval","$controller","NgMap","defaultConstants","wsClient",function(a,b,c,d,e,f,g,h,i,j,k){var l=this;l.$onInit=function(){var b=this;b.$wdgid=a.$id,b.pathStrokeOpacity=b.pathStrokeOpacity?b.pathStrokeOpacity:0,b.pathStrokeWeight=b.pathStrokeWeight?b.pathStrokeWeight:5,b.maxAssetPoints=b.maxAssetPoints?b.maxAssetPoints:100,b.defaultcenter=b.defaultcenter?b.defaultcenter:"40.7053111,-74.258188",b.trackedAsset=b.trackedAsset?b.trackedAsset:null,b.geofenceManager=!!b.geofenceManager&&b.geofenceManager,a.$parent.summaryIcons={},b.summaryIcons&&angular.forEach(b.summaryIcons,function(b,c){a.$parent.summaryIcons[c]=d.trustAsHtml(b)}),b.trackedAsset?(b.showDetailedMap=!0,b.clusteredView=!1):b.showDetaithisdMap=!1,b.clusteredView?(b.clusteredZoomMax||(b.clusteredZoomMax=11),b.detailedZoomMin=b.clusteredZoomMax<20?b.clusteredZoomMax+1:b.clusteredZoomMax,b.clusterZoom||(b.clusterZoom=3)):(b.detailedZoomMin||(b.detailedZoomMin=0),b.detailedmapzoom=b.detailedZoomMin),(!b.focusedMarkerZoom||b.clusteredView&&b.focusedMarkerZoom<b.clusteredZoomMax)&&(b.focusedMarkerZoom=b.detailedZoomMin<18?b.detailedZoomMin+3:b.detailedZoomMin),m(),b.sourcesInfo=b.sourcesInfo,b.markerInfoWindow=!b.markerInfoWindow||b.markerInfoWindow,a.$on("mapFoucsOnMarker",function(a,c){b.focusOnAsset(c)})};l.sources={},l.assets={},l.selectedAsset="all",l.markerClusterer=null,l._hiddenAssets={},l.assetsKeys=[],l.mapcenter=null,l.infoWindow=null,l.dynMarkers=[];var m=function(){k.onReady.then(function(){l.api&&(l.apiParams=l.apiParams?l.apiParams:{},k.call(l.api,l.apiParams).then(function(a,b){l.onFormatData&&"function"==typeof l.onFormatData()&&(a=l.onFormatData()(a)),l.processAssets(a),console.log("api call "+l.api+" response returned",a)},function(a){l.callError=JSON.stringify(error),console.log("api call "+l.apiParams+" reject call promise",a)})),l.msgTag&&k.subscribe(l.msgTag,l.processAssets)}),l.assetsData&&(console.log("static assets data",l.assetsData),l.processAssets(l.assetsData))};l.processAssets=function(a){var b=a,c=function(a){if(l.trackedAsset&&l.trackedAsset!=b)a.hasOwnProperty(l.trackedAsset)&&l.pushAssets(l.trackedAsset,a[l.trackedAsset]);else for(var b in a)a.hasOwnProperty(b)&&(console.log(b,a[b]),l.pushAssets(b,a[b]));l.renderAssets(),l.clusteredView&&!l.trackedAsset&&l.renderClusterer()};!l.clusteredView||l.markerClusterer||l.trackedAsset?c(b):i.getMap({id:"clustered-"+l.$wdgid}).then(function(a){l.markerClusterer||l.buildClusterer(a),c(b)})},l.buildClusterer=function(a){l.markerClusterer=new MarkerClusterer(a,l.dynMarkers,{maxZoom:l.clusteredZoomMax,imagePath:"https://cdn.rawgit.com/googlemaps/js-marker-clusterer/gh-pages/images/m",minimumClusterSize:-1,gridSize:50,averageCenter:!0})};var n=function(){l.selectedAsset="all",l.renderAssets()};l.renderAssets=function(){console.log("Render New Assets."),"all"==l.selectedAsset?l.showAllAssets():(l.displayedAssets={},l.displayedAssets[l.selectedAsset]=l.assets[l.selectedAsset])},l.renderClusterer=function(){console.log("Render clusterer."),l.markerClusterer.resetViewport(!0),l.markerClusterer.clearMarkers(),l.markerClusterer.addMarkers(l.dynMarkers,!1),l.markerClusterer.repaint()},l.showAllAssets=function(){l.displayedAssets=angular.copy(l.assets,{})},l.onClusteredZoomChanged=function(){l.trackedAsset||i.getMap({id:"clustered-"+l.$wdgid}).then(function(a){a.getZoom()>l.detailedZoomMin?(l.showDetailedMap=!0,l.mapcenter=a.getCenter(),l.detaileddmapzoom=l.detailedZoomMin):(l.showDetailedMap=!1,l.markerClusterer&&l.markerClusterer.setMap(a),n())})},l.onDetailedZoomChanged=function(){l.trackedAsset||1!=l.clusteredView||i.getMap({id:"detailed-"+l.$wdgid}).then(function(a){a.getZoom()<=l.clusteredZoomMax?(l.showDetailedMap=!1,l.clusterZoom=l.clusteredZoomMax,n()):l.showDetailedMap=!0})},l.pushAssets=function(a,b){var c=b.source,d=c+"_"+a,e=null;if(l.assets[d]){var f=l.assets[d].markers;e=f[f.length-1]}else l.instantiateAsset(d),l.assets[d].pathColor=q();for(var g=null,h=null,i=b.order,k=i.length-1;k>=0;k--){var m=i[k];if(b.hasOwnProperty(m))for(var n=b[m],r=q(),s=q(),t=n.length-1;t>=0;t--){var u=n[t],v={position:u.lat.value+","+u.long.value};v.title="Source: "+c+", Asset: "+a+", trip: "+m+".",v.source=c,v.assetId=a,v.assetKey=d,v.tripKey=m,v.details=u,g=v.details&&v.details.model?v.details.model.value:"",h=v.details&&v.details.make?v.details.make.value:"",v.display=p(h,g,a),e||null!=e?m==e.tripKey?(v.id=d+"-"+m+"-"+(e.pointRef+1),v.pointRef=e.pointRef+1,v.strokeColor=e.strokeColor,v.fillColor=e.fillColor,l.assets[d].markers[f.length-1].icon=o(6,.8,.8,e.strokeColor,e.fillColor)):l.assets[d].markers[f.length-1].icon=o(10,1,1,e.strokeColor,e.fillColor):(v.id=d+"-"+m+"-"+t,v.pointRef=t,v.strokeColor=r,v.fillColor=s),0==k&&0==t?(v.icon=l.sourcesInfo&&l.sourcesInfo[c]&&l.sourcesInfo[c].icon?l.sourcesInfo[c].icon:j.sourceIcon.default,l.assets[d].latestMarker=v):v.icon=0==t?o(10,1,1,r,s):o(6,.8,.8,r,s),l.controlVehicleTrips(d),l.addMarkerToMap(d,v,u),null==l.mapcenter&&(l.mapcenter=v.position)}}l.addAssetToSourceList(c,d,v.display)},l.addAssetToSourceList=function(a,b,c){l.sources[a]?void 0==_.findWhere(l.sources[a],{key:b})&&l.sources[a].push({key:b,label:c}):l.sources[a]=[{key:b,label:c}]},l.addMarkerToMap=function(a,b,c){if(l.assets[a].markers.push(b),l.assets[a].path.push([c.lat.value,c.long.value]),!l.trackedAsset){var d=angular.copy(b,{});d.position=new google.maps.LatLng(c.lat.value,c.long.value);var e=new google.maps.Marker(d);l.dynMarkers.push(e)}},l.controlVehicleTrips=function(a){l.maxAssetPoints&&l.assets[a].markers.length>l.maxAssetPoints&&l.assets[a].markers.shift()},l.instantiateAsset=function(a){l.assets[a]={markers:[],path:[],pathColor:"",latestMarker:{},strokeOpacity:l.pathStrokeOpacity,strokeWeight:l.pathStrokeWeight,pathIcon:[{icon:{path:"M 0,-1 0,1",strokeOpacity:1,scale:4},offset:"0",repeat:"20px"}]}};var o=function(a,b,c,d,e){return{path:google.maps.SymbolPath.CIRCLE,fillOpacity:b,strokeWeight:c,scale:a,strokeColor:d,fillColor:e}},p=function(a,b,c){var d=a?a+" ":"";return d+=b?b+"-":"",d+=c};l.focusOnAsset=function(a){l.onSelectAsset&&"function"==typeof l.onSelectAsset()&&l.onSelectAsset()(a),l.selectedAsset=a,l.showDetailedMap=!0,null!=l.infoWindow&&l.infoWindow.close(),"all"==l.selectedAsset?(l.detailedmapzoom=l.detailedZoomMin,l.searchText=""):(l.searchText=l.assets[a].latestMarker.display,l.mapcenter=l.assets[l.selectedAsset].latestMarker.position,l.detailedmapzoom=l.focusedMarkerZoom)},l.showAssetInfo=function(b,c,d,e,f){l.focusOnAsset(d);var g=this;i.getMap({id:"detailed-"+l.$wdgid}).then(function(d){a.$parent.marker=c;var e="infoWindowTemplate_"+a.$parent.marker.source;if(a.map=d,l.markerInfoWindow)if(a.map.infoWindows[e])a.map.showInfoWindow(b,e,g),l.infoWindow=d.infoWindows[e];else{a.marker=c;var e="infoWindowTemplate_default_"+l.$wdgid;a.map.showInfoWindow(b,e,g),l.infoWindow=d.infoWindows[e]}})};var q=function(){var a=Math.floor(16777215*Math.random()).toString(16);return r("#"+a,0)},r=function(a,b){var c=parseInt(a.slice(1),16),d=b<0?0:255,e=b<0?-1*b:b,f=c>>16,g=c>>8&255,h=255&c;return"#"+(16777216+65536*(Math.round((d-f)*e)+f)+256*(Math.round((d-g)*e)+g)+(Math.round((d-h)*e)+h)).toString(16).slice(1)};l.isEmptyObject=function(a){return 0==Object.keys(a).length},l.assetsFences=[],l.drawingControl=["rectangle"],l.drawingOptions={position:"TOP_CENTER",drawingModes:["rectangle"]},l.overlaySettings={fillColor:"#444",fillOpacity:.2,strokeWeight:3,strokeColor:"#ff8c00",clickable:!0,zIndex:1,editable:!0},l.setupDrawingManager=function(){l.assetsFences=[],a.invoke("telematics/api/getVehicleGeofence",{vehicleId:l.selectedAsset},"main-getgeofence_"+l.selectedAsset),t()},l.drawGeofence=function(a){null!=a?i.getMap({id:"detailed-"+l.$wdgid}).then(function(b){var c={};c.fillColor=l.overlaySettings.fillColor,c.fillOpacity=l.overlaySettings.fillOpacity,c.strokeWeight=l.overlaySettings.strokeWeight,c.strokeColor=l.overlaySettings.strokeColor,c.clickable=l.overlaySettings.clickable,c.zIndex=l.overlaySettings.zIndex,c.editable=l.overlaySettings.editable,c.map=b,c.bounds=JSON.parse(a);var d=new google.maps.Rectangle(c);l.assetsFences.push({assetId:l.selectedAsset,thissetFence:d})}):s(),$('[data-toggle="tooltip"]').tooltip(),$(".gmnoprint").each(function(){newObj=$(this).find("[title='Stop drawing']"),newObj.attr("class","btnStop"),newObj=$(this).find("[title='Draw a rectangle']"),newObj.attr("id","btnRectangle")})};var s=function(){l.drawingOptions={position:"TOP_CENTER",drawingModes:["rectangle"]}},t=function(){l.drawingOptions={position:"TOP_CENTER",drawingModes:[]}};l.onMapOverlayCompleted=function(a){t(),l.assetsFences.push({assetId:l.selectedAsset,assetFence:a.overlay}),l.drawingMessagesTimeout&&f.cancel(l.drawingMessagesTimeout),l.drawingMessages="Do not forget to save your geofence before selecting another vehicle.",l.drawingMessagesTimeout=f(function(){l.drawingMessages=null},5e3)},l.focusVehicle=function(){l.selectedAsset&&(l.mapcenter=l.assets[l.selectedAsset].latestMarker.position)},l.drawingMessages=null,l.drawingMessagesTimeout=null,l.focusGeofence=function(){var a=_.findWhere(l.assetsFences,{assetId:l.selectedAsset});a?l.mapcenter=a.assetFence.getBounds().getCenter():(l.drawingMessagesTimeout&&f.cancel(l.drawingMessagesTimeout),l.drawingMessages="No geofence has been defined yet for selected vehicle.",l.drawingMessagesTimeout=f(function(){l.drawingMessages=null},5e3))},l.removeGeofence=function(){var b=_.findWhere(l.assetsFences,{assetId:l.selectedAsset});b&&(l.assetsFences=_.without(l.assetsFences,b),a.invoke("telematics/api/removeVehicleGeofence",{vehicleId:l.selectedAsset},"main-removegeofence_"+l.selectedAsset),b.assetFence.setMap(null)),s()},l.hideAllGeofences=function(){_.every(l.assetsFences,function(a){return a.assetFence.setMap(null),!0})},l.saveGeofence=function(){var b=_.findWhere(l.assetsFences,{assetId:l.selectedAsset});b&&a.invoke("telematics/api/saveVehicleGeofence",{vehicleId:l.selectedAsset,bounds:JSON.stringify(b.assetFence.getBounds())},"main-savegeofence_"+l.selectedAsset)}}]}).constant("defaultConstants",{sourceIcon:{default:{url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAoCAMAAAA1+gEjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjM5Q0JGQjdENzVBNTExRTY4RDczRThCNDhCQkVDQ0REIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjM5Q0JGQjdFNzVBNTExRTY4RDczRThCNDhCQkVDQ0REIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MzlDQkZCN0I3NUE1MTFFNjhENzNFOEI0OEJCRUNDREQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MzlDQkZCN0M3NUE1MTFFNjhENzNFOEI0OEJCRUNDREQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4YqnkxAAAAY1BMVEUAAAD///8fitIfitIfitIfitIfitIfitIfitIfitIfitIfitIfitIfitIfitIfitIfitIfitItkdU7mdhJoNpXp91ztuOBveaPxemdzOur0+652vHH4vTV6ffj8Pnx+Pz////2ehAtAAAAEXRSTlMAABAgMEBQYHCAj5+vv8/f7/4ucL8AAAFeSURBVBgZfcEBYqIwFEXRP1FBEUtuVEAa5O1/lY0iFrTOOfaU7Stuqn1mL9zO88vvnM1sKpaqjT3l3NTdVdK1q7nJ7SEnqa+aXGuS3O4yIHxr7jsAmSXOQ+i11AfwzswKIOpVBAozB9RKYmAUopIacLYFBiWnYxwdz0oGYGsHqJX0dBp19EpqOJiHTknNoNFAraQDb0CU1DDXSIqAAZJ6QsOkCfSSAAMGKdLqxOikligNgAFRioQTk1MgShGwEi5SZClKFzhYDmcpshSlM2zNeYiSoNWoBUkRWJnt4SwpcNHoQpB0htLMVkArXaMm8Sq1wMaSPdBpqQMOdrPyQKO5hmRjdzuSY6dJdyQ52MhV3IS6izF2deBuZQ8b3hX2VPLKO3tynheZzWQslbZQMOdXtuAqZrb2Ys2v0t5smXhn70oeMvuD++KusD+tPcmXfZADfm2fFJDZZ2VhC//+5wfrMULZDg3JQwAAAABJRU5ErkJggg=="}}}),angular.module("Publisher",[]),angular.module("Publisher").component("scriptrPublisher",{bindings:{msgTag:"@",onFormatData:"&"},template:"<div></div>",controller:["httpClient","wsClient",function(a,b){var c=this;this.$onInit=function(){d()};var d=function(){b.onReady.then(function(){b.subscribe(c.msgTag,c.consumeData.bind(c))})};this.consumeData=function(a,b){"function"==typeof c.onFormatData()&&(a=c.onFormatData()(a)),this.value=Math.round(a)}}]}),agGrid.initialiseAgGridWithAngular1(angular),angular.module("Grid",["agGrid","ui.bootstrap"]),angular.module("Grid").component("scriptrGrid",{bindings:{onLoad:"&onLoad",columnsDefinition:"<columnsDefinition",enableServerSideSorting:"<?",enableServerSideFilter:"<?",enableColResize:"<?",enableDeleteRow:"<?",enableAddRow:"<?",cellEditable:"<?",enableClientSideSorting:"<?",api:"@",onInsertRowScript:"@",onDeleteRowScript:"@",transport:"@",enableClientSideFilter:"<?",rowModelType:"@",rowModelSelection:"@",rowDeselection:"<?",onSelectionChanged:"&?",rowData:"<?",suppressFilter:"<?",gridHeight:"@",paginationPageSize:"<?",paginationOverflowSize:"<?",maxConcurrentDatasourceRequests:"<?",paginationInitialRowCount:"<?",maxPagesInCache:"<?",apiParams:"<?",onFormatData:"&",onCellValueChanged:"&",msgTag:"@",class:"@",onGridReady:"&"},templateUrl:"/UIComponents/dashboard/frontend/components/grid/grid.html",controller:["$scope","$window","$uibModal","$timeout","dataService",function(a,b,c,d,e){var f=this;f.broadcastData=null,this.dataSource={getRows:function(a){if(null!=f.broadcastData){if(null!=f.broadcastData.api)var b=f.broadcastData.api;else var b=f.api;if(null!=f.broadcastData.params&&(this.apiParams=f.broadcastData.params),null!=f.broadcastData.transport)var c=f.broadcastData.transport;else var c=f.transport}else var b=f.api,c=f.transport;var d=f.buildParams(a),g=null;"function"==typeof f.onFormatData()&&(g=function(a){return f.onFormatData()(a)}),e.getGridData(b,d,c,g).then(function(b,c){if(b&&b.documents){var d=b.documents,e=parseInt(b.count);if(a.successCallback(f.cleanRows(d),e),f.gridOptions.api.sizeColumnsToFit(),null==d||0==d.length){angular.element(document.querySelector("#btNext")).attr("disabled","true")}}else a.failCallback(),"virtual"==f.gridOptions.rowModelType&&f.gridOptions.api.showNoRowsOverlay()},function(a){console.log("reject",a)})}},this.cleanRows=function(a){Array.isArray(a)||(a=[a]);for(var b=!1,c=0;c<a.length;c++)for(row in a[c])if("key"!=row){b=!1;for(var d=0;d<f.gridOptions.columnDefs.length;d++)if(row==f.gridOptions.columnDefs[d].field){b=!0;break}b||delete a[c][row]}return a},this._createNewDatasource=function(){this.gridOptions.api.setDatasource(this.dataSource)};for(var g=0;g<this.columnsDefinition.length;g++)this.columnsDefinition[g].hasOwnProperty("type")&&"numeric"==this.columnsDefinition[g].type&&(this.columnsDefinition[g].filter="number");this.$onInit=function(){this.gridOptions={angularCompileRows:!0,enableSorting:void 0===this.enableClientSideSorting||this.enableClientSideSorting,enableServerSideSorting:void 0===this.enableServerSideSorting||this.enableServerSideSorting,enableServerSideFilter:void 0===this.enableServerSideFilter||this.enableServerSideFilter,enableColResize:void 0!==this.enableColResize&&this.enableColResize,enableFilter:void 0===this.enableFilter||this.enableFilter,columnDefs:this.columnsDefinition,rowData:this.rowData?this.rowData:null,rowModelType:this.rowModelType?this.rowModelType:this.rowData?"":"virtual",rowSelection:this.rowModelSelection?this.rowModelSelection:"multiple",paginationPageSize:this.paginationPageSize?this.paginationPageSize:50,overlayLoadingTemplate:'<span class="ag-overlay-loading-center"><i class="fa fa-spinner fa-spin fa-fw fa-2x"></i> Please wait while your rows are loading</span>',defaultColDef:{filterParams:{apply:!0},suppressFilter:void 0!==this.suppressFilter&&this.suppressFilter,editable:void 0===this.cellEditable||this.cellEditable},onSelectionChanged:function(){if(null!=f.onSelectionChanged&&"function"==typeof f.onSelectionChanged())return f.onSelectionChanged()(f.gridOptions)},onCellValueChanged:function(a){f.oldEditedValue=a.oldValue,f.editedColumn=a.colDef.field,f.editedChildIndex=a.node.childIndex||a.node.id,null!=f.onCellValueChanged&&"function"==typeof f.onCellValueChanged()&&f.onCellValueChanged()(f.gridOptions),"pagination"!=f.gridOptions.rowModelType&&"virtual"!=f.gridOptions.rowModelType||(f.api?f._saveData(a):(f.undoChanges(),f.showAlert("danger","No script defined for cell edit")))},onGridReady:function(a){console.log("the grid is now ready"),"function"==typeof f.onGridReady()&&f.onGridReady()(f),a.api.filterManager.availableFilters.text.CONTAINS="startsWith",void 0===f.rowData||null==f.rowData||f.rowData&&0==f.rowData.length?f.api?f._createNewDatasource():a.api.setRowData([]):a.api.sizeColumnsToFit()},onGridSizeChanged:function(a){f.gridOptions.api.sizeColumnsToFit()}},this.gridHeight=this.gridHeight?this.gridHeight:"500",this.style={},this.style.height=this.gridHeight+"px",this.style.clear="left",this.style.width="100%",this.transport=this.transport?this.transport:"wss",this.enableDeleteRow=1!=this.enableDeleteRow,this.enableAddRow=1!=this.enableAddRow,this.enableClientSideFilter=1!=this.enableClientSideFilter,this.enableServerSideFilter=1!=this.enableServerSideFilter,f.msgTag&&e.subscribe(this.onWebSocketCall,f.msgTag),a.$on("updateGridData",function(a,b){f.broadcastData=b,f._createNewDatasource()})},this.closeAlert=function(){this.show=!1},this.showAlert=function(a,b){f.message={type:a,content:b},f.showError=!0,d(function(){f.showError=!1},5e3)},this._saveData=function(a){if(a.data&&a.data.key){var b=a.data;b.action="edit",e.gridHelper(f.api,b).then(function(a,b){a&&"success"==a.status?f.showAlert("success","Row updated successfuly"):(f.undoChanges(),a&&a.errorDetail?f.showAlert("danger",a.errorDetail):f.showAlert("danger","An error has occured"))},function(a){console.log("reject",a),f.showAlert("danger","An error has occured")})}else{var b=a.data;b.action="add",e.gridHelper(f.api,a.data).then(function(a,b){a&&"success"==a.status?f.showAlert("success","Row Added successfuly"):(f.undoChanges(),a&&a.errorDetail?f.showAlert("danger",a.errorDetail):f.showAlert("danger","An error has occured"))},function(a){console.log("reject",a),f.showAlert("danger","An error has occured")})}},this.onAddRow=function(){for(var a={},b=0;b<f.gridOptions.columnDefs.length;b++)a[f.gridOptions.columnDefs[b].field]="";f.gridOptions.api.insertItemsAtIndex(0,[a]),f.gridOptions.api.setFocusedCell(0,f.gridOptions.columnDefs[0].field),f.gridOptions.api.startEditingCell({rowIndex:0,colKey:f.gridOptions.columnDefs[0].field,charPress:f.gridOptions.columnDefs[0].field})},this.openConfirmationPopUp=function(){c.open({controller:"PopupCont",templateUrl:"/UIComponents/dashboard/frontend/components/grid/popup.html",resolve:{grid:function(){return f}}})},this.onRemoveRow=function(a){if("pagination"==f.gridOptions.rowModelType||"virtual"==f.gridOptions.rowModelType)if(f.api){for(var b=f.gridOptions.api.getSelectedNodes(),c=[],d=0;d<b.length;d++)c.push(b[d].data.key);c.length>0&&e.gridHelper(f.api,{keys:c,action:"delete"}).then(function(a,b){if(a&&"success"==a.status){var c=f.gridOptions.api.getSelectedNodes();f.gridOptions.api.removeItems(c),f.showAlert("success","Row deleted successfuly")}else a&&a.errorDetail?f.showAlert("danger",a.errorDetail):f.showAlert("danger","An error has occured")},function(a){console.log("reject",a),f.showAlert("danger","An error has occured")})}else f.showAlert("danger","No script defined for delete row");else{var b=f.gridOptions.api.getSelectedNodes();f.gridOptions.api.removeItems(b)}},this.onWebSocketCall=function(a){if(a&&a.action){if("add"==a.action){for(var b={},a=a.result,c=0;c<f.gridOptions.columnDefs.length;c++)for(row in a)if(void 0!==f.gridOptions.columnDefs[c].field){if(f.gridOptions.columnDefs[c].field==row){b[f.gridOptions.columnDefs[c].field]=a[row];break}b[f.gridOptions.columnDefs[c].field]=""}var d=f.gridOptions.api.getRenderedNodes()[0];d.data.key?(b.key=a.key,f.gridOptions.api.insertItemsAtIndex(0,[b])):d.data.key=a.key}else if("edit"==a.action){var e=a.result,g=e.key||e["apsdb.documentKey"];if("pagination"==f.gridOptions.rowModelType){f.gridOptions.api.forEachNode(function(a){if(a.data.key==g){var b=a.childIndex,c=f.gridOptions.api.getModel(),a=[c.getRow(b)][0];a.data=f.cleanRows(e)[0],a.data.key=g,f.gridOptions.api.refreshView()}});var d=f.gridOptions.api.getRenderedNodes()[0];d.data.key||(d.data.key=g)}else f.gridOptions.api.refreshVirtualPageCache()}else if("delete"==a.action){var h=a.result;if("pagination"==f.gridOptions.rowModelType)for(var i=0;i<h.length;i++)f.gridOptions.api.forEachNode(function(a){if(a.data.key==h[i]){var b=a.childIndex,c=f.gridOptions.api.getModel(),a=[c.getRow(b)];f.gridOptions.api.removeItems(a)}});else f.gridOptions.api.refreshVirtualPageCache()}}else a&&a.errorDetail?f.showAlert("danger",a.errorDetail):f.showAlert("danger","An error has occured")},this.undoChanges=function(a){if(f.oldEditedValue){f.gridOptions.api.forEachNode(function(a){a.childIndex!=f.editedChildIndex&&a.id!=f.editedChildIndex||a.setSelected(!0,!0)});f.gridOptions.api.getSelectedNodes()[0].data[f.editedColumn]=f.oldEditedValue,f.gridOptions.api.refreshView()}else f.gridOptions.api.forEachNode(function(a){if("pagination"==f.gridOptions.rowModelType){if(0==a.childIndex){a.setSelected(!0,!0);var b=f.gridOptions.api.getSelectedNodes();f.gridOptions.api.removeItems(b)}}else f.gridOptions.api.refreshVirtualPageCache()})},this.onFilterChanged=function(){this.gridOptions.enableServerSideFilter=!1,this.gridOptions.api.setQuickFilter(this.quickFilterValue),this.gridOptions.enableServerSideFilter=!0},this.buildParams=function(a){var b=this.gridOptions.quickFilterText,c=null,d=a.endRow/this.gridOptions.paginationPageSize;if(a.sortModel&&a.sortModel.length>0){var e=a.sortModel[0].sort,f=a.sortModel[0].colId;c=this.gridOptions.api.getColumnDef(f).type?this.gridOptions.api.getColumnDef(f).type:null}if(a.filterModel)for(p in a.filterModel){b=a.filterModel[p].filter;var g=a.filterModel[p].type,h=p;c=this.gridOptions.api.getColumnDef(h).type?this.gridOptions.api.getColumnDef(h).type:null}var i={resultsPerPage:this.gridOptions.paginationPageSize,pageNumber:d};if(f&&(i.sortingColumnName=f),h&&(i.filterColumnName=h),e&&(i.sort=e),c&&(i.sortType=c),b&&(i.queryFilter=b),g&&(i.queryType=g),i.startRow=a.startRow,i.endRow=a.endRow,this.apiParams)for(var j in this.apiParams)i[j]=this.apiParams[j];return i}}]}),angular.module("Grid").service("dataService",["httpClient","wsClient","$q",function(a,b,c){this.subscribe=function(a,c){b.onReady.then(function(){b.subscribe(c,a.bind(self))})},this.gridHelper=function(a,d){var e=c.defer();return b.call(a,d,"grid").then(function(a,b){e.resolve(a,b)},function(a){e.reject(a)}),e.promise},this.getGridData=function(d,e,f,g){var h=c.defer();return"https"==f?(a.get(d,e).then(function(a,b){if(g&&(a=g(a)),a&&a.documents&&0!=a.documents.length){var a={documents:a.documents,count:a.count};h.resolve(a,b)}else h.resolve(null,b)},function(a){h.resolve(null),h.reject(a)}),h.promise):"wss"==f?d&&void 0!==d?(b.onReady.then(function(){b.call(d,e,"grid").then(function(a,b){if(g&&(a=g(a)),a&&a.documents&&0!=a.documents.length){var a={documents:a.documents,count:a.count};h.resolve(a,b)}else h.resolve(null,b)},function(a){h.resolve(null),h.reject(a)})}),h.promise):(b.onReady.then(function(){b.publish(e,"publish").then(function(a,b){if(a&&a.documents&&0!=a.documents.length){var a={documents:a.documents,count:a.count};h.resolve(a,b)}else h.resolve(null,b)},function(a){h.resolve(null),h.reject(a)})}),h.promise):void 0}}]),angular.module("Grid").controller("PopupCont",["$scope","$uibModalInstance",function(a,b){a.close=function(){b.dismiss("cancel")},a.onRemoveRow=function(){console.log("deleting.."),this.$resolve.grid.onRemoveRow(),b.dismiss("cancel")}}]),angular.module("ACL",["ui.bootstrap","List"]),angular.module("ACL").component("scriptrAcl",{bindings:{users:"<?",defaultSetObject:"<?",onSave:"&"},templateUrl:"/UIComponents/dashboard/frontend/components/ACL/ACL.html",controller:["$uibModal",function(a){var b=this;this.$onInit=function(){console.log("$onInit initialized"),b.accessType=1==b.users.length&&"anonymous"==b.users[0].code?"Anonymous access":"Restricted access"},this.$postLink=function(){console.log("$postLink initialized")},this.openModal=function(){a.open({animation:!0,size:"lg",component:"aclPopup",resolve:{widget:function(){return{parent:b,users:b.users,defaultSetObject:b.defaultSetObject,onSave:b.onSave}}}}).result.then(function(a){console.log("selectedItem: "+a)},function(){})}}]}),angular.module("ACL").component("aclPopup",{bindings:{resolve:"<",users:"<?",defaultSetObject:"<?",close:"&",dismiss:"&"},templateUrl:"/UIComponents/dashboard/frontend/components/ACL/myModalContent.html",controller:["$scope","$sce",function(a,b){var c=this;c.listScope,this.$onInit=function(){c.users=c.resolve.widget.users,c.defaultSetObject=c.resolve.widget.defaultSetObject,c.popoverContent=b.trustAsHtml("<span style='color: #323232;'><strong>Scriptr.io provides the following predefined groups:</strong><div class='mt10 mb5'><i class='fa fa-caret-right text-primary'></i> authenticated represents anyone with a valid token.</div><div class='mb5'><i class='fa fa-caret-right text-primary'></i> anonymous represents everyone.</div><div class='mb5'><i class='fa fa-caret-right text-primary'></i> nobody represents no one.</div></span>")},this.onSelect=function(a){c.resolve.modalScope=this,"anonymous"==a.originalObject[this.titleField]&&(this.disableInput=!0,this.hideObjects=!0,c.showMsg=!0)},this.removeAnonymousAccess=function(){c.showMsg=!1,c.resolve.modalScope.disableInput=!1,c.resolve.modalScope.hideObjects=!1;var b=[{code:"anonymous",icon:"fa fa-group"}];a.$broadcast("angucomplete-alt:addObjectToList",c.id,b)},this.addAnonymousAccess=function(){c.showMsg=!1,c.resolve.modalScope.disableInput=!1,c.resolve.modalScope.hideObjects=!1;for(var b=[],d=0;d<c.resolve.modalScope.objects.length;d++)"anonymous"!=c.resolve.modalScope.objects[d].code&&b.push(c.resolve.modalScope.objects[d]);a.$broadcast("angucomplete-alt:addObjectToList",c.id,b)},this.closeAlert=function(){this.show=!1},this.showAlert=function(a,b){this.closeAlert(),this.message={type:a,content:b},this.show=!0},this.updateFileACL=function(){c.listScope||(c.listScope=a.$broadcast("angucomplete-alt:getSetObjects",c.id));var b=c.listScope.targetScope.$$childTail.$ctrl;if("function"==typeof c.resolve.widget.onSave()){var d=[];if(void 0===b.objects&&(b.objects=c.resolve.modalScope.objects),b.objects.length>0)var e=b.objects;else var e=c.resolve.widget.defaultSetObject;for(var f=0;f<e.length;f++)d.push(e[f].code);b.showList=!1,c.resolve.widget.onSave()(d).then(function(a,d){b.showList=!0,c.showAlert("success","The Access Control List is saved successfully."),c.resolve.widget.parent.users=b.objects,c.resolve.widget.parent.accessType=1==b.objects.length&&"anonymous"==b.objects[0].code?"Anonymous access":"Restricted access",console.log("success")},function(a){b.showList=!0,c.showMsg("danger",a.data.response.metadata.errorDetail),console.log("reject",a)})}},this.onCancel=function(a){this.dismiss({$value:"cancel"}),console.log("Dissmisseddd")}}]}),angular.module("List",["angucomplete-alt"]).component("scriptrAutocomplete",{bindings:{id:"@",objects:"<?",hideObjects:"<?",listSelectedObject:"<?",defaultSetObject:"<?",placeholder:"@",maxlength:"@",pause:"@",selectedObject:"<?",selectedObjectData:"<?",titleField:"@",descriptionField:"@",imageField:"@",minlength:"@",inputName:"@",inputClass:"@",matchClass:"@",localData:"<?",searchFields:"@",clearSelected:"@",overrideSuggestions:"@",fieldRequired:"@",fieldRequiredClass:"@",textSearching:"@",textNoResults:"@",initialValue:"@",inputChanged:"&",autoMatch:"@",focusIn:"&",focusOut:"&",disableInput:"@",focusFirst:"@",fieldTabindex:"@",parseInput:"&",localSearch:"&",transport:"@",msgTag:"@",api:"@",onFormatData:"&"},templateUrl:"/UIComponents/dashboard/frontend/components/list/autocomplete.html",controller:["$scope","wsClient","httpClient",function(a,b,c){var d=this;this.$onInit=function(){this.localData=this.localData?this.localData:[],this.fieldRequired=void 0!==this.fieldRequired&&this.fieldRequired,this.textSearching=void 0!==this.textSearching&&this.textSearching,this.transport=this.transport?this.transport:"wss",this.objects=this.objects?this.objects:[],this.listSelectedObject&&this.objects.length>0&&!d.api&&(a.$broadcast("angucomplete-alt:setData",d.id,this.localData),a.$broadcast("angucomplete-alt:setSelectedObjects",d.id,this.objects)),d.api&&(d.showList=!1,e(this.transport))},d.addObjectToList=function(b){a.$broadcast("angucomplete-alt:addObjectToList",d.id,b),0==this.objects.length&&void 0!==this.defaultSetObject&&(this.objects=JSON.parse(JSON.stringify(this.defaultSetObject)))};var e=function(a){"wss"==a?b.onReady.then(function(){b.subscribe(d.msgTag,d.consumeData.bind(d)),d.api&&b.call(d.api,d.apiParams,d.msgTag).then(function(a,b){d.consumeData(a)})}):"https"==a&&d.api&&c.get(d.api,d.apiParams).then(function(a,b){d.consumeData(a)},function(a){console.log("reject published promise",a)})};this.consumeData=function(b,c){d.showList=!0,"function"==typeof d.onFormatData()&&(b=d.onFormatData()(b)),this.localData=b,this.listSelectedObject&&this.objects.length>0&&(a.$broadcast("angucomplete-alt:setData",d.id,this.localData),a.$broadcast("angucomplete-alt:setSelectedObjects",d.id,this.objects))}}]});